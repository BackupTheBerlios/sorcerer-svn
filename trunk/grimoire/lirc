   VERSION=( "0.7.2" "0.7.1" "0.7.0" "0.6.6" )
    IGNORE="xmms-plugin\|services\|alpha"
  CATEGORY="kernel"
 ATTRIBUTE="driver library old_init"
    SOURCE="lirc/lirc-$VERSION.tar.bz2"
       URL="$SOURCEFORGE_URL"
       REQ="libtool"
  HOMEPAGE="http://www.lirc.org"
  disable archive necropolis
  ESTIMATE="224"
      DESC="lirc (Linux Infrared Remote Control).
lirc is a package that allows you to decode
and send infra-red signals of many,
but not all, commonly used remote controls.
If you want to run the daemon add a command
to /etc/init.d/bootmisc to invoke it."

build() {

conf()  {
  if    [  -f  $CONFIG_LOGS/$BSPELL/configure.sh  ]
  then  cp     $CONFIG_LOGS/$BSPELL/configure.sh  .
  else
    patch  -p0  <  $SCRIPT_DIR/lirc-setup.patch
    wiz_kill
    ./setup.sh  &&
    cp  configure.sh  $CONFIG_LOGS/$BSPELL/
  fi
}

sed_source()  {
  sed -i 's:"$@":--prefix=/usr --sysconfdir=/etc:' configure.sh
  sed -i "s:-O2 -g:$CFLAGS:" configure
  sed -i "s:-O2 -g:$CFLAGS:" configure.in
}

update_cvs_source()  {
  if   [  "$BRANCH"  ==  "cvs"  ];  then
    [  -x  autogen.sh  ]  &&
    unset  CVSROOT  CVS_RSH
    echo   $OPTS  |  grep  -q  update  &&
    cvs    -z9  update
    ./autogen.sh
  fi
}

  groupadd   lirc    2>/dev/null
  update_cvs_source  &&
  conf               &&
  sed_source         &&
  activate_voyeur    &&

  {
    libtoolize  --force
    sh  configure.sh     &&
    make                 &&
    prepare_install      &&
    make    install
#      &&
#    finish_install
  } &> $C_FIFO
}
