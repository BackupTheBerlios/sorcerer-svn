# Once someone writes spells for
# http://www.southern-storm.com.au/portable_net.html
# we can do the --disable-csharp as no on anwit elect   requirement

# segementation faults during compilation if emacs installed
# and --without-emacs not passed to configure

# requires glib but the explicit requirement creates
# a recursive requirement loop among glib gettext libcroco
# fixed in gettext
# gettext can compile using it's internal version of libcroco
# if libcroco is not installed.

with info    edit 20131126
with info    last 20130820
with version stable 0.18.3.1 0.18.3 0.18.2.1
with base    acl gcc-g++ libunistring m4 xz
#with base    acl gcc-g++ libcroco libunistring m4 xz
if   ! [ -f "$POST_LOGS"/sorcerer-iso9660  ] &&
     ! [ -f "$POST_LOGS"/deployment-docent ]
then
with elect   libxml2
fi
with also    --disable-csharp --without-emacs --disable-static --disable-rpath
with role    development
with trait   console library lto makej multilib-concurrent solo
with source  stable $GNU_URL gettext/gettext-$VERSION.tar.gz
with info    home http://www.gnu.org/software/gettext/
with info    docs http://www.gnu.org/software/gettext/manual/gettext.html
with info    cite 'GNU internationalisation library
Many programs that have translated messages depend upon this
library and tools.'

build(){
 if   [ -f "$POST_LOGS"/sorcerer-iso9660  ] ||
      [ -f "$POST_LOGS"/deployment-docent ]
 then sed -i 's:doc intl:intl:'                    gettext-*/Makefile.in
      sed -i 's:tests gnulib-tests examples::' gettext-tools/Makefile.in
 fi
 LC_ALL=C grep -rl "/bin/pwd" | xargs -r --max-lines=256 -- sed -i 's:/bin/pwd:pwd:' --
 default_build
}
