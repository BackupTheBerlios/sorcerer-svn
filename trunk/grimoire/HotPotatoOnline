   VERSION=( "1.0.0" )
  CATEGORY="game"
 ATTRIBUTE="x11 new broken"
# This game segfaults when a match is launched.
    SOURCE="hponline/HotPotatoOnlineSources-v$VERSION.tar.gz"
  HOMEPAGE="http://www.hotpotatoonline.com"
       URL="$SOURCEFORGE_URL"
       REQ="SDL glut gltext"
      OPTS="--bindir=/usr/games"
  ESTIMATE="48"
      DESC="HotPotatoOnline is a fast paced areana sport game.
Players try to explode the opposition using a short-fused potato bomb.
The generated environment can be used to bounce, corner, and surprise foes.
Up to 4 players can confront each other in detailed customized matches.
It's similar to dodgeball with a grenade."

build()  {
  install_potato()  {
    mkdir    -p                  /usr/games
    install  -m 0755  HotPotato  /usr/games
    mkdir    -p                  /usr/share/games/potato
    find  .  -type f  |  escape_qs  |  xargs  -l64  chmod 0644
    find  .  -type d  |  escape_qs  |  xargs  -l64  chmod 0755
    rm       -f  *.cpp  *.d  *.h  *.o  Makefile  HotPotato
    cp       -r  *               /usr/share/games/potato
    echo     -e "#!/bin/bash\ncd /usr/share/games/potato\n/usr/games/HotPotato"  \
             >      /usr/games/run-potato
    chmod    0755   /usr/games/run-potato
  }

  sed  -i  "s:-O2:$CXXFLAGS:
            s:-lGL :-L/usr/X11R6/lib -lGL :"  Makefile
  make             &&
  prepare_install  &&
  install_potato
}
