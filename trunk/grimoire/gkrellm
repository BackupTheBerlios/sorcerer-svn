  category utility/time utility/monitor
 attribute x11
  homepage http://www.gkrellm.net/
  estimate 150
      desc 'gkrellm is a stacked monitor program.
gkrellm is a gtk+ based stacked monitor program
that charts SMP CPUs, disks, load,
active net interfaces, and internet connections.
There are also builtin monitors for memory and swap,
file systems with mount/umount feature,
mailbox checking including POP3 and IMAP,clock/calendar,
laptop battery, sensors (temperatures, voltages, and fans), and uptime.
It has LEDs for the net monitors and an
on/off button and online timer for PPP.
There is a GUI popup for configuration, plugin extensions
can be installed, and many themes are available.
It also features a client/server monitoring capability.'

case $SPELL in
 gkrellm-*)
   require gkrellm ;;
 gkrellm)
    stable 2.3.5 2.3.4 2.3.3 2.3.2 2.3.1 2.3.0
    source http://members.dslextreme.com/users/billw/gkrellm/gkrellm-$VERSION.tar.bz2
   require gettext gnutls gtk+
  optional lm_sensors '' '' for hardware monitoring and reporting
  optional openssl
  estimate 150 ;;
esac

build(){
 install_gkrellm(){
  sed -i 's:/usr/local:/usr:' Makefile

  make &&
  make install DESTDIR=$DESTDIR/usr
 }

 install_plugin(){
  sed -i "s:-O2:$CFLAGS:
          s:/usr/local:/usr:" Makefile

   PD=/usr/lib/gkrellm2/plugins
  NLS=enable_nls=1
  PPD=PLUGIN_DIR=$PD

  make     $NLS $PPD &&
  mkdir -p $PD       &&
  make install $NLS $PPD DESTDIR=$DESTDIR
 }

 case $SPELL in
  gkrellm-*) install_plugin ;;
          *) install_gkrellm ;;
 esac
}
