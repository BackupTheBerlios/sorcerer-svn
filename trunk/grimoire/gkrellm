   VERSION=( 2.3.0 2.2.10 2.2.9 2.2.8 2.2.7 2.2.6 )
  CATEGORY='utility/time utility/monitor'
 ATTRIBUTE='x11'
    SOURCE="gkrellm-$VERSION.tar.bz2"
  HOMEPAGE='http://www.gkrellm.net/'
       URL='http://members.dslextreme.com/users/billw/gkrellm/'
       REQ=( 'gettext gnutls gtk+'
             'lm_sensors:::for hardware monitoring and reporting' )
  ESTIMATE='120'
      DESC='gkrellm is a stacked monitor program.
gkrellm is a gtk+ based stacked monitor program
that charts SMP CPUs, disks, load,
active net interfaces, and internet connections.
There are also builtin monitors for memory and swap,
file systems with mount/umount feature,
mailbox checking including POP3 and IMAP,clock/calendar,
laptop battery, sensors (temperatures, voltages, and fans), and uptime.
It has LEDs for the net monitors and an
on/off button and online timer for PPP.
There is a GUI popup for configuration, plugin extensions
can be installed, and many themes are available.
It also features a client/server monitoring capability.'

case  $SPELL  in
  gkrellm-*)  unset  REQ;
              REQ='gkrellm';  ESTIMATE='7'  ;;
esac

install_gkrellm()  {
  sed  -i  's:/usr/local:/usr:'  Makefile

  make             &&
  prepare_install  &&
  make    install
}

install_plugin()  {
  sed  -i  "s:-O2:$CFLAGS:
            s:/usr/local:/usr:"  Makefile

   PD="/usr/lib/gkrellm2/plugins"
  NLS="enable_nls=1"
  PPD="PLUGIN_DIR=$PD"

  make             $NLS  $PPD  &&
  prepare_install              &&
  mkdir  -p        $PD         &&
  make    install  $NLS  $PPD
}


build() {
  case  $SPELL  in
    gkrellm-*)  install_plugin   ;;
            *)  install_gkrellm  ;;
  esac
}
