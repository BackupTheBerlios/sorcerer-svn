   VERSION=( 0.99.10.0 0.99.9.0 0.99.8.1 0.99.7.1 0.99.7.0 )
    IGNORE='s'
  CATEGORY='security/authentication'
 ATTRIBUTE='library solo'
    SOURCE=( "pub/linux/libs/pam/pre/library/Linux-PAM-$VERSION.tar.bz2"
             "pub/linux/libs/pam/pre/doc/Linux-PAM-$VERSION-docs.tar.bz2" )
  HOMEPAGE='http://www.kernel.org/pub/linux/libs/pam'
       URL="$KERNEL_URL"
       REQ=( ''
             'cracklib::--disable-cracklib:for password checking library'
             'db:--enable-db=db:--enable-db=no:for db support'
             'libprelude::--disable-prelude:for prelude support'
             'libselinux::--disable-selinux:for selinux support' )

# /lib and /lib64 reserved for ELFs required for booting box
# not necessarily ELFs required for login and authentication.
      OPTS='--enable-read-both-confs'

# If the root filesystem can not be mounted
# login must be possible from the initramfs
  case  $HOSTTYPE  in
    x86_64)  OPTS+=' --libdir=/lib64 --enable-securedir=/lib64/security'  ;;
         *)  OPTS+=' --libdir=/lib   --enable-securedir=/lib/security'    ;;
  esac
   PROTECT='/etc/security'
 FRESHMEAT='linux-pam'
  ESTIMATE='2800'
      DESC='Linux-PAM provides a flexibile authentication mechanism.

For additional Linux-PAM modules
that are not provided with Linux-PAM
please see:
http://www.kernel.org/pub/linux/libs/pam/modules.html'


build(){
 adjust_unix_chkpwd(){
  chown root:auth /sbin/unix_chkpwd
  chmod 2755      /sbin/unix_chkpwd
 }

 mkdir    -p /var/empty
 groupadd -K GID_MIN=256 -K GID_MAX=512    auth                    2>/dev/null
 useradd  -K UID_MIN=256 -K UID_MAX=512 -g auth -d /var/empty auth 2>/dev/null

 export HAVE_SGML2LATEX=no
 sed -i 's: doc examples::g' Makefile.in
 default_build &&
 adjust_unix_chkpwd
}


post_install(){
 default_post_install
          get_provider pam_ldap |
 pipe     show_installed        |
 LC_ALL=C sort | uniq -d        |
          pipe_queue $CAST_QUEUE com
}

current(){
 case $VERSION in
  0.99.9.0) [ -g /sbin/unix_chkpwd ] ;;
 esac
}
