   version stable 9.20.1 9.13
   require gcc-g++
  category archive
 attribute console makej
    source $SOURCEFORGE_URL p7zip/p7zip/$VERSION/p7zip_${VERSION}_src_all.tar.bz2
      info last  20110421
      info home http://p7zip.sourceforge.net
     CFLAGS='-O2'
   CXXFLAGS='-O2'
    LDFLAGS='-Wl,-s -Wl,-O1'
      desc 'command line high compression ratio archiver
p7zip provides aproximately 15% better compression than bzip2.
Compression speed is about 400% slower than bzip2.
Decompression speed is about the same as gzip.'

build(){
 make all 7z OPTFLAGS="$CXXFLAGS" &&
 rm -f bin/7za   &&
 make all OPTFLAGS="$CXXFLAGS" &&
 make    install DEST_HOME=$DESTDIR/usr &&
 sed -i "s:$DESTDIR::" $DESTDIR/usr/bin/7z{,a}
}

current(){
 case $VERSION in
  9.13) ! grep -q destdir /usr/bin/7za ;;
 esac
}
