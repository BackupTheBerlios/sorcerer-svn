# to fix ogg and vorbis are really required if compiled in

   version stable 2.60 2.59 2.58a 2.58 2.57 2.49b 2.49 2.48a
#  version beta 2.56-beta 2.56a

# case $VERSION in
#  2.57)
#       opts WITH_BF_FFMPEG=False ;;
# esac

   require MesaLib Python3 SDL ffmpeg libpng libsamplerate openal openexr openssl sqlite tiff tk
  optional openjpeg

#   require Python3  alsa-lib freealut freetype jpeg libvorbis firefox scons
#  optional yasm '' '' for fast x264 encoding
  category graphic/editor video/editor
 attribute new x11
#attribute broke
#conflicts freealut
    source http://download.blender.org/source/blender-$VERSION.tgz
      vurl http://www.blender.org/download/get-blender
      info last  20111019
      info home  http://www.blender.org/
      info docs  http://www.blender.org/education-help/
      desc 'a 3d modeling environement
Blender is a fully integrated 3D graphics creation suite allowing
modeling, animation, rendering, post-production, real-time interactive
3D, and game creation and playback with cross-platform compatibility.'


build(){
 fix_nasm_inc(){
  cd extern/xvidcore/src/
  find . -type d -exec cp -v nasm.inc '{}' \;
  cd ../../..
 }

 case $VERSION in
 2.49b) fix_nasm_inc ;;
 esac

 export  LDFLAGS+=' -lalut'
#scons -Q $OPTS &&
 scons &&
 scons install BF_INSTALLDIR=$DESTDIR/opt/blender
}
