   VERSION=( "2.8.2" "2.8.1" "2.8.0" "2.7.7" "2.7.6" "2.7.3" "2.7.2" "2.7.1" "2.7.0" )
    IGNORE="static\|shared\|s$\|OSX"
  CATEGORY="network/file-share"
 ATTRIBUTE="console x11"
#    SOURCE="mldonkey-$VERSION.tar.bz2"
#       URL="http://savannah.nongnu.org/download/mldonkey/"
#  HOMEPAGE="http://www.nongnu.org/mldonkey/"
     SOURCE="mldonkey/mldonkey-$VERSION.tar.bz2"
        URL="$SOURCEFORGE_URL"
   HOMEPAGE="http://mldonkey.sourceforge.net/Main_Page"
       REQ=( "bzip2 file ocaml"
             "gd::--disable-gd:to generate bandwidth-usage graphic in the web-ui"
             "lablgtk-v1.2::--disable-gui:for a GUI"
             ":--enable-pthread::to enable the use of pthreads" )
  ESTIMATE="810"
      DESC="mldonkey is a multi-network file sharing client.
mldonkey is a Linux client for the eDonkey network,
built from a reverse-engineered version of the protocol.
Now, it is also able to connect to multiple networks
(gnutella, Direct-Connect, Soulseek, etc).
It runs as a daemon, in the background, that can
run, downloading and sharing files, 24 hours a day.
You can interact with your mldonkey daemon, either locally
or remotely, by a telnet interface, a WEB interface or a GTK GUI.
Other GUIs have also been created for mldonkey."

build() {
# export  CFLAGS="$CFLAGS -lpthread"
# export  CXXFLAGS="$CXXFLAGS -lpthread"
# export  LDFLAGS="$LDFLAGS -lpthread"

OCAML=$(  installed_version  $(  get_provider  ocaml  )  )

./configure                 \
--enable-ocamlver=$OCAML    \
--prefix=/usr               \
--sysconfdir=/etc/mldonkey  \
--localstatedir=/var        \
$OPTS                       &&
make    depend              &&
make                        &&
prepare_install             &&
make    install
}
