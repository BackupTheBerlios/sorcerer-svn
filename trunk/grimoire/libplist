# must be multilib-dual

   version stable 1.2
   require cmake gcc-g++ glib libxml2 pkgconfig
  optional Python '' '' for Python bindings
  category audio/library
 attribute library multilib-dual
    source http://cloud.github.com/downloads/JonathanBeck/libplist/libplist-$VERSION.tar.bz2
  homepage http://libimobiledevice.org/
      desc 'library to handle Apple Property List format'

build(){
 default_build &&
 if   [[ $HOSTTYPE == x86_64 ]] &&
    ! [[ $CFLAGS   =~ -m32   ]]; then
  mkdir -pvm 755           $DESTDIR/usr/lib64
  mv    $DESTDIR/usr/lib/* $DESTDIR/usr/lib64
  rmdir $DESTDIR/usr/lib
  sed -i 's:libdir=/usr/lib$:libdir=/usr/lib64:
          s:-L/usr/lib :-L/usr/lib64 :' \
   $DESTDIR/usr/lib64/pkgconfig/libplist{,++}.pc
 fi
}
