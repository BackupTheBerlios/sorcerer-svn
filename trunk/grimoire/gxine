# 0.5.904 wants a pkgconfig for liblircclient0, but there is none.
# broke but still under active development in 2012
# the software author might yet make it work.

with version stable 0.5.907 0.5.906 0.5.905 0.5.904 0.5.903
with base    libXaw xine-lib xulrunner
case $VERSION in
 0.5.907)
with also    --disable-lirc ;;
esac
#     with also --disable-lirc --disable-ffjs --disable-seajs
#     with also --disable-lirc --disable-mozjs --disable-ffjs --disable-seajs

# which does not exist,
# and it can not detect installed
with elect   lirc '' '' for infrared remote control support
with role    video/dvd video/player
with trait   x11
with trait   broke
with source  $SOURCEFORGE_URL xine/gxine/$VERSION/gxine-$VERSION.tar.bz2
with info    omit 20130222
with info    last 20120222
with info    home http://xine.sourceforge.net/
with info    mail 'http://sourceforge.net/mail/?group_id=9655'
with info    cite 'front end to xine, a video player'

build(){
 case $VERSION in
  0.5.907) sed -i 's:#include <glib/gmessages.h>:#include <glib.h>:
                   s:#include <glib/gthread.h>:#include <glib.h>:' \
           src/{main.c,console_output.h,engine.c} ;;
 esac
 default_build
}

build_old(){
(
export JS_CFLAGS="$( pkg-config --cflags mozilla-js )"
export JS_CFLAGS+=" $( pkg-config --cflags libxul-unstable )"
export JS_LIBS="$( pkg-config --libs mozilla-js )"
export JS_LIBS+=" $( pkg-config --libs libxul-unstable )"
default_build
)
}
