# Neither 3.32.0 nor 3.30.3 will compile
# with gtk+ version 2.22.0 because gtkhtml
# requires deprecated functions.

# even 3.91.0 fails to compile

# this really does not want to compile

    stable 3.32.0 3.30.3 3.30.2 3.30.1 3.30.0
  unstable 3.91.0
   require alsa-lib avahi enchant libgnomeui libsoup openssl xcb-util
#  require alsa-lib avahi enchant gail libgnomeui libsoup openssl xcb-util
  optional enchant
  category network/web
 attribute gnome library
 attribute broke
    source $GNOME_URL sources/gtkhtml/${VERSION:0:4}/gtkhtml-$VERSION.tar.bz2
#case $VERSION in
# 3.32.0)
#    source $GNOME_URL sources/gtk+/2.20/gtk+-2.20.1.tar.bz2 ;;
#esac
  homepage http://www.gnome.org
      opts --enable-static=no
# gtkhtml can be compiled without soup, but evolution requires soup.
  estimate 700
      desc 'light weight html rendering/editing library'

build_broke(){
 with_static_gtk(){
  GTK_INST=$PWD/install
  cd gtk+-2.20.1
  ./configure --disable-shared --enable-static \
              --prefix=/usr --enable-introspection=no &&
  make &&
  make install DESTDIR=$GTK_INST &&
  cd .. &&
  LDFLAGS+=" -L$GTK_INST/usr/lib -L$GTK_INST/usr/lib64" &&
  CFLAGS+=" -I$GTK_INST/usr/include" &&
  export CFLAGS LDFLAGS
 }

 case $VERSION in
  3.32.0) with_static_gtk ;;
 esac
 default_build
}
