   inherit kde-v3
   require dbus-qt3 iceauth kdelibs-v3 libXScrnSaver libXcomposite libfontenc libxkbfile libXxf86misc xorg-cf-files
#  require hal dbus-qt3 iceauth kdelibs-v3 libXScrnSaver libXcomposite libfontenc libxkbfile libXxf86misc xorg-cf-files
  optional Linux-PAM     ''                   --with-pam=no        for pluggable authentication
  optional openexr       ''                   ''                   for HDR image file format support
  optional cdparanoia    ''                   ''                   to rip compact disks
  optional cyrus-sasl    ''                   ''                   for secure network authentication
# optional htdig         ''                   ''                   for reading KDE documentation with khelpcenter
  optional kdnssd-avahi  ''                   ''                   for zero conf support
  optional lame          ''                   ''                   to rip compact disks
  optional libusb-compat --with-libusb        --without-libusb     for logiitech mouse support
  optional libraw1394    --with-libraw1394    --without-libraw1394 to enable visualization of ieee1394/firewire
  optional lm_sensors    ''                   ''                   for hardware monitoring and reporting
  optional jdk           --with-java=/opt/jdk --without-java       for java
  optional openldap      ''                   --without-ldap       for lightweight directory access protocol support
  optional samba         ''                   --without-samba      for browsing windows shares
# Without the extra includes, the installer does not find a header file 
# /opt/kde3/include/dbus-1.0/connection.h from dbus-qt3 and does not 
# configure HAL support for storage media:/
      opts --with-extra-includes=/opt/kde3/include/dbus-1.0

  category utility/file-manager utility/terminal-emulator
#            'gift:::for image indexing in the kde control center'
# gift is broken because libtool sucks and
# gift requires an older version of gcc to compile
     wmbin /opt/kde3/bin/startkde
     iwall 'kdm-v3 will soon restart'
      desc 'Base applications that form KDE
kdebase contains the base applications that 
form the core of the K Desktop Environment like 
the window manager, the terminal emulator, the 
control center, the file manager, and the panel.'

build(){
sed -i 's:/var/run/kdm.pid:/var/run/kdm-v3.pid:' kdm/config.def
default_build
}

post_install(){
default_post_install
/opt/kde3/bin/genkdmconf --no-old --no-backup
}
