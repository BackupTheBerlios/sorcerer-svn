# 0.96 gained compile error from moving qt-x11-free to /opt/qt3

   version stable 0.96 0.95 0.92 0.91 0.9
   require qt-x11-free
  category game
 attribute kde3
    source http://www.reto-schoelly.de/mahjongg3d/mahjongg3d-$VERSION.tar.bz2
    source http://www.reto-schoelly.de/mahjongg3d/mahjongg3d-$VERSION-patch2.tar.bz2
  homepage http://www.reto-schoelly.de/mahjongg3d/
      opts --prefix=/opt/kde3 --with-qt-dir=/opt/kde3 --disable-debug --enable-final
      desc 'OpenGL tile matching game
The goal of the game is to remove all tiles on the board
by selecting matching pairs of tiles that have tile 
adjacent on the left or right side.'


build(){

 if   [  -d  patch2 ]
 then cp -av patch2/*  .
 fi

 export    CFLAGS+=" -I/opt/kde3/include"
 export  CXXFLAGS+=" -I/opt/kde3/include"
 export PATH+=:/opt/kde3/bin

#sed -i "s:/mkspecs:/share/qt/mkspecs:" Makefile.doit

 grep -rl '\-O2' *            | xargs -r --max-lines=64 sed -i "s:-O2:$CFLAGS:"
 grep -rl 'openglwidget\.h' * | xargs -r --max-lines=64 sed -i '/openglwidget\.h/d'

 export QTDIR=/opt/kde3

 echo -e "/usr\n/usr/share" |
 ./configure \
 $OPTS &&
 make  &&
 make install PREFIX=$DESTDIR/usr GAMEDATA_PREFIX=$DESTDIR/usr/share/
}
