   VERSION=( "2.0.2" "2.0.1" "2.0" )
      SAFE=( "2.0.2" )
  CATEGORY="documentation"
 ATTRIBUTE="console"
    SOURCE="systems/unix/teTeX/current/distrib/tetex-src-$VERSION.tar.gz"
       REQ=( "awk bison dialog ed ghostscript teTeX-texmf texinfo w3c-libwww"
             "libpng:::for png support"
             "x11::--without-x11:to build xdvi" )
# XFree86 -> Linux-PAM -> teTeX -> teTex,src -> x11
# recursive requirement loop.
# Altered Linux-PAM to no longer optionally require teTeX
     AVOID="Linux-PAM"
  HOMEPAGE="http://tug.org/teTeX"
       URL="ftp://cam.ctan.org/tex-archive
            ftp://dante.ctan.org/tex-archive
            ftp://tug.ctan.org/tex-archive
            ftp://ctan.unsw.edu.au/tex-archive
            ftp://mirror.aarnet.edu.au/pub/tex-archive
            ftp://ftp.univie.ac.at/packages/tex
            ftp://ftp.belnet.be/packages/TeX
            ftp://ctan.cms.math.ca/tex-archive
            ftp://ftp.crc.ca/pub/packages/tex/tex-archive
            ftp://scratchy.emate.ucr.ac.cr/pub/ctan
            ftp://ftp.cstug.cz/pub/tex/CTAN
            ftp://ftp.net.uni-c.dk/mirror/ftp.tex.ac.uk/tex-archive
            ftp://sunsite.dk/pub/tex/ctan
            ftp://ftp.gwdg.de/pub/dante
            ftp://ftp.mpi-sb.mpg.de/pub/tex/mirror/ftp.dante.de
            ftp://ftp.tu-chemnitz.de/pub/tex
            ftp://ftp.uni-augsburg.de/pub/tex/ctan
            ftp://ftp.uni-bielefeld.de/pub/tex
            ftp://ftp.uni-stuttgart.de/tex-archive
            ftp://ftp.ut.ee/tex-archive
            ftp://ftp.funet.fi/pub/TeX/CTAN
            ftp://guinness.domicile.fr/pub/CTAN
            ftp://ftp.jussieu.fr/pub/TeX/CTAN
            ftp://ftp.loria.fr/pub/ctan
            ftp://ftp.oleane.net/pub/mirrors/CTAN/
            ftp://ftp.uvsq.fr/pub/TeX/CTAN
            ftp://ftp.ntua.gr/mirror/ctan
            ftp://ftp.comp.hkbu.edu.hk/pub/TeX/CTAN
            ftp://ftp.sztaki.hu/pub/tex
            ftp://mirror.csa.iisc.ernet.in/tex-archive
            ftp://mirrors.piksi.itb.ac.id/pub/CTAN
            ftp://ftp.heanet.ie/pub/ctan/tex
            ftp://cis.uniRoma2.it/TeX
            ftp://ftp.lab.kdd.co.jp/CTAN
            ftp://ftp.meisei-u.ac.jp/pub/CTAN
            ftp://ftp.riken.go.jp/pub/tex-archive
            ftp://ftp.u-aizu.ac.jp/pub/tex/CTAN
            ftp://mirror.nucba.ac.jp/mirror/TeX
            ftp://sunsite.sut.ac.jp/pub/archives/ctan
            ftp://ftp.kreonet.re.kr/pub/CTAN
            ftp://ftp.ntg.nl/mirror/tex-archive
            ftp://ctan.unik.no/tex-archive
            ftp://sunsite.icm.edu.pl/pub/CTAN
            ftp://ftp.di.uminho.pt/pub/ctan
            ftp://ftp.ist.utl.pt/pub/ctan
            ftp://ftp.chg.ru/pub/TeX/CTAN
            ftp://ftp.radio-msu.net/pub/CTAN/tex-archive
            ftp://tex.ihep.su/pub/TeX/CTAN
            ftp://ftp.nus.edu.sg/pub/docs/TeX
            ftp://sunsite.uakom.sk/pub/mirrors/CTAN
            ftp://archive.sun.ac.za/CTAN
            ftp://ftp.rediris.es/mirror/tex-archive
            ftp://ftp.sunsite.kth.se/pub/tex
            ftp://sunsite.cnlab-switch.ch/ftp/mirror/tex
            ftp://ftp.ccu.edu.tw/pub/tex
            ftp://dongpo.math.ncu.edu.tw/tex-archive
            ftp://ftp.nctu.edu.tw/pub/tex
            ftp://ftp.kmitl.ac.th/pub/tex
            ftp://sunsite.bilkent.edu.tr/pub/tex/ctan
            ftp://sunsite.doc.ic.ac.uk/packages/tex/uk-tex
            ftp://ctan.math.utah.edu/tex-archive
            ftp://ctan.teleglobe.net/CTAN
            ftp://ftp.cise.ufl.edu/pub/mirrors/tex-archive
            ftp://ftp.rge.com/pub/tex
            ftp://ftp.sunsite.utk.edu/pub/CTAN
            ftp://ibiblio.org/pub/packages/TeX
            ftp://indian.cse.msu.edu/pub/mirrors/CTAN
            ftp://jhcloos.com/pub/mirror/tex-archive
            ftp://uiarchive.uiuc.edu/mirrors/ftp/tug.ctan.org/pub/tex-archive"
  EPROVIDE="teTeX,src"
   PROTECT="/usr/share/texmf/ls-R"
  ESTIMATE="4832"
 FRESHMEAT="tetex"
      DESC="teTeX is a TeX distribution that includes web2c, pdfTeX, e-Tex and more...

TeTex is by far, the best TeX distribution available for Linux,
includes latest versions of web2c, pdfTeX, e-TeX, Omega, xdvi,
ps2pk, makeinfo, texinfo, texconfig and lots of fonts and macros."


build()  {
  sed  -i  "s:readlink:readlink-teTeX:"                 Makefile.in
  sed  -i  "s:readlink:readlink-teTeX:g"  texk/kpathsea/Makefile.in
  mv       texk/kpathsea/readlink.c       texk/kpathsea/readlink-teTeX.c
  mv       texk/kpathsea/readlink.man     texk/kpathsea/readlink-teTeX.man

  ./configure  --prefix=/usr            \
               --with-system-zlib       \
               --with-system-pnglib     \
               --with-system-ncurses    \
               --with-system-libwww     \
               --with-system-ncurses    \
               --without-texinfo        \
               --without-dialog         \
               --disable-multiplatform  \
               $OPTS                    &&
  make        all                       &&
  prepare_install                       &&
  make    install
}
