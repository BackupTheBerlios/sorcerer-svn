diff -r -U2 dosfstools-2.10/dosfsck/boot.c dosfstools-2.10/dosfsck/boot.c
--- dosfstools-2.10/dosfsck/boot.c	2003-06-14 13:03:20.000000000 -0700
+++ dosfstools-2.10/dosfsck/boot.c	2003-06-14 13:03:20.000000000 -0700
@@ -325,5 +325,5 @@
 	/* On real MS-DOS, a 16 bit FAT is used whenever there would be too
 	 * much clusers otherwise. */
-	fs->fat_bits = (fs->clusters > MSDOS_FAT12) ? 16 : 12;
+	fs->fat_bits = (fs->clusters > MAX_FAT12) ? 16 : 12;
     }
     else {
diff -r -U2 dosfstools-2.10/mkdosfs/mkdosfs.c dosfstools-2.10/mkdosfs/mkdosfs.c
--- dosfstools-2.10/mkdosfs/mkdosfs.c	2003-06-14 13:07:08.000000000 -0700
+++ dosfstools-2.10/mkdosfs/mkdosfs.c	2003-06-14 13:07:08.000000000 -0700
@@ -1,2 +1,3 @@
+#include <errno.h>
 /*
    Filename:     mkdosfs.c
@@ -52,4 +53,6 @@
 #include <fcntl.h>
 #include <linux/hdreg.h>
+typedef unsigned short  sa_family_t;
+#include <linux/netlink.h>
 #include <linux/fs.h>
 #include <linux/fd.h>
