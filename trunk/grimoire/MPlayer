   [  -z  "$VERSION"  ]  &&
   VERSION=( "1.0pre7try2" "1.0pre7" "1.0pre6a" "1.0pre6" "1.0pre5try2" "1.0pre5" "0.93" )
      SAFE=( "1.0pre7try2" )
#   IGNORE="rc\|pre"
  CATEGORY="video/dvd video/player"
 ATTRIBUTE="x11"
    SOURCE=( "releases/MPlayer-$VERSION.tar.bz2" )
#            "patches/ad_pcm_fix_20050826.diff" )
# Patch already added with 1.0pre7try2?
       URL="http://www1.mplayerhq.hu/MPlayer/
            http://www2.mplayerhq.hu/MPlayer/
            http://ftp3.mplayerhq.hu/MPlayer/
            http://ftp5.mplayerhq.hu/MPlayer/
             ftp://ftp1.mplayerhq.hu/MPlayer/
             ftp://ftp2.mplayerhq.hu/MPlayer/
             ftp://ftp3.mplayerhq.hu/MPlayer/
             ftp://ftp5.mplayerhq.hu/MPlayer/"
  HOMEPAGE="http://www.mplayerhq.hu"
case  $VERSION  in
  1.0pre7try2)  USE_GCC="gcc-v3.4"  ;;
esac
       REQ=( "gtk+-v1.2 libdvdread libpng popt unzip w32codec"
             "MPlayer-Skin:::to install skins for GUI"
             "MPlayer-font:::to install fonts"
             "SDL:--enable-sdl::to use SDL audio/video output"
             "aalib:::for ascii art video output rendering"
             "alsa-lib::--disable-alsa:for alsa sound support"
             "arts::--disable-arts:for sound output through arts"
             "esound::--disable-esd:for sound output through esound"
             "cdparanoia:::for playing/reading audio CDs"
             "freetype::--disable-freetype:for anti-aliased osd/subs support"
             "lame:::to use lame mp3 codec"
             "libdv:::a software codec for digital video camcorders"
             "mad:::for playing mpeg audio formats"
             "svgalib:::for output through svgalib"
             "xmms:--enable-xmms::to build with XMMS input plugin support"
             "lirc:--enable-lirc::to enable LIRC (remote control) support"
             "XviD:::for encoding movies to XviD format"
             "faad2:--enable-external-faad::for aac decoding support" )
      OPTS="--disable-shared-pp --disable-gcc-checking"
 FRESHMEAT="mplayer"
  ESTIMATE="2670"
      DESC="MPlayer is a movie and animation player.
MPlayer is a movie and animation player that supports a wide
range of file formats, including ASF, Quicktime, and Vivo.
It has many MMX/SSE/3Dnow optimized native audio and video
codecs, but allows using XAnim's binary codec plugins, and
Win32 codec DLLs.
It has basic VCD/DVD playback functionality, including DVD
subtitles, but supports many text-based subtitle formats too.
For video output, nearly every existing interface is supported.
It's also able to convert any supported files to raw/divx/mpeg4
AVI (pcm/mp3 audio), and even video grabbing from V4L devices."


install_skin()  {
  BASE=$(  basename  $BUILD_DIR  )
  SKIN="/usr/share/mplayer/Skin/$BASE"
  chmod  a+r  *         &&
  prepare_install       &&
  mkdir  -p      $SKIN  &&
  cp     -Rv  *  $SKIN
}

install_font()  {
  FONT="/usr/share/mplayer/fonts"
  chmod  a+r  *           &&
  prepare_install         &&
  mkdir  -p      $FONT    &&
  cp     -Rv  *  $FONT
}

install_mplayer()  {

  install_conf()  {

    mkdir  -p   doc
    mv     etc  doc
    cd          doc/etc

    sed    -i  "s:include =:# include =:
                s:# vo=:vo=:
                s:# ao=:ao=:"  example.conf

    mkdir  -p  /etc/mplayer

    for  FILE  in  *.conf
    do   install  -m 0644 -o root -g root  $FILE  /etc/mplayer
    done

  }


#  case  $VERSION  in
#   1.0pre7try2)  patch  -p 0  <  $SOURCE_CACHE/MPlayer/$VERSION/${SOURCE[1]##*/}  ;;
#  esac


  unset  CFLAGS  CXXFLAGS

  echo                               |
  ./configure                        \
  --prefix=/usr                      \
  --enable-gui                       \
  --confdir=/etc/mplayer             \
  --enable-menu                      \
  --enable-largefiles                \
  --with-win32libdir=/usr/lib/win32  \
  --with-reallibdir=/usr/lib/win32   \
  --with-xanimlibdir=/usr/lib/win32  \
  --enable-shared-pp                 \
  $OPTS                              &&
  make                               &&
  prepare_install                    &&
  make    install  prefix=/usr       &&
  install_conf

}

set_data()  {
  unset  SAFE  ATTRIBUTE  REQ
  ATTRIBUTE="data"
   ESTIMATE="5"
}

skin_me()  {
  set_data
    SOURCE="Skin/${SPELL:13}-$VERSION.tar.bz2"
   PROVIDE="MPlayer-Skin"
      DESC="$SPELL provides a Skin for MPlayer's GUI."
}

font_me()  {
  set_data
VERSION=( "1.0" )
    SOURCE="releases/fonts/${SPELL:8}.tar.bz2"
  EPROVIDE="MPlayer-font"
      DESC="$SPELL provides a default font for MPlayer's GUI."
}

build()  {
  case  ${SPELL:8}  in
    Skin-*)  install_skin     ;;
    font-*)  install_font     ;;
         *)  install_mplayer  ;;
  esac
}

case  ${SPELL:8}  in
  Skin-*)  skin_me  ;;
  font-*)  font_me  ;;
esac
