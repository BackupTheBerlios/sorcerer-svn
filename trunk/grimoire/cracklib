    stable 2.8.18 2.8.16 2.8.15
  unstable 3.0pre2
   require zlib
  optional cracklib-words '' '' the recommended English word list
  category security/authentication
 attribute console library
    source $SOURCEFORGE_URL cracklib/cracklib/$VERSION/cracklib-$VERSION.tar.gz
  homepage http://sourceforge.net/projects/cracklib
  estimate 400
      desc 'password checking library used with Linux-PAM
This is a next generation version of libcrack password checking library.
Cracklib is a library containing C functions
which may be used in a passwd-like program.
The idea is simple: try to prevent users from
choosing passwords that could be guessed by
crack by filtering them out, at source.'

build(){
 local LIBDIR

 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then LIBDIR=/lib64
 else LIBDIR=/lib
 fi

 LIB_DICT=$LIBDIR/cracklib
 OPTS+=" --with-default-dict=$LIB_DICT/pw_dict --libdir=$LIBDIR"

 words_install(){
  install -vm 755 -d $DESTDIR/$LIB_DICT
  install -vm 644 -D dicts/cracklib-small $DESTDIR/usr/share/dict/cracklib-small
# The following two lines are not working
#  chmod 700 util/cracklib-format
#  PATH="$PWD/util:$PATH" util/create-cracklib-dict $DESTDIR/usr/share/dict/*
 }

 default_build &&
 words_install
}
