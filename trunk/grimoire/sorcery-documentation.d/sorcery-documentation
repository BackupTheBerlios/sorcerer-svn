			2012 Sorcery Documentation


0.	Table of Contents
1.	External Documentation
2.	Sorcery Tools
3.	Catalog of Software
4.	Spells
5.	Installation CD
6.	Installation Program
7.	First Boot: Networking
8.	Set the passwords
9.	User Account
10.	Update
11.	Useful Spells
12.	Advanced Usage
13.	Useful Directories and Files
14.	Staying Informed
15.	FAQ


1.	External Documentation

99.9% of software is provided by the effort
of generous free software authors
that are not affiliated with the Sorcerer project
That is why Sorcerer developers do not write documentation.
We read the documentation written by the software authors.
Below are some useful hyperlinks to documentation
used to develop Sorcerer, spells and the software catalog:

Linux Documentation Project:	http://www.tldp.org/
Filesystem Hierarchy Standard:	http://www.pathname.com/fhs/pub/fhs-2.3.html
LSB specification:		http://www.linux-foundation.org/spec/refspecs/lsb.shtml
				http://www.linux-foundation.org/spec/refspecs/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/book1.html
The POSIX specification:	http://www.unix.org/version3/online.html



2.	Sorcery Tools

The sorcery tools are designed to be intuitive.
Therefore, invoking them with the --help parameter
provides most of their documentation.
The installed sorcery tools are:

/usr/sbin/augur
/usr/sbin/cast
/usr/sbin/dispel
/usr/sbin/leech
/usr/sbin/sorcery

cast    is a tool for software installation
dispel  is a tool for software removal
leech   is a tool for download sources, patches, tarballs
augur   provides a command line update and information  tool
sorcery provides a menu for configuration,
	         a menu for selecting software for   installation,
                 a menu for selecting software for uninstallation

sorcery provides menus for cast and dispel because
sometimes using the menus can be faster and easier
than invoking the augur, cast, and dispel tools.

augur, dispel, and leech are automatically invoked by
augur and sorcery.
The SA will probably never want to invoke cast dispel and leech.
cast dispel and leech accept no command line parameters
and are not interactive.

augur's help screen displays when augur was invoked without parameters.
For detailed information about a specific command line parameter
then invoke augur with the help parameter followed by
the specific augur command line parameter.
Example:
# augur help log

augur and sorcery should only be invoked by an account
with effective user identity 0, which should be root.

3.	Catalog of Software

The catalog of software which
is available for immediate installation
is called the grimoire.
Grimoire is a word with the meaning "book written in Latin."
Fortunately, the Sorcerer grimoire
is actually plain English text with BASH shell syntax.

The filename for the grimoire is:
/usr/share/sorcery/grimoire.tar

Once it is expanded and merged with other available grimoires
it resides as many spell files and directories in 
/root/.sorcery/grimoire/


4.	Spells

Spells contain instructions for
downloading, compiling, and installing
software projects are contained in spells.
Spells are bash script fragments.
The grimoire is a book of spells.
Anyone with simple BASH scripting skills
can write a spell by copying and editing
a similar existing spell.

All spells have a similar format with many optional components.
The easiest way to make a new spell is to copy and edit
an existing spell that is similar to the new spell.
Spells are bash script fragments that and can easily
be edited with any text editor such as "nano."

Because spells are "programs" rather than static data files;
fewer limitations exist concerning what spells can accomplish.
Therefore, the best way to learn how to craft spells
is by looking at other spells and by reading
the bash manual page which can be invoked with:
$ man bash



5.	Installation CD

Installation requires an Install CD that matches
the hardware architecture of the box that being installed.
The IA32 Install/Rescue CD can be installed on both ia32
and x86_64 boxes, while the x86_64 Install/Rescue CD
will only install onto x86_64 boxes.

http://sorcerer.silverice.org/download/iso9660/2008/

Only download the .7z compressed image if you have p7zip
or 7zip compression program to decompress it before burning
the image to CD.

The Install/Rescue images are already bootable CD images
ready to be burned directly onto a CD instead of being
added to another iso9660 filesystem and burned onto a CD.

Writing a CD with linux is easy.
Writing a CD with other opreating systems requires 
additional software not normally provided with the operating system.
Also adding the extention of .iso to the filename
may be required for other operating systems to properly recognize
the file is an iso9660 ready to be written.

If the CD fails to boot check first
that BIOS/CMOS parameters permit booting from CDROM.
If it still does not boot try using a different program
to write the image file to CD.
If the contents of the CD appears to be the filename
then it wrote the image as a file within an iso9660 filesystem
instead of writing the image directly to the CD.
If the image file is written as a file on a CD
then the CD will not be bootable and will be useless for installation.
 

6.	Installation Program

Most SAs will prefer to type the precise commands required for
partitioning, making volumes, and creating filesystems.
However, there is a menu driven alternative.
After booting and logging in as root execute:
sinstall

Make some files systems,
copy some programs,
compile a few sources,
umount filesystems
and installation is complete.


7.	First Boot: Networking

Unfortunately, the most difficult aspect
of deploying a box is network configuration.
login as root and execute:

cd /etc/networks.d/
less templates/README

A few potentially useful templates are provided.
But at least one must be copied to /etc/networks.d/
and then properly edited and tested.
Once that is complete networking can be started by executing:
/etc/init.d/networks start

On subsequent boots networking starts automatically.


8.	Set passwords

Now before doing anything else change the root password by executing:
su -

Now edit /etc/extlinux/head
and change the password required for allowing parameters
to be passed to the kernel at boot time.
Now execute extlinux to save it:
extlinux

If the box does not already have a BIOS/CMOS password set
in order to prevent it from booting from CDROM and floppy
then issue:
shutdown -r now
And before booting the operating system,
enter the BIOS CMOS configuration program
and properly secure the box.


9.	User Account

Only during installation should one login as root.
For normal operation create a user account execute:
adduser
From now on login using your user account
In order to do administrative tasks execute:
su -
Enter the root password and become root.
Then, to return to being the user account execute:
exit


10.	Update

New administrators will execute:
augur sync

in order to complete the first update of the box.
After the box is updated the feel free to begin
installing new software using cast and sorcery.


11.	Useful Spells

Most, spells do software installation.
Some of them do more.
Here are some useful starting spells
that can be executed as parameters to cast:

xorg			to install an Xorg Xserver

gnome			to install a Gnome desktop environment

kde			to install a K desktop environment
			The kde spell offers a select of both or either
			of the kde versions 3.x and 4.x

etc			for menu driven editing of files in /etc

Both augur and sorcery provide useful methods for
discovering spells that can be installed.
Since there are over 3000 spells in an official Sorcerer grimoire
they will not be listed here.


12.	Advanced Usage

Below is an example Question and Answer

Q. How can I find out what web servers are available?
A.

# augur category | grep web
network/web
video/webcam

# ( augur category network/web
    augur attribute server ) | sort | uniq -d


As demonstrated a tool such as augur
provides simple answers to simple questions.
However, when combined using coreutils and BASH syntax
more complex questions can be answered.


Q. How can I tell what web servers are installed?
A.

# ( ( augur category network/web
      augur attribute server ) | sort | uniq -d
    augur installed
  ) | sort | uniq -d


Basically, the power of the sorcery tools
grows proportionally with the system administrator skill.
Novice SAs will probably prefer the menu driven sorcery tool at first.
However, eventually, the menu driven tool is only used
for sorcery configuration and for mass software removal.


13.	Useful Directories and Files

The sorcery tools use directories that
every Sorcerer SA gains awareness of eventually.

/etc/sorcery/				Permanent storage for sorcery data
/etc/sorcery/local.config		Modifiable configuration file
/etc/sorcery/log/			Logs sorcery uses for tracking

/root/.sorcery/				tmpfs containing generated data
/var/log/sorcery/queue/cast/		The cast queue
/var/log/sorcery/queue/dispel/		The dispel queue
/var/log/sorcery/queue/leech/		The leech queue
/root/.sorcery/grimoire/		The untarred merged grimorie
/root/.sorcery/index			The grimoire index
/root/.sorcery/index.d/arof		The all    requirements of index
/root/.sorcery/index.d/aarof		The entire requirements of index


/usr/share/sorcery/			Grimoire Directory
/usr/share/sorcery/grimoire.tar		Sorcerer Grimoire
/usr/share/sorcery/local/		Local grimoire directory

/usr/src/sorcery/			Where sources are compiled
/tmp/.sorcery/				/usr/src/sorcery maybe bound here

/var/tmp/leech/				Where source tarballs download
/var/tmp/failed/			Where failed compilations go

/var/cache/archive/			Tarball archives of installed software
/var/cache/backup/			Tarball backups of main filesystem
/var/cache/ccache/			Tarballs of reusable compiled objects
/var/cache/sources/			Tarballs of downloaded sources


Other directories and files that sorcery uses
are listed in /etc/sorcery/config
which is the non-editable configuration file for sorcery.


14. Staying Informed

Changes, important information, and updates
are announced on the Sorcerer email list
The low volume email list often goes a week without a post.

https://lists.berlios.de/mailman/listinfo/sorcerer-admins

There infrequently updated wiki page is at:

http://developer.berlios.de/projects/sorcerer


15.	FAQ

Q	RPM?
A	No.

Q	DPKG?
A	No.

Q	Distribution specific version
	appended to software author's version?
A	No.

Q	Linux kernel configuration menu during installation?
A	No.

Q	Linux kernel configuration menu?
A	Not if using linux-modular.
	However, traditional deployment with a custom configured
	linux kernel is still possible.

Q	Plug 'n Pray
A	Yes.

Q	Modular Kernel?
A	Yes.

Q	udev?
A	Yes

Q	Precompiled softare?
A	No, however Apache_OpenOffice and some
        vendor provided video driver
	are provided as pre-compiled software.

Q	Expensive?
A	No, free.
	Why should a distribution charge you for using software
	that other people write and provide for free?

Q	Yearly reinstallations?
A	No. Install once, update continuously.
	However, a new Install/Rescue disk should be downloaded
	and written to CD yearly incase it is required to rescue
	a deployed box.

Q	For updates software patches downloaded instead of full sources?
A	Yes.

Q	Accelerated compilation during updates and rebuilds?
A	Yes.

Q	Archives of installed software for quick repair and regression?
A	Yes.

Q	Japanese language support?
A	Yes.  はい　できますよ

Q	Installed software maintained at current stable releases?
A	Yes.

Q	Easy to add custom and additional software to a deployed box?
A	Yes, as easy as writing spells.

Q	This is the original Sorcerer created by Kyle Sallee?
A	Yes this is the "real Sallee" and not a fork.

Q	Better than a fork?
A	The forks are copies of an alpha quality sorcery
	and technology that is no longer used.
	The forkers were people who did not want to listen
	and who did not want to cooperate.
	They wanted to lead a distribution
	that they did not create and barely understand.

Q	You listen to SAs?
A	Exactly.  The modern Sorcerer distribution
	is a great distribution not because of it's creator's effort.
	but because the creator listens to the feedback and
	recommendations of fellow SAs to create a distribution
	that all Sorcerer SAs enjoy.
	Sorcerer development from 2005+ has been entirely about 
	giving SAs what they want.
