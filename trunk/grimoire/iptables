   VERSION=( 1.4.0 1.3.8 1.3.7 1.3.6 1.3.5 1.3.4 1.3.3 1.3.2 1.3.1 1.3.0 )
    IGNORE='rc'
  CATEGORY='network security'
 ATTRIBUTE='console'
    SOURCE="iptables-$VERSION.tar.bz2"
       URL='ftp://ftp.netfilter.org/pub/iptables/'
#      URL='http://netfilter.samba.org/files/'
  HOMEPAGE='http://netfilter.samba.org/'
       REQ='init-functions'
      OPTS='--enable-static=no'
  ESTIMATE='300'
      DESC='iptables enables the creation of packet alteration and firwall rules.
iptables is built on top of netfilter,
the new packet alteration framework for Linux 2.4.
It is an enhancement on ipchains, and is used
to control packet filtering, Network Address
Translation (masquerading, portforwarding,
transparent proxying), and special effects.'

build(){
 install_devel(){
  ar rc  iptables.a *.o      &&
  ranlib iptables.a          &&
  cp iptables.a /usr/$LIBDIR &&
  cp -r include/* /usr/include
 }

 LIBDIR=/lib
 case $HOSTTYPE in
  x86_64) LIBDIR+=64 ;;
 esac

 sed -i "s/-O2/$CFLAGS/" Makefile

 sed -i 's:/usr/local/lib/iptables:$LIBDIR/iptables:' \
     include/xtables.h libiptc/libiptc.c

 make    LIBDIR=$LIBDIR &&
 prepare_install        &&
         install_devel  &&
 make    install  \
         install-devel \
          LIBDIR=$LIBDIR \
          BINDIR=/sbin \
          MANDIR=/usr/man \
          INCDIR=/usr/include
}

current(){
 case $VERSION in
  1.4.0) [ -f /sbin/iptables ] ;;
 esac
}
