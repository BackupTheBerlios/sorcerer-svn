# 3.72 has build errors
# 3.71 has build errors
# 3.70 has build errors
# 3.73 not tested
# 3.83 not tested
# 3.84 not tested
# 4.02 failed compilation

   version stable 4.04 4.03 4.01
#  version pre 4.10-pre14
   require nasm perl
  optional mtools '' '' for creating msdos filesystems
  category administration/bootloader
 attribute console makej
    source $KERNEL_URL pub/linux/utils/boot/syslinux/syslinux-$VERSION.tar.bz2
      info last  20110613
      info home  http://syslinux.zytor.com/wiki/index.php/The_Syslinux_Project
      desc 'bootloader for Linux that works on FAT and ISO9660 filesystems'

build(){
 install_menu(){
  mkdir -pvm 700 $DESTDIR/boot/extlinux
  cp     -av     $DESTDIR/{usr/share/syslinux/*menu.c32,boot/extlinux/}
 }

 case $VERSION in
  4.*) unset LDFLAGS ;;
 esac

 sed -i '/INSTALL_AUX_OPT/d
         s:win32/syslinux.exe::' Makefile

 make &&
 make install INSTALLROOT=$DESTDIR DESTDIR=$DESTDIR &&
 install_menu
}

current(){
 case $VERSION in
  4.04) [ -f /boot/extlinux/menu.c32 ] ;;
 esac
}
