   version stable 4.04 4.03 4.01
   version pre 4.10-pre15 4.10-pre14
   require nasm md5crypt perl
  optional mtools '' '' for creating msdos filesystems
  category administration/bootloader
 attribute console makej
    source $KERNEL_URL pub/linux/utils/boot/syslinux/syslinux-$VERSION.tar.bz2
      info last  20110613
      info home  http://syslinux.zytor.com/wiki/index.php/The_Syslinux_Project
   protect /etc/extlinux/head
   protect /etc/extlinux/tail
  volatile /boot/extlinux/extlinux.conf
      desc 'bootloader for Linux and other operating systems
syslinux works on FAT
isolinux, also provided by isolinux, works on ISO9660 file systems.
extlinux, works on ext2, ext3, and ext4 file systems.

If booting using extlinux
then please use ms-sys
to install a bootable MBR.'

build(){
 install_menu(){
  mkdir -pvm 700 $DESTDIR/boot/extlinux
  cp     -av     $DESTDIR/{usr/share/syslinux/*menu.c32,boot/extlinux/}
 }

 configs_install(){
  mkdir   -pvm 700 $DESTDIR/{boot,etc/extlinux,usr/sbin}
  install  -vm 600 $SCRIPT_DIR/head     $DESTDIR/etc/extlinux/
  install  -vm 600 $SCRIPT_DIR/tail     $DESTDIR/etc/extlinux/
  install  -vm 700 $SCRIPT_DIR/extlinux $DESTDIR/usr/sbin/
 }

 case $VERSION in
  4.*) unset LDFLAGS ;;
 esac

 sed -i '/INSTALL_AUX_OPT/d
         s:win32/syslinux.exe::' Makefile

 rm -f diag/geodsp/mk-lba-img
 make &&
 make install INSTALLROOT=$DESTDIR DESTDIR=$DESTDIR &&
 install_menu &&
 configs_install
}

current(){
 case $VERSION in
  4.04) [ -f /boot/extlinux/menu.c32 ] &&
        [ -f /etc/extlinux/head      ] &&
        grep -q INCLUDE /etc/extlinux/head ;;
 esac
}
