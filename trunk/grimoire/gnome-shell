# requirement on caribou speculative

   version   stable 3.4.1 3.4.0 3.2.2.1 3.2.1 3.2.0
   version unstable 3.4.1 3.4.0 3.3.92 3.3.90
   require NetworkManager evolution-data-server folks gcr gjs gnome-bluetooth gnome-menus mutter pulseaudio systemd telepathy-logger
      opts --without-ca-certificates
#     opts --with-ca-certificates=/etc/ssl/certs/ca-certificates.crt
  category utility utility/terminal-emulator
 attribute gnome optimize
    source $GNOME_URL sources/gnome-shell/${VERSION:0:3}/gnome-shell-$VERSION.tar.xz
      info last 20120419
      info home http://www.gnome.org
      desc 'core user interface functions for the GNOME 3 desktop,
like switching to windows and launching applications.
GNOME Shell takes advantage of the capabilities of
modern graphics hardware and introduces
innovative user interface concepts
to provide a visually attractive and easy to use experience.'

build(){
 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 if  [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]; then
  if [ -d /usr/lib64/nvidia ]; then export LDFLAGS+=" -Wl,-rpath,/usr/lib64/nvidia"; fi
  if [ -d /usr/lib64/ati    ]; then export LDFLAGS+=" -Wl,-rpath,/usr/lib64/ati"; fi
 else
  if [ -d /usr/lib/nvidia ]; then export LDFLAGS+=" -Wl,-rpath,/usr/lib/nvidia"; fi
  if [ -d /usr/lib/ati    ]; then export LDFLAGS+=" -Wl,-rpath,/usr/lib/ati"; fi
 fi

 case $VERSION in
  3.2.2.1) sed -i 's:-Werror::' configure ;;
 esac
 default_build
}
