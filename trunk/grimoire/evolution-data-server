# openldap support required for communicating with exchange servers
# 2.32.0 failed compilation
# during ia32 multilib compilation:
# checking for iconv in -liconv... no
# checking for iconv... yes
# checking for gnu_get_libc_version... yes
# checking if iconv() handles UTF-8... no
# configure: error: You need to install a working iconv implementation, such as ftp://ftp.gnu.org/pub/gnu/libiconv

# evolution-data-server might be doing something incorrect to test.

# version 3.0.2 failed compilation
# version 3.2.0 failed compilation
# version 3.1.92 failed compilation.
# version 3.2.0 is refusing to compile multilib
# version 3.4.0 failed to compile
# version 3.8.1 failed to compile

with info    last 20131210
with version   stable 3.10.3 3.10.2 3.10.1
with version unstable 3.11.2
case $VERSION in
 3.10.*)
with also    --disable-uoa ;;
 3.9.*)
with also    --disable-uoa ;;
 3.8.*)
with also    --disable-uoa ;;
 3.4.0)
with also    --enable-introspection=no ;;
esac
with base    gcr gnome-online-accounts libgdata libgweather libical nss nspr vala
# vala-bindings required by folks
with also    --with-openldap=yes --disable-gtk-doc --enable-vala-bindings
#with elect   gtk-doc --enable-gtk-doc --disable-gtk-doc
with role    network/email
with trait   gnome library makej multilib-concurrent
with source    stable $GNOME_URL sources/evolution-data-server/${VERSION:0:4}/evolution-data-server-$VERSION.tar.xz
with source  unstable $GNOME_URL sources/evolution-data-server/${VERSION:0:4}/evolution-data-server-$VERSION.tar.xz
with info    home http://gnome.org/projects/evolution/stable.shtml
with info    cite 'libraries needed by evolution'

build(){

# hardcode_into_libs is required in order to compile evolution-data-server version 3.4.0
# sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 sed -i 's:-L$libdb_prefix/lib::' configure
 default_build
}
