# openldap support required for communicating with exchange servers

    stable 2.24.1 2.24.0 2.22.3 2.22.2 2.22.1.1 2.22.1 2.22.0
  unstable 2.23.92 2.23.91 2.23.90.1 2.23.6 2.23.5
   require intltool libgnomeui libsoup openldap
  optional mozilla '' '' for mozilla-nss
  category network/email
 attribute gnome library
       url $GNOME_URL
    source sources/evolution-data-server/${VERSION:0:4}/evolution-data-server-$VERSION.tar.bz2
  homepage http://gnome.org/projects/evolution/stable.shtml
      opts --with-openldap=yes
  estimate 8000
      desc 'evolution-data-server provides libraries needed by evolution'

build(){
# export LDFLAGS+=' -Wl,-rpath,/usr/lib/mozilla -Wl,-rpath-link,/usr/lib/mozilla'
# export LDFLAGS+=" -Wl,-rpath,/usr/lib/firefox-devel-$FV/sdk/lib -Wl,-rpath-link,/usr/lib/firefox-devel-$FV/sdk/lib"

local FV
FV="$( installed_version firefox )"
if   [ $FV ]
then OPTS+=" --with-nss-libs=/usr/lib/firefox-devel-$FV/sdk/lib"
else OPTS+=" --with-nss-libs=/usr/lib/mozilla"
fi
default_build
}
