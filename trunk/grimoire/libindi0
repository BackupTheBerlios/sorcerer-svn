# uses cmake
   version stable 61 0.6
 conflicts indilib
#  require cfitsio libnova libusb-compat zlib
   require cfitsio cmake gcc-g++ libnova zlib
      opts --enable-static=no
  category science/astronomy
 attribute library makej
case $VERSION in
 61)
    source $SOURCEFORGE_URL indi/indilib/0.6/libindi0_61.tar.gz ;;
  *)
    source $SOURCEFORGE_URL indi/indilib/$VERSION/libindi0_$VERSION.tar.gz ;;
esac
  homepage http://www.indilib.org/
  estimate 300
      desc 'a protocol library for operating astronomical instrumentation'

build(){
 default_build &&
 sed -i 's:-L/usr/lib::' $DESTDIR/usr/lib/pkgconfig/*.pc &&
 if    [[ $HOSTTYPE == x86_64   ]]; then
  if   [[ $CFLAGS   =~ -m32     ]]; then mv $DESTDIR/usr/lib{,32}
                                    else mv $DESTDIR/usr/lib{,64}
    if [[ -d $DESTDIR/usr/lib32 ]]; then mv $DESTDIR/usr/lib{32,}; fi
  fi
 fi
}
