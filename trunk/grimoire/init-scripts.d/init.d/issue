#!/bin/bash

### BEGIN INIT INFO
# Default-Mode: 500
# Required-Start: $local_fs
# Default-Start: S
# Short-Description: generates file system specific issue files for agetty
### END INIT INFO

. /lib/lsb/init-functions

only start

start(){
 log_warning_msg "/media/root/*/etc/issue verifying"

 for d in /media/root/*; do
  n="${d##*/}"
  i="$d/etc/issue"
    if ! [ -d "$d/etc" ]; then continue
  elif ! [ -f "$i"     ] || ! grep -q "$n" "$i" 
  then
   log_warning_msg "$i updating"; echo "$n file system login" >> "$i"
   log_success_msg "$i updated"
  fi
 done
}
