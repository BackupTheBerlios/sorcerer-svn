#!/bin/bash

### BEGIN INIT INFO
# Provides: localtime
# Required-Start:
# Should-Start: udev
# Required-Stop:  $local_fs
# Default-Start: S
# Default-Stop: 0 6
# Short-Description: Sets and saves the system clock by the hardware clock.
# Description: Sets and saves the system clock by the hardware clock.
### END INIT INFO

. /lib/lsb/init-functions

start()  {
  if   log_warning_msg 'System time from hardware clock setting'; /sbin/hwclock --hctosys --utc
  then log_success_msg 'System time set'
  else log_failure_msg 'System time not set'
  fi
}

stop()   {
  if   log_warning_msg 'Hardware clock from system time setting'; /sbin/hwclock --systohc --utc
  then log_success_msg 'Hardware clock set'
  else log_failure_msg 'Hardware clock not set'
  fi
}

help()   {  echo "Usage: $0 {start}" 1>&2;    }

case  $1  in
        start)  start  ;;
         stop)  stop   ;;
  try-restart)  :      ;;
            *)  help   ;;
esac
