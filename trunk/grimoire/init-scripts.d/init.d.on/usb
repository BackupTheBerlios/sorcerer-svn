#!/bin/bash

### BEGIN INIT INFO
# Provides: usb
# Required-Start: $local_fs
# Should-Start: proc udev
# Required-Stop: 
# Default-Start: 1 2 3 4 5
# Default-Stop:
# Short-Description: usb mounts usbfs on /proc/bus/usb
# Description: usb mounts usbfs on /proc/bus/usb
### END INIT INFO

. /lib/lsb/init-functions


start()  {
  run()  {
    [      -d               /proc/bus/usb  ]  &&
    mount  -t usbfs  usbfs  /proc/bus/usb
  }

  if    ! sed   's/#.*//'   /etc/fstab  |
          grep  -q          /proc/bus/usb;  then
    if    log_warning_msg  '/proc/bus/usb mounting';  run
    then  log_success_msg  '/proc/bus/usb mounted'
    else  log_failure_msg  '/proc/bus/usb not mounted'
    fi
  fi
}

help()  {  echo "Usage: $0 {start}" 1>&2;  }

case  $1  in
        start)  start  ;;
  try-restart)  :      ;;
            *)  help   ;;
esac
