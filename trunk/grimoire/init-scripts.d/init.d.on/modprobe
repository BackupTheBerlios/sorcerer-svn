#!/bin/dash

### BEGIN INIT INFO
# Required-Start: proc sys modprobe-r udev
# Default-Start: S
# Short-Description: modprobe loads modules during boot
### END INIT INFO

if [ "$1" = try-restart ] || ! [ -f /etc/modules ] || ! [ -x /sbin/modprobe ]
then exit
fi

. /lib/lsb/init-functions

mp(){
 sed 's:#.*::;/^ *$/d' /etc/modules |
 while read REPLY; do modprobe $REPLY; done
}

log_warning_msg 'Modules loading'; mp
log_success_msg 'Modules loaded'
