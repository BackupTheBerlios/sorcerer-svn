# jpeg v6b is available for download as of 20090826, thus reverting to 6b (Jan)
#
# jpeg version 7 released on 20090627 has bugs that are
# evident when using gqview.
# Maybe bugs in gqview are exposed by jpeg version 7
# However, I am not taking that chance.
# I am reverting jpeg to 6b
# Sorry for the inconvenience.
# Bummer, version 6b source is no longer hosted by the original author.
# Looks as if we will have to endure until bug fixes become avaialble.

    latest 6b
    stable 6b
      opts --enable-static=no
    CFLAGS='-O3'
   LDFLAGS='-Wl,-O1'
  category graphic/library
 attribute library
       url 'ftp://ftp.uu.net/graphics/jpeg/
            http://www.ijg.org/files/'
    source jpegsrc.v$VERSION.tar.gz
  homepage http://www.ijg.org/
 freshmeat libjpeg
  estimate 200
      desc 'library that supports the JPEG image format
jpeg supplies support functions for the image
format JPEG, to programs that are linked to it.'

build(){
 install_extra_headers(){
  for FILE in jinclude.h jpegint.h
  do  install -m 644 $FILE /usr/include
  done
 }

# case $HOSTTYPE in
#  x86_64) sed -i '179i  | x86-* | x86_64-* \\'            config.sub
#          sed -i 's:i\[34567\]86):i\[34567\]86|x86_64):'  config.sub ;;
# esac


 ./configure     \
 --prefix=/usr   \
 --enable-shared \
 $OPTS           &&
 make            &&
 prepare_install &&
 make    install &&
         install_extra_headers
}
