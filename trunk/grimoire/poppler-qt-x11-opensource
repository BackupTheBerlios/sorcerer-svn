   inherit poppler
   require qt-everywhere-opensource
      opts -DENABLE_XPDF_HEADERS:BOOL=TRUE
      opts -DWITH_GObjectIntrospection:BOOL=OFF
# -DENABLE_XPDF_HEADERS:BOOL=TRUE installs unsupported xpdf headers (needed by calibre)
 attribute library makej
#attribute multilib-dual
      desc 'PDF rendering library with qt-everywhere-opensource support'

build(){ (
 if    [[ $HOSTTYPE == x86_64 ]]; then
  if   [[ $CFLAGS   =~ -m32   ]]
  then  export LDFLAGS+=' -Wl,-rpath,/opt/32bit/usr/lib'
        export PATH="/opt/32bit/usr/bin:$PATH"
        export opts -DCMAKE_INSTALL_PREFIX:PATH=/opt/32bit/usr
  else  export LDFLAGS+=' -Wl,-rpath,/usr/lib64'
        export opts -DCMAKE_INSTALL_PREFIX:PATH=/usr
  fi
 else   export LDFLAGS+=' -Wl,-rpath,/usr/lib'
        export opts -DCMAKE_INSTALL_PREFIX:PATH=/usr
 fi
 default_build
) }
