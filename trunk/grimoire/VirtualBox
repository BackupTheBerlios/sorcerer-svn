# still working on init scripts and installation method.
# It does not compile.
# http://www.virtualbox.org/wiki/Linux%20build%20instructions

   version stable 4.0.6 4.0.4 4.0.2
   require Dev86 Python SDL acpica makeself pulseaudio
#  require Dev86 Python SDL acpica hal pulseaudio
  optional curl
      opts --disable-qt4
  category development/emulator
# It compiles with a super high load.
 attribute solo x11
 attribute broke
    source http://download.virtualbox.org/virtualbox/$VERSION/VirtualBox-$VERSION.tar.bz2
      vurl http://www.virtualbox.org/wiki/Downloads/
      info last  20110421
      info home  http://www.virtualbox.org/
      info docs  http://www.virtualbox.org/wiki/Documentation
      desc 'a computer emulator'

build(){
 case $VERSION in
  4.0.2) sed -i 's:LIBX11=.*:LIBX11="-lXext -lX11":' configure
         opts --disable-xpcom ;;
 esac

 ./configure --disable-hardening $OPTS &&
 . ./env.sh      &&
 kmk         all &&
 cd out/linux.x86/release/bin/src &&
 make    install "DESTDIR=$DESTDIR" &&
 cd      ../../ &&
 mkdir -p   $DESTDIR/opt &&
 cp -av bin $DESTDIR/opt/VirtualBox
}
