# removing library trait until something else links with it's ELF library.

with version stable 3.2.8
with base    ncurses
# requiring init-functions creates a recursive requirement loop
#with base    init-functions ncurses
# libselinux
with role    utility
with trait   console library lto makej multilib-fail solo
#trait library
with source  http://procps.sourceforge.net/procps-$VERSION.tar.gz
with info    good 20120630
with info    home http://procps.sourceforge.net/
with protect /bin/kill
with protect /bin/pgrep
with protect /bin/ps
with info    cite 'utilities to report the state of the box
procps is a package of utilities which reports on the state of the system,
including the states of running processes, amount of memory available and
currently logged in users.'

build(){
 mv_to_bin(){
  mkdir -pvm 755 $DESTDIR/bin
  mv     -v      $DESTDIR/{usr/bin/{pgrep,pkill,top},bin/}
 }

 LD='-Wl,-warn-common'
 sed -i "s:-O2 -g3:$CFLAGS:
         s:$LD:$LD $LDFLAGS:" Makefile
 make &&
 make install -e XSCPT='' DESTDIR=$DESTDIR ldconfig=echo &&
 mv_to_bin
}

current(){
 case $VERSION in
  3.2.8) [ -f /bin/pgrep ] ;;
 esac
}
