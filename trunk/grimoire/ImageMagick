# 6.7.3-10 does not link properly.

   version   stable 6.7.5-10 6.7.4-10 6.7.2-10 6.7.1-10 6.7.0-10
   version unstable 6.7.3-10
case $VERSION in
 6.7.3-10) # tries to use the wrong 32-bit lcms2 library during 64-bit linking
      opts --without-lcms2 --without-lcms ;;
esac
   require bzip2 fftw freetype gtk+ libmng libxml2 tiff xz
#  require bzip2 fftw freetype gtk+ libmng libpng libxml2 tiff xz
  optional djvulibre              ''       ''             for djvulibre document format support
# optional graphviz               ''       ''             for drawing graphs
  optional ilmbase
  optional jasper                 ''       ''             for jpeg-2000 support
  optional lcms
  optional libXt                  --with-x --without-x    for x11 programs animate, display, and import
  optional libgsf                 ''       ''             for gnome structured file library support
  optional librsvg                ''       --without-rsvg for SVG vector-graphic files support
  optional libwmf                 ''       --without-wmf  for reading Microsoft WMF format
  optional openexr                ''       ''             for the HDR image file format support
  optional perl--ExtUtils-ParseXS ''       --without-perl to make PerlMagick
      opts --enable-shared --enable-static=no --with-modules --enable-ltdl-install=no
  category printer
 attribute console library makej multilib-dual x11
    source  ftp://ftp.imagemagick.org/pub/ImageMagick/ \
            ftp://ftp.imagemagick.net/pub/ImageMagick/ \
            ftp://ftp.nluug.nl/pub/ImageMagick/ \
            ftp://gd.tuwien.ac.at/pub/graphics/ImageMagick/ \
            ftp://ftp.sunet.se/pub/multimedia/graphics/ImageMagick/ \
            ftp://ftp.fu-berlin.de/unix/X11/graphics/ImageMagick/ \
            ftp://zoffy.asahi-net.or.jp/pub/graphics/ImageMagick/ \
            ftp://ftp.u-aizu.ac.jp/pub/graphics/image/ImageMagick/imagemagick.org/ \
            ftp://ftp.eos.hokudai.ac.jp/pub/graphics/ImageMagick/ \
            ftp://giswitch.sggw.waw.pl/pub/graphics/ImageMagick/ \
            ftp://ftp.fifi.org/pub/ImageMagick/ \
            ftp://ftp.rge.com/pub/multimedia/imagemagick/ \
            ImageMagick-$VERSION.tar.xz
      info vurl ftp://ftp.imagemagick.org/pub/ImageMagick/
      info home http://www.imagemagick.org
      info last 20120311
# version 6.3.6-5
# may have gained an optional on libwmf
# Has an optional requirement on graphviz, but not clear why.
# what's the dot coder?
# Can create maybe a test program that links with gtk+
# but no part of the installed ImageMagick is linked with gtk+
# Therefore, gtk+ is not an optional requirement for ImageMagick
 freshmeat imagemagick
      desc 'automated and interactive maniupation of images
It supports the display and interactive manipulation 
of images when used with the X Window System.'

build(){
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then export LDFLAGS=' -L/usr/lib64'
 fi
 default_build
}
