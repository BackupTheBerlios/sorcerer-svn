# It attempts to compile using the WRONG gif

# using older versions because newer versions do not compile
# requires gcc with objc support

with version stable 0.22.0 0.16.0 0.18.0
case $VERSION in
 0.22.0)
with also    --disable-libgif --disable-ungif
with base    giflib-v4 ;;
esac
with base    audiofile giflib gnustep-base heimdal libpng tiff
with elect   aspell
with elect   cups
with elect   portaudio
with also    --with-layout=fhs
with role    development
with trait   console
with trait   broke
with source  http://ftpmain.gnustep.org/pub/gnustep/core/gnustep-gui-$VERSION.tar.gz
with info    home http://www.gnustep.org
with info    cite 'GUI interface class library for gnustep'

build(){
 giflib_fix(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then GIFLIBLIBDIR=/opt/giflib/4/usr/lib64
  else GIFLIBLIBDIR=/opt/giflib/4/usr/lib
  fi
  export   CFLAGS+=" -I/opt/giflib/4/usr/include"
  export CXXFLAGS+=" -I/opt/giflib/4/usr/include"
  export  LDFLAGS+=" -L$GIFLIBLIBDIR -Wl,-rpath,$GIFLIBLIBDIR"
  export PKG_CONFIG_PATH="$GIFLIBLIBDIR/pkgconfig:$PKG_CONFIG_PATH"
  echo "LDFLAGS=$LDFLAGS"
  echo "PKG_CONFIG_PATH=$PKG_CONFIG_PATH"
 }

 case $VERSION in
  0.22.0) giflib_fix ;;
 esac
 default_build
}
