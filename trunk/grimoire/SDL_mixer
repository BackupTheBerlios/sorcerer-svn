# ogg/vorbis support required by daimonin-client
# SDL_mixer can acquire an indirect optional on nas from SDL 1.2.12

   version stable 1.2.11
   require SDL audiofile libvorbis
  optional libmikmod '' '' to play amiga mod files
  optional nas       '' '' for network audio server support
      opts --disable-sdltest --enable-static=no
  category audio/library audio/mixer audio/player
 attribute library x11
#   source http://www.libsdl.org/projects/SDL_mixer/release/release/SDL_mixer-$VERSION.tar.gz
    source http://www.libsdl.org/projects/SDL_mixer/release/SDL_mixer-$VERSION.tar.gz
    source http://www.libsdl.org/projects/SDL_mixer/timidity/timidity.tar.gz
      info home  http://www.libsdl.org/projects/SDL_mixer/
      info docs  http://www.libsdl.org/projects/SDL_image/docs/index.html
 freshmeat sdl_mixer
      desc 'multi-channel audio mixer
It supports 8 channels of 16 bit stereo audio,
plus a single channel of music, mixed by the
popular MikMod MOD, Timidity MIDI, Ogg Vorbis,
and SMPEG MP3 libraries.'


build(){
 sed -i "s:local/::
         s:timidity.cfg:/usr/lib/timidity/timidity.cfg:" timidity/config.h

 ./configure    \
  --prefix=/usr \
  $OPTS         &&
 make           &&
 make install "DESTDIR=$DESTDIR" &&
 mkdir   -vp                                        $DESTDIR/usr/{bin,lib/timidity} &&
 cp      -vR    timidity/{instruments,timidity.cfg} $DESTDIR/usr/lib/timidity &&
 install -vm 755 build/.libs/play{mus,wave}         $DESTDIR/usr/bin/
}
