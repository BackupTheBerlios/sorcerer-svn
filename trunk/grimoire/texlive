# kpsewhich --var-value=TEXMFMAIN
# the above command should return /usr/share/texmf
# yet it does not which indicates that texlive does not
# properly configure.
# texlive is partially broke.

# XFree86 -> Linux-PAM -> teTeX -> teTex,src -> x11
# recursive requirement loop.
# Altered Linux-PAM to no longer optionally require teTeX

# when updating this check to see if it obliterates /usr/bin/man with a directory.

# Requirement on X perhaps unavodiable since texlive requires silgraphite
# and silgraphite requires pango


   version stable 20120701 20110705
 conflicts teTeX
   require freetype gd libpaper libpng poppler silgraphite t1lib zlib
#  require TECkit freetype gd libpaper libpng poppler silgraphite t1lib zlib
# TECkit is broke and not compiling

# optional clisp --enable-xindy --disable-xindy
      opts --disable-xindy
##     opts --enable-static=no --disable-dialog --with-system-freetype --with-system-freetype2 --with-system-t1lib --with-system-libpng --with-system-zlib --with-pic --with-system-xpdf --disable-native-texlive-build --with-freetype-includes=/usr/include/freetype --with-system-gd --with-system-teckit --with-system-graphite --with-teckit-includes=/usr/include/teckit --infodir=/usr/share/info --mandir=/usr/share/man --docdir=/usr/share/doc
#      opts --enable-static=no --disable-dialog --with-system-freetype --with-system-freetype2 --with-system-t1lib --with-system-libpng --with-system-zlib --with-pic --disable-native-texlive-build --with-freetype-includes=/usr/include/freetype --with-system-gd --with-system-teckit --with-system-graphite --with-teckit-includes=/usr/include/teckit --infodir=/usr/share/info --mandir=/usr/share/man --docdir=/usr/share/doc
       opts --enable-static=no --disable-dialog --with-system-freetype2 --with-system-t1lib --with-system-libpng --with-system-zlib --with-pic --disable-native-texlive-build --with-system-gd --with-system-graphite --infodir=/usr/share/info --mandir=/usr/share/man --docdir=/usr/share/doc

## the source disregarded the --datadoortdir and --datadir commands
# --datarootdir=/usr/share --datadir=/usr/share

  category documentation
 attribute console makej
    source ftp://tug.org/historic/systems/texlive/${VERSION:0:4}/texlive-$VERSION-source.tar.xz
      info last 20120701
      info home http://www.tug.org/texlive/
      desc 'TeX system with programs, macros, and fonts'

build(){
 export PATH="${PATH/\/usr\/libexec\/ccache:/}"
 opts --enable-build-in-source-tree
 opts         --datadir=/usr/share/texmf
 mkdir -pvm 755 $DESTDIR/usr/share/texmf
 default_build
}

post_install(){
default_post_install
echo mktexlsr | pipe_queue $CAST_QUEUE
}
