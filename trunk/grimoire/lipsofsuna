# Does not install.

with version stable 0.6.0 0.5.0 0.4.0
with base    SDL_ttf bullet curl enet flac glew lua ogre ois openal sqlite libvorbis
with role    game/3d
with trait   x11
with source  $SOURCEFORGE_URL lipsofsuna/lipsofsuna/$VERSION/lipsofsuna-$VERSION.tar.gz
with info    last 20120603
with info    home http://lipsofsuna.org/
with info    wiki http://sourceforge.net/apps/trac/lipsofsuna/wiki/
with info    forum 'http://forum.freegamedev.net/viewforum.php?f=25'
with info    cite '3D tongue-in-cheek dungeon crawl game'

build(){
 make_install(){
  mkdir  -pvm 755 $DESTDIR/usr/{bin,libexec,share/lipsofsuna}
  install -vm 755 .build/lipsofsuna $DESTDIR/usr/libexec/
  echo -e "#!/bin/bash\ncd /usr/share/lipsofsuna\nexec ./lipsofsuna \"\$@\"" > $DESTDIR/usr/bin/lipsofsuna
  chmod 755 $DESTDIR/usr/bin/lipsofsuna
  chown -R root:root data
  find data -type d | xargs --max-lines=256 chmod 755
  find data -type f | xargs --max-lines=256 chmod 644
  cp -a data $DESTDIR/usr/share/lipsofsuna
  ln -v $DESTDIR/{usr/libexec,usr/share/lipsofsuna/}/lipsofsuna
 }

 ./waf configure --prefix=/usr --destdir=$DESTDIR &&
 ./waf build     --prefix=/usr --destdir=$DESTDIR &&
 ./waf install   --prefix=/usr --destdir=$DESTDIR &&
 make_install
}
