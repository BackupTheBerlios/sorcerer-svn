# Statically configured Ethernet

# Required in the format ip/netmask (ex 192.168.0.1/24 )
# One or more IPv4 and/or IPv6         addresses are fine
# One or more IPv4 and/or IPv6 gateway addresses are fine

IP=( 192.168.1.55/32
     192.168.1.62/32
     192.168.1.153/32 )

GATEWAY=( )			# Recommended
INTERFACE=eth0			# Required
BROADCAST=			# Optional
MODULE=				# Optional

. /etc/networks.d/functions/functions

start(){
 local AD CMD GW I

 for I in ${!IP[@]}; do
  AD=$(IP[$I]}
  CMD=ip
  if v6 "$AD"; then CMD+=' -6'; fi

  CMD+=" addr add $AD dev $INTERFACE label $INTERFACE:$I"
  [[ -n $BROADCAST ]] && CMD+=" broadcast $BROADCAST"
  $CMD
 done

 ip link set $INTERFACE up

 for GW in ${GATEWAY[@]}; do
  if   v6 "$GW"
  then ip -6 route add to default via $GATEWAY
  else ip    route add to default via $GATEWAY
  fi
 done
}

stop(){
 ip link set   $INTERFACE down
 ip addr flush $INTERFACE
}

$1
