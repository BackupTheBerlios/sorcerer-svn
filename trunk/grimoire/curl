# curl version 7.19.5 cmake support is broke or not yet complete
# curl's x86_64 header files might not be usable for -m32 multilib compilation
# 7.21 complains that the installed c-ares is too old

   version stable 7.21.7 7.21.6 7.21.5 7.21.4 7.21.3
   require libidn pkgconfig zlib
# optional c-ares   --enable-ares=/usr --disable-ares    for asynchronous IPv4 DNS resolution
  optional gnutls   --with-gnutls=/usr --without-gnutls  for ftps and https
  optional libssh2  ''                 --without-libssh2 for sftp support
  optional openldap --enable-ldap      --disable-ldap    for LDAP support
  optional openssl  ''                 --without-ssl     for ftps and https
  optional rtmpdump ''                 --without-librtmp
      opts --enable-static=no --enable-ipv6
      opts --disable-ares
  category network/ftp
 attribute console library makej multilib-concurrent
    source http://curl.haxx.se/download/curl-$VERSION.tar.bz2
      info last  20110625
      info home  http://curl.haxx.se/
      info docs  http://curl.haxx.se/docs/
      info mail  http://curl.haxx.se/mail/
   protect /usr/bin/curl
# curl 7.17.0 can have optional on c-ares 1.4.0 library for async DNS resolv.
# However, c-ares does not support ipv6.
# libcurl can get also use yassl for the TLS/SSL layer
# However, yassl support is very recent in libcurl and it has not been tested.
      desc 'program and library for transferring files using URL syntax
It supports HTTP, HTTPS, FTP, FTPS, DICT, TELNET,
LDAP, FILE, and GOPHER, as well as HTTP-post, HTTP-put,
cookies, FTP upload, resumed transfers, passwords,
portnumbers, SSL certificates, Kerberos, and proxies.
It is powered by libcurl, the client-side URL transfer library.
Program libcurl with C/C++ or by using the APIs available
for Dylan, Java, Perl, PHP, Python, Rexx, Ruby, and Tcl.'

build(){
 rm -f CMakeLists.txt
 default_build &&
 if    [[ $HOSTTYPE == x86_64 ]] &&
       [[ -f /lib/libc.so.6   ]]; then
  if   [[ $CFLAGS =~ -m32     ]]
  then mv -v $DESTDIR/usr/include/curl/curlbuild{,-32}.h
  else mv -v $DESTDIR/usr/include/curl/curlbuild{,-64}.h
       install -vm 644 {$SCRIPT_DIR,$DESTDIR/usr/include/curl}/curlbuild.h
  fi
 fi
}
