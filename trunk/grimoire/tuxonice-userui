# Requires libmng, libpng, jpeg, zlib
# to be compiled with --enable-static=yes

# 0.7.1 and newer requires usplash which appears to not have it's own website
# and is developed either within ubuntu or debian.
# http://ftp.debian.org/debian/pool/main/u/usplash/usplash_0.4-43.orig.tar.gz
# if you want a source tarball for it.
# The usplash module is therefore disabled at this moment.

# actually requires libmng and
# will not compile now that libmng does not compile.

   version stable 1.0 0.7.3 0.7.2 0.7.0 0.6.4 0.6.3 0.6.1
   require freetype lcms libpng libmng usplash
  category utility
 attribute console
 attribute broke
    source http://www.tuxonice.net/downloads/all/tuxonice-userui-$VERSION.tar.gz
      info home http://www.tuxonice.net
  eprovide suspend2-userui

      desc 'tuxonice-userui provides userspace user interface to software suspend 2
Having TuxOnIce-UserUI allows interaction
with the suspend process as it happens.
Pressing escape cancels a suspend.
Pressing R toggles rebooting at the end of suspending.
Verbosity level can be adjusted, etc...
see what is going on, etc.

There currently exists two user interfaces for Software Suspend 2:
* suspend2ui_text - this provides a text-based progress 
  bar, mimicking the original familiar user interface 
  of Software Suspend 2.

* suspend2ui_fbsplash - based on fbsplash (note the 
  fbsplash kernel patch is NOT required), this provides 
  a graphical themeable progress bar. Painting a progress 
  bar whilst suspending to disk actually requires a fair 
  bit of CPU grunt, and is not recommended for machines 
  slower than about 700-900MHz.
  Otherwise, the speed of suspending is notably reduced.'

build(){

case $VERSION in 
 0.7.[23]) sed -i 's:\(MODULES = .*\)usplash:\1:' Makefile 
        sed -i 's:\(MODULES = .*\)fbsplash:\1:' Makefile 
        make clean ;;
esac

sed -i 's:-static $(CORE_OBJECTS):$(CORE_OBJECTS):
        s:/usr/local:/usr:' Makefile

#make tuxoniceui_text &&
make     all &&
make install DESTDIR=$DESTDIR
}
