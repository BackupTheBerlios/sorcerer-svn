# pygtk version 2.24.0 requires pygobject < 3.0.?
# pygobject 2.28.6 no longer compiles
# compiles after removing a deprecated symbol -ks

with info    good 20130527
with info    last 20110613
with version   stable 2.28.6
with base    glib gobject-introspection libffi py2cairo
with also    --disable-docs
with role    development
with trait   gnome library makej python-module
with source    stable $GNOME_URL sources/pygobject/${VERSION:0:4}/pygobject-$VERSION.tar.xz
with source  unstable $GNOME_URL sources/pygobject/${VERSION:0:4}/pygobject-$VERSION.tar.xz
with info    home http://www.pygtk.org/
with info    cite 'python bindings for gobject'

build(){
 build_old(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then LC_ALL=C grep -rl "lib/python" * |
        xargs -r sed -i 's:lib/python:lib64/python:'
  fi
  default_build
 }

 case $VERSION in
  2.28.6) sed -i '/GI_INFO_TYPE_ERROR_DOMAIN/d' gi/pygi-info.c ;;
 esac

 default_build
}
