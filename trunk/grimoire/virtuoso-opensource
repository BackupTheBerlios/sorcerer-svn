# docs for compiling this
# http://techbase.kde.org/Getting_Started/Build/KDE4/LFS

   version stable 6.1.3 6.1.2 6.1.1 6.1.0
   require libiodbc zlib
  optional openldap
  optional openssl
      opts --enable-static=no --disable-all-vads --without-internal-zlib --with-pthreads
#     opts --with-iodbc=/opt/libiodbc
  category db
 attribute console library makej
    source $SOURCEFORGE_URL virtuoso/virtuoso/$VERSION/virtuoso-opensource-$VERSION.tar.gz
      info last  20110403
  homepage http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/
      desc 'object-relational SQL database'

build(){
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then export CFLAGS+=' -m64'
 fi

 case $VERSION in
  6.0.0) cp -v libsrc/zlib/zutil.h libsrc/Wi/ ;;
 #6.0.0) cp -v /usr/src/linux/include/linux/zutil.h libsrc/Wi/ ;;
 esac

 local  RATH="$PATH"
 local  PATH

 if   [[ $HOSTTYPE == x86_64 ]] && [[ $CFLAGS =~ -m32 ]]
 then export PATH=/opt/kde4/bin32:$RATH
 else export PATH=/opt/kde4/bin:$RATH
 fi

 default_build
}
