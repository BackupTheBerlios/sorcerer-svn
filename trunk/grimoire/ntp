# Both 4.2.4p7 and 4.2.5p204 have compile error
# The VURL often shows the RC version without the RC.
# 4.2.4p5 may not yet be stable.
# 4.2.4p8 has compile error
# 4.2.4p8 is a security fix, too bad it does not compile.
# p versions are automated development snapshot releases?
# 4.2.6p1 does not compile

    stable 4.2.6
    secure 4.2.6
  unstable 4.2.7p38 4.2.7p36 4.2.7p30
   require init-functions libcap libelf ncurses openssl readline w3c-libwww
  category utility/time
 attribute client server console
    source http://www.eecis.udel.edu/~ntp/ntp_spool/ntp4/ntp-$VERSION.tar.gz
      vurl http://www.ntp.org/downloads.html
  homepage http://www.ntp.org/
  estimate 1600
      desc 'synchronizes system time with a network time protocol server'

#case $MACHTYPE in
# *-uclibc) attribute broke ;;
#esac

build(){
case $VERSION in
 4.2.4p8) sed -i 's/: install-man/:/' sntp/Makefile.in ;;
esac
# so that ntp writes a proper PID file
 sed -i 's:fprintf(fp, "%d", (int) getpid());:fprintf(fp, "%d\\n", (int) getpid());:'  ntpd/ntp_util.c
 default_build &&
 cp      -r html /usr/doc/ntp &&
 install -m 640 $SCRIPT_DIR/ntp.conf /etc
}
