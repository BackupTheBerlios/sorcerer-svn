# Might have optional on net-snmp

# 4.2.7p?? are developmental

   version stable 4.2.6p5 4.2.6p4 4.2.6p3 4.2.6p2 4.2.6
   version snapshot 4.2.7p256 4.2.7p255
   require init-functions libcap libelf linux-headers ncurses openssl pciutils readline w3c-libwww
  optional net-snmp
  category utility/time
 attribute client server console
    source http://www.eecis.udel.edu/~ntp/ntp_spool/ntp4/ntp-$VERSION.tar.gz
      info last 20120102
      info home http://www.ntp.org/
      vurl http://www.ntp.org/downloads.html
      desc 'synchronizes system time with a network time protocol server'

build(){
# using cgroup instead of ntp's broke PID file.
#sed -i 's:fprintf(fp, "%d", (int) getpid());:fprintf(fp, "%d\\n", (int) getpid());:'  ntpd/ntp_util.c
 default_build &&
 mkdir  -pvm 755 $DESTDIR/{etc,usr/doc/ntp} &&
 cp     -r  html $DESTDIR/usr/doc/ntp/ &&
 install -vm 640 $SCRIPT_DIR/ntp.conf $DESTDIR/etc
}

current(){
 case $VERSION in
  4.2.6p3) [ -f /etc/tomoyo/sorcerer/domain/ntpd ] ;;
 esac
}
