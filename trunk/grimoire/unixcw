   VERSION=( 2.3 2.2 2.0 )
  CATEGORY='utility/ham'
 ATTRIBUTE='kde3'
    SOURCE="unixcw-$VERSION.tgz"
       URL='ftp://sunsite.unc.edu/pub/Linux/apps/ham/morse/'
       REQ='qt-x11-free'
  ESTIMATE='200'
      DESC='unixcw provides a complete suite of morse code programs.
UnixCW is a package of UNIX-based programs that fit together
to form a CW tutor program similar to CP222 by VU2ZAP.
The core of the package is cwlib, a general-purpose CW functions library.
There are four programs in the package built around this library:
a simple Morse code sounding program;
a small random character generator;
a curses-based Morse code tutor;
and a Qt-based (X windows) Morse code tutor.
The Qt-based tutor program offers send practice as well as receive.
The package includes complete man pages.'

build(){
 export QTDIR=/opt/kde3
 export PATH+=:/opt/kde3/bin
 case $HOSTTYPE in
  x86_64) export LDFLAGS+=' -Wl,-rpath=/opt/kde3/lib64' ;;
       *) export LDFLAGS+=' -Wl,-rpath=/opt/kde3/lib' ;;
 esac

 sed -i 's:-lqt:-lqt-mt:' src/xcwcp/Makefile*

 ./configure          \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 $OPTS                &&
 make        all      &&
 prepare_install      &&
 make    install      &&
 ln -sf /usr/man/man1/xcwcp.1.gz  \
        /usr/man/man1/unixcw.1.gz &&
 cp $SCRIPT_DIR/unixcw /usr/bin
}
