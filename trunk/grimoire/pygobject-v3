# pygtk version 2.24.0 requires pygobject < 3.0.?
# pygobject 2.28.6 no longer compiles
# compiles after removing a deprecated symbol -ks

   version stable 3.0.3 3.0.2
   require glib gobject-introspection gst-python libffi pycairo
      opts --disable-docs
  category development
 attribute gnome library python-module
    source $GNOME_URL sources/pygobject/${VERSION:0:3}/pygobject-$VERSION.tar.xz
      info last 20111212
      info home http://www.pygtk.org/
      desc 'python bindings for gobject'

build(){
 build_old(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then LC_ALL=C grep -rl "lib/python" * |
        xargs -r sed -i 's:lib/python:lib64/python:'
  fi
  default_build
 }

 case $VERSION in
  2.28.6) sed -i '/GI_INFO_TYPE_ERROR_DOMAIN/d' gi/pygi-info.c ;;
 esac
 default_build
}
