    stable 4.0.1 4.0.0 3.9.11 3.9.10 3.9.9 3.9.8
   require e2fsprogs
  category disk/file-system
 attribute console
    source http://mtools.linux.lu/mtools-$VERSION.tar.bz2
      vurl http://mtools.linux.lu/download.html
# mtools can have optionals for creating programs that use x11
# but does anyone want them?
# No sense in bothering the SA about it.
# You get them if you have enough of an xserver installed
#             "libSM:::for floppyd remote access to floppy drive" )
#             "libX11:::"
      opts --without-x
  homepage http://mtools.linux.lu/
  estimate 300
      desc 'mtools is a collection of utilities to access MS-DOS disks.
mtools is a collection of utilities to access
MS-DOS disks from Unix without mounting them.
It supports Win 95 style long file names,
OS/2 Xdf disks, ZIP/JAZ disks and 2m disks
(store up to 1992k on a high density 3 1/2 disk).'

build(){
 grep  -rl                     "<linux/fs.h>" * |
 xargs --max-lines=32 sed -i "s:<linux/fs.h>:<ext2fs/ext2fs.h>\n#define BLKGETSIZE _IO(0x12,96):"
 grep  -rl                     '"linux/fs.h"' * |
 xargs --max-lines=32 sed -i 's:"linux/fs.h":"ext2fs/ext2fs.h"\n#define BLKGETSIZE _IO(0x12,96):'
 default_build
}
