# Check the existence of /usr/include/libelf.h on updates
# glib may require /usr/include/libelf.h

# installs differently if libelf is already installed with header files
# located directly in /usr/include/

   version stable 0.8.13 0.8.12 0.8.11
   require pkgconfig
      opts --disable-static
  category development
 attribute library makej solo
#attribute multilib-concurrent multilib-dual
    source http://www.mr511.de/software/libelf-$VERSION.tar.gz
      info good 20120619
      info home http://www.mr511.de/software/
# conflicts with self in order to install properly.
 conflicts libelf
      desc 'ELF object file access library'

build(){
 strip_destdir(){
  local  LC_ALL
  export LC_ALL=C

  find $DESTDIR -type f     |
  xargs --max-lines=64 file |
  grep ', not stripped'     |
  cut -d : -f1              |
  xargs --max-lines=64 strip --strip-unneeded
 }

 ./configure \
  --sysconfdir=/etc \
  --localstatedir=/var \
  --prefix=/usr \
 $OPTS &&
 make &&
 make install instroot=$DESTDIR &&
 strip_destdir &&
 rm -f $DESTDIR/usr/lib{,64}/*.a
}

current(){
 case $VERSION in
  0.8.13) [ -f /usr/include/libelf.h ] ;;
 esac
}
