# id: failed to get groups for user `privoxy': No such file or directory
# what an unusal error?
# from id -G privoxy ? maybe
# Perhaps a bug in coreutils version 6.10

    stable 3.0.8-stable-src 3.0.6-stable-src 3.0.3-2-stable.src
  unstable devel-3.0.9
   require automake pcre
  category network/web
 attribute server
 attribute broke
  homepage http://www.privoxy.org
       url $SOURCEFORGE_URL
    source ijbswa/privoxy-$VERSION.tar.gz
case $VERSION in
 3.0.8-stable-src) use_gcc gcc-v4.2 ;;
esac
  estimate 200
      desc 'privoxy is a filtering web proxy for protecting privacy.
privoxy is a web proxy with advanced filtering
capabilities for protecting privacy, filtering
web page content, managing cookies, controlling
access, and removing ads, banners, pop-ups and
other obnoxious Internet junk.
Privoxy has a very flexible configuration and can
be customized to suit individual needs and tastes.
Privoxy has application for both stand-alone
systems and multi-user networks.
Privoxy is based on Internet Junkbuster (tm).'

build() {

mkdir    -p -m 0755 /etc/privoxy
groupadd -K GID_MIN=256 -K GID_MAX=511    privoxy                         2>/dev/null
useradd  -K UID_MIN=256 -K UID_MAX=511 -g privoxy -d /etc/privoxy privoxy 2>/dev/null
chown privoxy:privoxy /etc/privoxy

  sed  -i  "s:/usr/local/etc/privoxy/config:/etc/privoxy/config:" \
       privoxy-generic.init

  autoheader
  autoconf

  UG="USER=privoxy GROUP=privoxy"

  ./configure                \
  --prefix=/usr              \
  --sysconfdir=/etc/privoxy  \
  --localstatedir=/var       \
  $OPTS                      &&
  make             $UG       &&
  prepare_install            &&
  make    install  $UG
}
