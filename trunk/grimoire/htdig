# This project ceased development in 2004,
# but is still required to index kde documentation.
# However, version 3.1.6 does not work properly for
# indexing kde documentation.

    stable 3.2.0b6 3.1.6
   require zlib
case $VERSION in
 3.2.0b6) use_gcc gcc-v4.0 ;;
esac
  category network/web
 attribute client console
    source http://htdig.org/files/htdig-$VERSION.tar.gz
  homepage http://htdig.org
  estimate 300
      desc 'htdig is a WWW indexing and search engine for a domain or intranet.
The ht://Dig system is a complete WWW indexing 
and searching system for a domain or intranet.
This system is not meant to replace the need 
for internet-wide search systems like Lycos, 
Infoseek, Google, and AltaVista.
Instead, it is meant to cover the search needs for a single 
company, campus, or even a particular sub-section of a Web site.'


build(){
 case $HOSTTYPE in
  x86_64) # This fix is needed for gcc4 
     case $VERSION in
      3.1.6)  sed -i "157s:int:long:"  htdig/SGMLEntities.cc	;;
     esac 
     ;;
 esac

CXX="c++ -Wno-deprecated" \
./configure          \
--build=$BUILD       \
--prefix=/opt/www    \
--bindir=/usr/bin    \
--sysconfdir=/etc    \
--localstatedir=/var \
$OPTS                &&
make                 &&
prepare_install      &&
make    install
}
