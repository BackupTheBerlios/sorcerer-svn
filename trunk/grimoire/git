   version   stable 1.7.11.4 1.7.11.3 1.7.11.2
   version unstable 1.7.12.rc2
  category development
 attribute console makej
      info home http://git-scm.com/
      info docs http://git-scm.com/documentation

if [ $SPELL == git ]; then
   require Imaging curl expat gst-python openssl perl--URI perl--DBI perl--Error pygobject tk
    source http://git-core.googlecode.com/files/git-$VERSION.tar.gz
  optional git-htmldocs ''       '' to install documentation in HTML format
  optional git-manpages ''       '' to install git man pages
# optional web-server   --gitweb '' to install gitweb
      info last 20120731
      info home http://git-scm.com/
#     info vurl http://git-scm.com/download
      info vurl http://code.google.com/p/git-core/downloads/list
      desc 'distributed revision control system
with an unusually rich command set that provides both
high-level operations and full access to internals.'

fi

build(){
 install_gitweb(){
  install -vm 755 -d                     $DESTDIR/usr/share/gitweb
  install -vm 644 $BUILD_DIR/gitweb/git* $DESTDIR/usr/share/gitweb
 }

 install_bc(){
  cd contrib/completion
  install -vm 755 -d                  $DESTDIR/etc/bash_completion.d
  install -vm 755 git-completion.bash $DESTDIR/etc/bash_completion.d/git
  cd ../..
 }

 install_contrib_hooks(){
  install -vm 755 -d                $DESTDIR/usr/share/git-core/contrib/hooks &&
  install -vm 755  contrib/hooks/*  $DESTDIR/usr/share/git-core/contrib/hooks
 }

 grep -q '^sysconfdir'                config.mak.in ||
 sed  -i '10isysconfdir=@sysconfdir@' config.mak.in

 if   echo $OPTS | grep -q gitweb
 then IG=install_gitweb; unset OPTS
 else IG=:
 fi

 autoconf      &&
 default_build &&
 install_contrib_hooks &&
 install_bc    &&
 $IG
}
