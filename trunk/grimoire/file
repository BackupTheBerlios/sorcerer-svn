with version stable 5.13 5.12 5.11
with base    zlib
with also    --disable-static
with role    utility
with trait   console library lto makej multilib-concurrent optimize solo
#  source ftp://ftp.gw.com/mirrors/unix/file/file-$VERSION.tar.gz
with source  ftp://ftp.astron.com/pub/file/file-$VERSION.tar.gz
with info    last 20130224
with info    home http://www.darwinsys.com/file/
with info    mail http://mx.gw.com/mailman/listinfo/file
with protect /usr/bin/file
with protect /usr/share/file
with info    cite 'attemps to classify files by their content'

build(){
 more_magic(){
  if [[ $CFLAGS =~ -m32 ]]; then return; fi
  mkdir mm; cp -a "$BUILD_DIR/magic/Magdir/"* mm/
  cd    mm
  install -dvm 755   "$DESTDIR/usr/share/misc/mgc"
  find  * -type f              | xargs --max-lines=1 file -Cm
  find  * -type f -name \*.mgc | xargs --max-lines=64 \
  install -vm 644 -t "$DESTDIR/usr/share/misc/mgc"
 }

 cp  $SCRIPT_DIR/magic         magic/Magdir/sorcerer
 cat $SCRIPT_DIR/magic.mime >> magic/magic.mime
 sed -i "\,Magdir/spectrum,aMagdir/sorcerer \\\\" magic/Makefile.*
 default_build &&
 more_magic
}

current(){
 case $VERSION in
  5.11) [ -f /usr/share/misc/mgc/magic.mgc ] ;;
 esac
}
