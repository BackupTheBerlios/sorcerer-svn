#!/bin/bash

[ $$ = 1 ] || exit 1

export PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin

if [ -x /etc/init.d/proc ]; then /etc/init.d/proc start; fi
if [ -x /etc/init.d/dev  ]; then /etc/init.d/dev  start; fi

if [[ $@ =~ bash ]]; then
 read j j v j < /proc/version
 l=/lib/modules/$v/modules.loaded
 if [ -f $l ]; then
  while read; do
   echo "Delays might occur.  Please cultivate patience."
   echo "Module $REPLY loading."
   modprobe -b "$REPLY"
  done < $l
 fi
 exec /bin/bash
else
 exec /sbin/init "$@"
fi
