# version 1.0 is for qt version 3.x
# 2.0.3 is failing to compile probably due to gcc upgrade

   version stable 2.0.3
# case $VERSION in
#  2.0.3)
#  conflicts Botan ;;
# esac
   require qt-everywhere-opensource
  category security/encryption
 attribute kde4 library makej multilib-dual
 attribute broke
    source http://delta.affinix.com/download/qca/${VERSION:0:3}/qca-$VERSION.tar.bz2
      info omit 20130101
      info good 20120701
      info last 20101127
      info home http://delta.affinix.com/qca/
      desc 'QT cryptographic architecture'

build(){ (

 if    [[ $HOSTTYPE == x86_64 ]]; then
  if   [[ $CFLAGS   =~ -m32   ]]
  then
   export QMAKESPEC=/opt/32bit/usr/mkspecs/linux-g++-32
   export PATH=/opt/32bit/usr/bin:$PATH
   export PKG_CONFIG_PATH=/opt/32bit/usr/lib/pkgconfig
   OPTS+=' --prefix=/opt/32bit/usr --qtdir=/opt/32bit/usr'
  else
#  export PATH=/usr/bin:$PATH
   export PKG_CONFIG_PATH=/usr/lib64/pkgconfig
   OPTS+=' --prefix=/usr --qtdir=/usr'
  fi
 else
# export PATH=/usr/bin:$PATH
  export PKG_CONFIG_PATH=/usr/lib/pkgconfig
  OPTS+=' --prefix=/usr --qtdir=/usr'
 fi

 ./configure      \
  --disable-tests \
  --release       \
  $OPTS           &&
 make  &&
 make install DESTDIR=$DESTDIR INSTALL_ROOT=$DESTDIR
) }
