   VERSION=( 7.6 )
    IGNORE="\-ipv"
  CATEGORY='network'
 ATTRIBUTE='console server'
    SOURCE="tcp_wrappers_$VERSION.tar.gz"
       URL='ftp://ftp.porcupine.org/pub/security/'
  HOMEPAGE='ftp://ftp.porcupine.org/pub/security/index.html'
       REQ='libtool'
      DESC="tcp_wrappers allows monitoring and filtering of inbound network request.
The tcp_wrappers package allows you to 
monitor and filter incoming requests for the 
SYSTAT, FINGER, FTP, TELNET, RLOGIN, RSH, EXEC, TFTP, TALK, 
and other network services.
It provides tiny daemon wrapper programs that can be installed without 
any changes to existing software or to existing configuration files.  
The wrappers report the name of the client host and of the requested 
service.
The wrappers do not exchange information with the client or server 
applications, and impose no overhead on the actual conversation 
between the client and server applications."


build()  {

  case  $VERSION  in
    7.6)  patch  -p1  <  $SCRIPT_DIR/tcp_wrappers_7.6.patch  
          sed    -i  's:^CFLAGS\([^=]*=\):CFLAGS\1 -fPIC:'  Makefile
          ;;
  esac

  RDR="REAL_DAEMON_DIR=/usr/sbin"

  make  "$RDR"  linux           &&
  prepare_install               &&
  for  EXECUTABLE in *; do
    if    [  -x  $EXECUTABLE ]
    then  cp     $EXECUTABLE  /usr/sbin
    fi
  done                          &&
  cp  tcpd.h     /usr/include   &&
  cp  libwrap.a  /usr/lib       &&
  cp  *.3        /usr/man/man3  &&
  cp  *.5        /usr/man/man5  &&
  cp  *.8        /usr/man/man8
}
