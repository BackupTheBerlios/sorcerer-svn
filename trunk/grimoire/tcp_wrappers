# Due to tcp_wrappers not supporting IPv6
# and requires a patch to compile
# and is a hack for use on boxes that lack firewalling support
# and is basically unchanged since 1997 from ftp://ftp.porcupine.org/pub/securi$
# -r--r--r--  1 wietse  wheel   99438 Apr  8  1997 tcp_wrappers_7.6.tar.gz
# tcp_wrappers optional will be removed from openssh in 2009

    stable 7.6
   require libtool
  category network
 attribute console server
    source ftp://ftp.porcupine.org/pub/security/tcp_wrappers_$VERSION.tar.gz
  homepage ftp://ftp.porcupine.org/pub/security/index.html
      desc 'library for monitoring and filtering of inbound network request.
The tcp_wrappers package allows you to 
monitor and filter incoming requests for the 
SYSTAT, FINGER, FTP, TELNET, RLOGIN, RSH, EXEC, TFTP, TALK, 
and other network services.
It provides tiny daemon wrapper programs that can be installed without 
any changes to existing software or to existing configuration files.  
The wrappers report the name of the client host and of the requested service.
The wrappers do not exchange information with the client or server 
applications, and impose no overhead on the actual conversation 
between the client and server applications.'


build(){

 case $VERSION in
  7.6) patch -p1 < $SCRIPT_DIR/tcp_wrappers_7.6.patch ;;
 esac

 RDR="REAL_DAEMON_DIR=/usr/sbin"

 make "$RDR" linux &&
 mkdir -p $DESTDIR/usr/{include,lib,man/man{3,5,8},sbin} &&
 for EXECUTABLE in *; do
  if   [ -x $EXECUTABLE ]
  then cp   $EXECUTABLE $DESTDIR/usr/sbin
  fi
 done &&
 cp -v tcpd.h    $DESTDIR/usr/include  &&
 cp -v libwrap.a $DESTDIR/usr/lib      &&
 cp -v *.3       $DESTDIR/usr/man/man3 &&
 cp -v *.5       $DESTDIR/usr/man/man5 &&
 cp -v *.8       $DESTDIR/usr/man/man8
}
