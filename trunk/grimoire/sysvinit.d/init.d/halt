#!/bin/sh

### BEGIN INIT INFO
# Provides: halt
# Required-Start: 
# Required-Stop: 
# Default-Start: 
# Default-Stop: 0
# Short-Description: halt kills lingering processes and powers down the box
# Description: halt kills lingering processes and powers down the box
### END INIT INFO

. /lib/lsb/init-functions

flare()  {
log_warning_msg  "$1 signal about to be sent to all processes";  killall5  $2
log_success_msg  "$1 signal sent to all processes"
}

flare "TERM" "-15";  sleep 4
flare "KILL" "-9";   sleep 1
log_success_msg "Halting"
halt  -d -f -i -p
