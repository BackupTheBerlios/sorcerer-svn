#!/bin/bash
trap : INT QUIT TSTP
export PATH=/sbin:/bin:/usr/sbin:/usr/bin
umask 022

box() {
  if    [  -f  "/media/root/$1"  ]
  then  chroot  /media/root $1 start
  else                      $1 start
  fi
}


run() {
 for  SCRIPT  in  /etc/rc.d/rcS.d/S*;  do
  if    [  -f  "$SCRIPT"  ] &&
        [  -x  "$SCRIPT"  ]
  then  box    "$SCRIPT"
  fi
 done
 echo  End sysinit
}


if  !  [  -f  /proc/version  ];  then
  mount -o size=128k,nr_inodes=8,mode=0700 -t tmpfs tmpfs /etc/init.d/log
  run 2>&1 | tee /etc/init.d/log/sysinit.log > /etc/init.d/dev/si
fi
