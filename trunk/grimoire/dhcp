   VERSION=( "3.0.4" "3.0.3" "3.0.3b3" "3.0.3b2" "3.0.3b1" "3.0.2" )
    IGNORE="rc\|a\|b"
  CATEGORY="network"
 ATTRIBUTE="console client server"
    SOURCE="dhcp-$VERSION.tar.gz"
  HOMEPAGE="http://www.isc.org/products/DHCP/"
       URL="ftp://ftp.isc.org/isc/dhcp/"
  ESTIMATE="290"
   PROTECT="/etc/init.d/dhclient"
 FRESHMEAT="iscdhcp"
      DESC="dhcdp contains a server and client for automatic IP configuration.
dhcdp from the Internet Software Consortium includes
a DHCP client, a DHCP server, and a DHCP relay agent.
DHCP is a protocol for automatically configuring nodes on an IP network.
The ISC DHCP server and client are well known for being extremely
configurable, reasonably easy to use, and quite efficient."


configure()  {
  if    !  grep  -q  "INTERFACE="  $SPELL_CONFIG;  then
    [  -x  $SPELL_CONFIG.old  ]  &&
        .  $SPELL_CONFIG.old
    INTERFACE="$(
      dialog  \
        --backtitle  "$SPELL configuration"  \
        --title      "Networking Interface"  \
        --timeout    60        \
        --ok-label   "Commit"  \
        --stdout     \
        --no-cancel  \
        --inputbox   \
        "Please enter name of interface to raise via dhcp or to run dhcpd on:"  \
        0 0 "${INTERFACE:-eth0}"
    )"
    if    [  -n           "$INTERFACE"  ]
    then  echo  "INTERFACE=$INTERFACE"  >  $SPELL_CONFIG
    fi
  fi
}


build() {
  if    [    -n   "$INTERFACE"  ]
  then  sed  -i  "s:INTERFACE=.*:INTERFACE=$INTERFACE:"  \
             $GRIMOIRE/dhcp.d/init.d/dhclient  \
             $GRIMOIRE/dhcp.d/init.d/dhcpd
  fi

  sed  -i  "s/\/local//"  Makefile.conf
  ./configure      &&
  make             &&
  prepare_install  &&
  make    install
}
