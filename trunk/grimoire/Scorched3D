# requires it's own special static FFTW in order to compile.
# What version of FFTW, I wonder.

   version stable 43.3 43.2a 43.2 43.1c 43.1b
   require SDL_mixer SDL_net fftw freealut wxWidgets
# does not link properly with installed fftw; missing symbols?
      opts --disable-fftwtest
  category game
 attribute x11
    source $SOURCEFORGE_URL scorched3d/scorched3d/Version%20${VERSION}/Scorched3D-${VERSION}-src.tar.gz
    source ftp://ftp.fftw.org/pub/fftw/fftw-3.2.2.tar.gz
      info last 20120107
      info home http://scorched3d.sourceforge.net/
      info docs http://www.scorched3d.co.uk/wiki/index.php/Main_Page
 freshmeat scorched3d
      desc 'a 2D an artillery game'

build(){
 cd fftw-3.2.2
 ./configure \
  --enable-shared=no  \
  --enable-static=yes \
  --enable-float      \
  --prefix=$PWD/installed &&
 make &&
 make install &&
 OPTS+=" --with-fftw=$PWD/installed" &&
 cd .. &&

 # export PATH=$PWD/scorched-dep-osx/config:$PATH
 # chmod u+x   $PWD/scorched-dep-osx/config/openal-config
 # sed -i 's:prefix=.*:prefix=/usr:' \
 #             $PWD/scorched-dep-osx/config/openal-config

 # LC_ALL=C grep -rl fftw3f * | xargs -r --max-lines=256 sed -i 's:fftw3f:fftw3:'

 if [ -d scorched ]
 then cd scorched
 fi &&
 default_build
}
