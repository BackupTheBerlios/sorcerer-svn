   VERSION=( 0.6.3 0.5.7 0.5.6 0.5.5 0.5.4 )
  CATEGORY='network/security network/wireless'
 ATTRIBUTE='console utility'
    SOURCE="wpa_supplicant-$VERSION.tar.gz"
       URL='http://hostap.epitest.fi/releases/'
  HOMEPAGE='http://hostap.epitest.fi/wpa_supplicant'
       REQ=( 'openssl readline ncurses'
             'qt-x11-opensource:::for GUI' )
  ESTIMATE='100'
      DESC='wpa_supplicant is a WPA/WPA2 supplicant
wpa_supplicant supports WPA and WPA2 (IEEE 802.11i/RSN).
It is suitable for both desktop/laptop
computers and embedded systems.
Supplicant is the IEEE 802.1X/WPA
component that is used in the client stations.
It implements key negotiation with a WPA
Authenticator and it controls the roaming and
IEEE 802.11 authentication/association of the wlan driver.
wpa_supplicant is designed to be a daemon program
that runs in the background and acts as the backend
component controlling the wireless connection.
It supports separate frontend programs and a text-based
frontend (wpa_cli) is included with wpa_supplicant.'

build(){
 install_examples(){
  mv *.conf examples
  mv        examples doc
 }

 install_man(){
  for i in doc/docbook/*.[0-9]
  do  install -v -m 0644 $i /usr/share/man/man${i##*.}
  done
 }

 install_wpa_gui(){
  if                 [ -f wpa_gui/wpa_gui ]
  then install -v -m 0755 wpa_gui/wpa_gui /usr/bin
  fi
 }

 install_wpa_files(){
  install -v -d /etc/wpa_supplicant
  install_wpa_gui
  install_examples
  install_man	
 }

 make_gui(){ make wpa_gui; true; }

 export QTDIR=/usr/share/qt4
 sed -i 's:/usr/local:/usr:' wpa_supplicant/Makefile
 export  LDFLAGS+=' -L/lib -L/lib64'
 cd  wpa_supplicant     &&
 cp  defconfig  .config &&
 make                   &&
 make_gui               &&
 prepare_install        &&
 make    install        &&
 install_wpa_files
}
