   VERSION=( "1.01.05" "1.01.04" "1.01.03" "1.01.02" "1.01.01" "1.01.00" "1.00.21" "1.00.19" "1.00.18" )
    IGNORE="^1\.02\.00"
# 1.02.00 is developmental
# Must check download directory to discover what is stable

# device-mapper now installs libraries into /lib or /lib64
# because /sbin/lilo requires device-mapper libraries.
# While /sbin/lilo is not usually run at boot time a SA might run it.

# device-mapper has no init script because the rules
# provided with udev handle the creation of the device-mapper
# character node /dev/mapper/control

  CATEGORY="disk"
 ATTRIBUTE="console"
    SOURCE="device-mapper.$VERSION.tgz"
  HOMEPAGE="http://sources.redhat.com/dm/"
       URL="ftp://sources.redhat.com/pub/dm/"
      OPTS="--enable-static_link"
#FRESHMEAT="device-mapper"
  ESTIMATE="220"
      DESC="device-mapper provides tools and library for using the kernel device-mapper.
The Device-mapper is a new component of the linux
kernel that supports logical volume management.
It is required by LVM2 and EVMS.
The original LVM (included in stock 2.4 kernels) does not use it."


build() {
  case  $VERSION  in
    1.01.05)  sed -i "s:-lselinux:-lselinux -lsepol:" configure*  ;;
  esac

  if    [ "$HOSTTYPE" == "x86_64" ]
  then  LIBDIR=/lib64
  else  LIBDIR=/lib
  fi

  move_ar_libs()  { mv  $LIBDIR/libdevmapper.a*  /usr$LIBDIR; }

  ./configure            \
  --build=$BUILD         \
  --prefix=/usr          \
  --sysconfdir=/etc      \
  --libdir=$LIBDIR       \
  --localstatedir=/var   \
  $OPTS                  &&
  make                   &&
  prepare_install        &&
  make    install        &&
  move_ar_libs
}
