# Version 3.1.3 may be beyond salvage?
# Even 3.2.0beta6 does not compile.

   version   stable 3.2.0beta6 3.1.3 3.1.2 3.1.1 3.1.0
   version unstable 3.2.0beta6 3.2.0beta5
   require dbus-glib gtk+
# optional compface ''             --disable-compface for compface support
  optional enchant
  optional gpgme    --enable-gpgme ''                 for encrypted email
  optional gtkspell
  optional openldap --enable-ldap  ''                 for ldap support
  optional openssl  --enable-ssl   ''                 for pop3s and imaps support
  category network/email network/news
 attribute client makej x11
 attribute broke
    source http://sylpheed.sraoss.jp/sylpheed/v3.2beta/sylpheed-$VERSION.tar.bz2
#   source http://sylpheed.sraoss.jp/sylpheed/v${VERSION:0:3}/sylpheed-$VERSION.tar.bz2
      info last 20120228
      info omit 20130228
      info home http://sylpheed.sraoss.jp/
      vurl http://sylpheed.sraoss.jp/en/download.html
   provide email-client
      desc 'e-mail client and news reader based on gtk+
sylpheed is a gtk+ based, lightweight, and fast email client.
Almost all commands are accessible with the keyboard.
It also has many features such as multiple accounts,
POP3/APOP support, thread display, and multipart MIME.
The messages are managed in the MH format, so you will
be able to use it together with another mailer that
uses the MH format.'

build(){
 case $VERSION in
  3.2.0beta6)
   grep -lr "glib/g" * |
   xargs --max-lines=64 \
   sed -i 's:glib/g[^>]*:glib.h:'
   sed -i 's:glibconfig\.h:glib.h:' libsylph/defs.h ;;
  3.1.3)
   grep -lr "glib/g" * |
   xargs --max-lines=64 \
   sed -i 's:glib/g[^>]*:glib.h:'
   sed -i 's:glibconfig\.h:glib.h:' libsylph/defs.h ;;
 esac
 default_build &&
 mkdir   -pvm 755              $DESTDIR/usr/share/pixmaps &&
 install  -vm 644 sylpheed.png $DESTDIR/usr/share/pixmaps
}
