#  VERSION=( "2.0.8" "2.0.7" "2.0.2" "2.0.1" "2.0.0" )
   VERSION=( "2.0.7" "2.0.2" "2.0.1" "2.0.0" )
# web and ftp site are down or flooded for 2.0.8 release?
# Tue Mar  7 21:04:38 UTC 2006
    IGNORE="^2\.0\.[3-7]"
# 2.0.3 and 2.0.4 have compile errors.
  CATEGORY="game"
 ATTRIBUTE="x11 broken"
    SOURCE=( "stable/freeciv-$VERSION.tar.bz2"
             "contrib/sounds/sets/stdsounds3.tar.gz" )
#            "contrib/tilesets/all_tilesets/all_tilesets-2.0.3.tar.gz" )
# Why are they playing musical chairs with tilesets?!?!?
       URL="ftp://ftp.freeciv.org/freeciv
            ftp://ftp.netc.pt/pub/freeciv"
       REQ=( "SDL_image SDL_mixer gtk+ ncurses readline"
             "alsa-lib:--enable-alsa:--disable-alsa:for audio output using alsa"
             "esound:--enable-esd:--disable-esd:for audio output using esound" )
  HOMEPAGE="http://www.freeciv.org"
  ESTIMATE="365"
      DESC="freeciv is a reimplementation of Civilization.
freeciv is a multiuser reimplementation of
the famous Microprose game of Civilization.
By default, the game is an improved Civ II,
but this can be customized; modpacks for
near-100% compatibility with Civ I and Civ II are included.
Multiuser gameplay is real-time: in each turn,
all human players move concurrently.
The game is designed to remain fairly
playable even on poor network connections.
Freeciv can also be played on standalone machines,
and its AI players are a good challenge for beginners.
The source code comes with the server, two X clients,
and non-X clients for MS Windows and Amiga."


pre_build_old() {
unpack  ${SOURCE[0]}

cd      $BUILD_DIR
mkdir   sound
cd      sound
unpack  ${SOURCE[1]}


cd      $BUILD_DIR
mkdir   tilesets
cd      tilesets
unpack  ${SOURCE[2]}

cd      $BUILD_DIR
chown   -R  root:root  sound  tilesets
find                   sound  tilesets  -type f  |  xargs   -l64   chmod  0644
find                   sound  tilesets  -type d  |  xargs   -l64   chmod  0755
}

build() {
./configure          \
--prefix=/usr        \
--bindir=/usr/games  \
--enable-client=sdl  \
$OPTS                &&
make                 &&
prepare_install      &&
make    install    # &&
#cd      sound/data   &&  cp  -av  *  /usr/share/freeciv  &&
#cd  ../../tilesets   &&  cp  -av  *  /usr/share/freeciv
}
