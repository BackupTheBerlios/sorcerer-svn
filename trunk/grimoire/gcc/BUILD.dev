(

  patch  -p1  <  $SCRIPT_DIR/gcc-20021007.patch
  ENABLE_LANGS="--enable-languages=${GCC_LANGS[1]:=c++}"

  export  LIBCFLAGS="$CFLAGS"
  export  LIBCXXFLAGS="$CXXFLAGS"

  ./configure  --host=$BUILD               \
               --prefix=/usr/gcc-$VERSION  \
               --enable-threads=posix      \
               --enable-shared             \
               --enable-__cxa_atexit       \
               --enable-clocale=gnu        \
               $ENABLE_LANGS               &&
  make   -j 2  bootstrap-lean              &&
  prepare_install                          &&
  make    install

) > $C_FIFO 2>&1  &&  (

  remove_header()  {  rm  -f  $(  find  /usrc/gcc-$VERSION -name $1  );  }

  remove_header   curses.h
  remove_header  ncurses.h

  ln  -sf   /usr/gcc-$VERSION/bin/cpp   /lib/cpp
  ln  -sf   /usr/gcc-$VERSION/bin/gcc   /usr/gcc-$VERSION/bin/cc
  cp  -sfa  /usr/gcc-$VERSION/man/*     /usr/man/
  cp  -sfa  /usr/gcc-$VERSION/info/*    /usr/info/
  cp  -sfa  /usr/gcc-$VERSION/share/*   /usr/share/
  rm  -rf   /usr/bin/cc

  true

)
