   version stable 0.4b43
      info last  20100611
   require LVM2 bzip2 e2fsprogs ncurses readline zlib
      opts --enable-largefile --enable-rmt --with-manowner=root --with-mangrp=root
      opts --disable-transselinux
  category disk/file-system
 attribute console
    source $SOURCEFORGE_URL dump/dump/$VERSION/dump-$VERSION.tar.gz
      info home  http://dump.sourceforge.net/
      info docs  http://dump.sourceforge.net/isdumpdeprecated.html
      info mail  'http://sourceforge.net/mail/?group_id=1306'
 freshmeat dumprestore
      desc 'dump and restore utilities for ext2 and ext3 filesystems
dump and restore facilitate backups to
tapedrive from ext2 and ext3 filesystems.
If you are using another filesystem (e.g. XFS, Reiser)
you will not want to use these utilities,
but rather versions specific to those filesystems
(e.g. xfs-dump/xfs-restore, etc.) packaged separately.'

# requires fstab.h which is provided by glibc, but not uClibc

case $MACHTYPE in
 *-uclibc) attribute broke ;;
esac


build(){

sed -i 's:-lselinux::g;s:-lsepol::g' configure

case $VERSION in
 0.4b38) sed -i 's:linux/fs.h:ext2fs/ext2fs.h:' dump/main.c dump/tape.c ;;
 0.4b39) sed -i 's:linux/fs.h:ext2fs/ext2fs.h:' dump/main.c dump/tape.c ;;
esac

    CC="--with-cc=gcc $CFLAGS"
LDOPTS="--with-ldopts=$LDFLAGS"

./configure \
--prefix=$DESTDIR/usr \
$OPTS     \
"$CC"     \
"$LDOPTS" &&
make      &&
make install
}
