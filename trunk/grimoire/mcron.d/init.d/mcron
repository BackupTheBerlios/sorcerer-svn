#!/bin/bash

### BEGIN INIT INFO
# Provides: mcron $cron
# Required-Start: $local_fs run
# Required-Stop: kill
# Default-Start:  2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: mcron is a vixie cron replacement
# Description: mcron is not your mother's cron
### END INIT INFO

. /lib/lsb/init-functions

SOCK=/var/cron/socket
PIDF=/var/run/cron.pid
SERV=/usr/sbin/cron
NAME=mcron
OPTS='-n'

start()  {
 clear_socket() {
  if   ! status  &>/dev/null
  then   rm -f $SOCK
  fi
 }

 export TERM="dumb"
 if    log_warning_msg  "$NAME starting"; clear_socket; start_daemon-p $PIDF $SERV $OPTS &>/dev/null
 then  log_success_msg  "$NAME started"
 else  log_failure_msg  "$NAME not started"; status
 fi
}

parse "$@"
