# 2.3.42 and 2.3.39 have a problem detecting db
# 2.3.43 is a security fix
# 2.3.43 is not compatible with db 4.7.25
# 2.4.11 is not compatible with db 4.7.25
# 2.3.43 configure ignores --enable-bdb=no

    stable 2.4.11 2.3.43 2.3.38 2.3.35 2.3.32 2.3.31 2.3.27
    secure 2.3.43 2.3.38
  unstable 2.4.11
   require cyrus-sasl db-v4.5 libtool
  optional heimdal --with-kerberos --without-kerberos for kerberos support
  category utility
 attribute console
       url 'ftp://ftp.openldap.org/pub/OpenLDAP/
            ftp://gd.tuwien.ac.at/infosys/network/OpenLDAP/
            ftp://ftp.ucr.ac.cr/pub/Unix/openldap/
            ftp://ftp.ntua.gr/mirror/OpenLDAP/
            ftp://ftp.dti.ad.jp/pub/net/OpenLDAP/
            ftp://ftp.u-aizu.ac.jp/pub/net/openldap/
            ftp://ftp.nl.uu.net/pub/unix/db/openldap/
            ftp://ftp.plug.pt/pub/OpenLDAP/
            ftp://ftp.si.uniovi.es/mirror/OpenLDAP/
            ftp://sunsite.cnlab-switch.ch/mirror/OpenLDAP/
            ftp://ftp.net.lut.ac.uk/openldap/
            ftp://ftp.plig.org/pub/OpenLDAP/
            http://www.openldap.org/software/download/OpenLDAP/'
    source openldap-release/openldap-$VERSION.tgz
  homepage http://www.openldap.org/
      opts --enable-shell --enable-dynamic --enable-modules=yes --enable-static=no
  estimate 2400
      desc 'openldap is a fully featured open source LDAP software suite.
openldap is a fully featured open source LDAP software suite.
OpenLDAP Software provides a complete LDAP implementation including
server, clients, C SDK, and associated tools.'

#             --enable-bdb          \
#             --with-bdb-module=dynamic  \
#             --enable-dnssrv       \
#             --with-dnssrv-module=dynamic
# can build dynamic modules advantageous
# for binary based distros, but probably not sorcerer.


post_install(){
 default_post_install
          get_provider  pam_ldap |
 pipe     get_provider  nss_ldap |
 pipe     show_installed         |
 LC_ALL=C sort                   |
          uniq  -d               |
          pipe_queue $CAST_QUEUE com
}


build(){
export ol_cv_bdb_compat=yes
export ol_cv_bdb_minor=5
 export  CFLAGS+=' -I/opt/db/4.5/include'
 export LDFLAGS+=' -L/opt/db/4.5/lib -Wl,-rpath /opt/db/4.5/lib -Wl,-rpath-link /opt/db/4.5/lib'
 default_build
}
