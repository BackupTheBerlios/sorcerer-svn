# http://code.openbossa.org/projects/qedje/pages/Home
# Wants QZion and/or QEdje from the above URL
# but the above URL is curently not reachable with a web browser


# Potential optional requirement:
# + Captury framework: libcaptury is a framework realtime video capturing for e.g.
# screen casts <http://rm-rf.in/captury>
# However, http://rm-rf.in/captury not connecting, 20080114

# NetworkManager 0.6.5 has compile errors
#            'NetworkManager:::for a daemon for user controlled networking'

# adding iceauth, xorg-cf-files from original kdebase
# because probability is that they are used.

# To generate a default configuration not imported from any others
# genkdmconf --no-old --no-backup

   inherit kde-v4
   require iceauth kdelibs-v4 kdepimlibs-v4 libXres libXScrnSaver libXxf86misc libxklavier oxygen-icons qimageblitz xmessage xorg-cf-files xprop xsetroot xterm
case $VERSION in
 4.4.*) require kdepim-v4 ;;
esac

#  require kdelibs-experimental-v4 oxygen-icons
  optional ConsoleKit
  optional bluez
  optional google-gadgets-for-linux '' '' for google gadets library
# having gpsd installed prevents compilation of kdeedu-v4
# which also conflicts with gpsd
# optional gpsd
  optional libraw1394
  optional libusb-compat
  optional lm_sensors
# optional qedje '' '' to build plasma scriptengine for edje files
  optional qimageblitz
  optional xine-lib
  optional xmms
  category utility/file-manager utility/terminal-emulator
 attribute library makej
 attribute multilib-fail
  estimate 8000
     wmbin /opt/kde4/bin/startkde
      desc 'Plasma and the window manager'
     iwall 'kdm-v4 will soon restart'

build(){
 sed -i 's:/var/run/kdm.pid:/var/run/kdm-v4.pid:' kdm/config.def
 kde_build
}

post_install(){
 default_post_install
 /opt/kde4/bin/genkdmconf --no-old --no-backup
}

