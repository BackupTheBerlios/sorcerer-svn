    stable 2.3.9 2.3.7 2.3.5 2.3.4 2.3.3
   require gnupg perl wget
  optional gdbm --with-gdbm '' to support gnu gdm databse files
  category network
 attribute server
    source http://www.irrd.net/irrd$VERSION.tgz
  homepage http://www.irrd.net/
  estimate 350
      desc 'irrd provides an Internet Routing Registry database server.
irrd is a streamlined, stand-alone Internet Routing Registry
database server which supports both RIPE-181 and RPSL
routing registry syntax.
The IRRd package includes additional utilities, tools, and
services to securely manage and maintain the database.'

pre_build(){
mkdir    -p -m 755 /var/spool/irr_database
groupadd -K GID_MIN=256 -K GID_MAX=511    irrd 2>/dev/null
useradd  -K UID_MIN=256 -K UID_MAX=511 -g irrd -d /var/spool/irr_database irrd 2>/dev/null
chown    -R irrd:irrd /var/spool/irr_database
default_pre_build
}

build(){
 finish_install(){
  cd      ..
  mkdir   -p $DESTDIR/{etc,usr/{man/man8,share/irrd,doc/irrd}}
  cp      -r      src/programs/irrdcacher  $DESTDIR/usr/share/irrd
  install -m 644  src/programs/IRRd/irrd.8 $DESTDIR/usr/man/man8
  install -m 644  samples/irrd.conf.sample $DESTDIR/etc/
  mkdir   -p                               $DESTDIR/usr/doc/irrd
  cp              irrd-user.*              $DESTDIR/usr/doc/irrd
 }

 cd src
 default_build &&
 finish_install
}
