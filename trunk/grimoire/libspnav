# Does not support DESTDIR variable

# Requirement added for runtime convenience,
# but is probably not compile time requirement
# Category incorrect

   version stable 0.2.2 0.2.1
   require spacenavd
      opts --enable-static=no
  category xorg/driver
 attribute library
    source $SOURCEFORGE_URL spacenav/spacenav%20library%20%28SDK%29/libspnav%20$VERSION/libspnav-$VERSION.tar.gz
      info good 20120621
      info last 20100327
      info home http://spacenav.sourceforge.net/
      desc "alternative driver and SDK for 3Dconnexion's 3D input devices"

build(){
 opts --prefix=$DESTDIR/usr
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then sed -i 's:libdir=lib:libdir=lib64:' configure
      mkdir -pm 755 $DESTDIR/usr/lib64
 else mkdir -pm 755 $DESTDIR/usr/lib
 fi
 mkdir -pm 755 $DESTDIR/usr/include
 ./configure $OPTS &&
 if   [ -n    "$CC" ]
 then make "CC=$CC"
 else make
 fi &&
 make install &&
 rm -f $DESTDIR/usr/lib{,64}/*.a
}
