# Even WebKit source provided from Debian's ftp server is useless to compile.
# gcc: language c++ not recognized
# Such clever software authors invoking gcc,
# the C compiler, to compile C++ software instead
# of invoking g++.
# I will not fix their improper broke source.


# At least one of those commented out switches or optionals breaks WebKit compilation.
# Since it requires about 8 hours for me to compile WebKit on the test box
# I will not be trying to figure out the problem.

# 48454 requires glib-2.0 >= 2.21.3
# 48000 also requires developmental glib versions
# No idea what is supposed to be stable.

# Badly written source and makefile attempt to compile
# c++ source with gcc instead of g++

# WebKit authors only make available tarballs
# of snapshot releases of the WebKit repository.
# It amounts to useless trash.
# So instead using the WebKit that Debian authors rolled into a tarball.

#  progress reposit
#   stable 68636 65707 57318 49764 48000 44265
    stable 1.2.4
   require gst-plugins-base icu4c gnutls libgpg-error libsoup
#  require gtk-doc
  optional enchant
      opts --disable-gtk-doc
  category network/web
 attribute library x11 
 attribute broke
# switch --enable-3D-transforms        --disable-3D-transforms                "enable support for 3D transforms default=no"
# switch --enable-channel-messaging    --disable-channel-messaging            "enable HTML5 channel messaging support default=no"
# switch --enable-javascript-debugger  --disable-javascript-debugger          "enable JavaScript debugger/profiler support default=yes"
# switch --enable-offline-web-applications --disable-offline-web-applications "enable HTML5 offline web applications supporti default=yes"
# switch --enable-dom-storage          --disable-dom-storage                  "enable HTML5 client-side session and persistent storage support default=yes"
# switch --enable-icon-database        --disable-icon-database                "enable icon database default=yes"
# switch --enable-geolocation          --disable-geolocation                  "enable support for geolocation default=no"
# switch --enable-svg                  --disable-svg                          "enable support for SVG default=yes"
# switch --enable-wml                  --disable-wml                          "enable support for WML default=no"
# switch --enable-svg-animation        --disable-svg-animation                "enable support for SVG animation (experimental) default=yes"
# switch --enable-filters              --disable-filters                      "enable support for filters (experimental) default=no"
# switch --enable-svg-fonts            --disable-svg-fonts                    "enable support for SVG fonts (experimental) default=yes"
# switch --enable-svg-foreign-object   --disable-svg-foreign-object           "enable support for SVG foreign objects (experimental) default=yes"
# switch --enable-svg-as-image         --disable-svg-as-image                 "enable SVG as Image support (experimental) default=yes"
# switch --enable-coverage             --disable-coverage                     "enable code coverage support default=no"
# switch --enable-fast-malloc          --disable-fast-malloc                  "enable optimized memory allocator default=yes, default=no for debug builds"
# switch --enable-jit                  --disable-jit                          "Enable JIT compilation default=yes"
# switch --enable-xpath                --disable-xpath                        "enable support for XPath default=yes"
  optional libxslt          --enable-xslt     --disable-xslt     "enable support for XSLT default=yes"
# optional gtk-doc          --enable-gtk-doc  --disable-gtk-doc  "use gtk-doc to build documentation [default=no]"
  optional sqlite           --enable-database --disable-database "enable HTML5 client-side database storage support default=yes"
  optional gst-plugins-base --enable-video    --disable-video    "enable HTML5 video support default=yes"
# REPOSITORY=( ""
#              "svn co -r ${VERSION}  http://svn.webkit.org/repository/webkit/trunk WebKit"
#              "svn up -r ${VERSION}  http://svn.webkit.org/repository/webkit/trunk WebKit" )
#   source WebKit-${VERSION}.tar.bz2

    source http://ftp.debian.org/debian/pool/main/w/webkit/webkit_$VERSION.orig.tar.gz
#   source http://builds.nightly.webkit.org/files/trunk/src/WebKit-r$VERSION.tar.bz2
  homepage http://webkit.org/
  estimate 2600
      desc "open source web browser engine
WebKit is also the name of the Mac OS X system framework
version of the engine that's used by Safari, Dashboard, Mail,
and many other OS X applications.
WebKit's HTML and JavaScript code began as a branch of the KHTML
and KJS libraries from KDE.
This website is also the home of S60's S60 WebKit development."

# build(){
#  find -type d -name .svn | xargs -r rm -r
#  echo ${OPTS} &&
#  ./autogen.sh $OPTS --prefix=/usr &&
#  make all install "DESTDIR=$DESTDIR"
# }

build(){
(
 export CC=g++
 default_build
)
}
