# Even with --disable-gtk-doc WebKit still requires gtk-doc to be installed.

# r112169 r112011 r111990 r110587 r109673 r108509 r107164 r106139 failed to compile

   version   stable 1.7.92 r97664 r96792 r94500 1.3.13 r81486
   version unstable r112169 r112011 r110587 r109673 r108509 r107164 r106139
   require Imaging enchant geoclue gst-plugins-base gtk+ gtk-doc libsoup
      opts --disable-gtk-doc
      opts --with-gtk=3.0 --enable-introspection
case $VERSION in
 1.7.92)
      opts --with-accelerated-compositing=no --disable-webgl ;;
esac

#     opts --enable-geolocation
# switch --enable-3D-transforms        --disable-3D-transforms                "enable support for 3D transforms default=no"
# switch --enable-channel-messaging    --disable-channel-messaging            "enable HTML5 channel messaging support default=no"
# switch --enable-javascript-debugger  --disable-javascript-debugger          "enable JavaScript debugger/profiler support default=yes"
# switch --enable-offline-web-applications --disable-offline-web-applications "enable HTML5 offline web applications supporti default=yes"
# switch --enable-dom-storage          --disable-dom-storage                  "enable HTML5 client-side session and persistent storage support default=yes"
# switch --enable-icon-database        --disable-icon-database                "enable icon database default=yes"
# switch --enable-geolocation          --disable-geolocation                  "enable support for geolocation default=no"
# switch --enable-svg                  --disable-svg                          "enable support for SVG default=yes"
# switch --enable-wml                  --disable-wml                          "enable support for WML default=no"
# switch --enable-svg-animation        --disable-svg-animation                "enable support for SVG animation (experimental) default=yes"
# switch --enable-filters              --disable-filters                      "enable support for filters (experimental) default=no"
# switch --enable-svg-fonts            --disable-svg-fonts                    "enable support for SVG fonts (experimental) default=yes"
# switch --enable-svg-foreign-object   --disable-svg-foreign-object           "enable support for SVG foreign objects (experimental) default=yes"
# switch --enable-svg-as-image         --disable-svg-as-image                 "enable SVG as Image support (experimental) default=yes"
# switch --enable-coverage             --disable-coverage                     "enable code coverage support default=no"
# switch --enable-fast-malloc          --disable-fast-malloc                  "enable optimized memory allocator default=yes, default=no for debug builds"
# switch --enable-jit                  --disable-jit                          "Enable JIT compilation default=yes"
# switch --enable-xpath                --disable-xpath                        "enable support for XPath default=yes"

#  optional libxslt          --enable-xslt     --disable-xslt     "enable support for XSLT default=yes"
## optional gtk-doc          --enable-gtk-doc  --disable-gtk-doc  "use gtk-doc to build documentation [default=no]"
#  optional sqlite           --enable-database --disable-database "enable HTML5 client-side database storage support default=yes"
#  optional gst-plugins-base --enable-video    --disable-video    "enable HTML5 video support default=yes"

  category network/web
 attribute library makej multilib-dual x11
#attribute multilib-concurrent

    source http://www.webkitgtk.org/webkit-$VERSION.tar.xz
#   source http://builds.nightly.webkit.org/files/trunk/src/WebKit-$VERSION.tar.bz2
      info last 20120327
      info home http://www.webkitgtk.org/
      info home http://webkit.org/
      info docs http://trac.webkit.org/wiki
      info vurl "http://www.webkitgtk.org/?page=download"
      desc "open source web browser engine
WebKit is also the name of the Mac OS X system framework
version of the engine that's used by Safari, Dashboard, Mail,
and many other OS X applications.
WebKit's HTML and JavaScript code began as a branch of the KHTML
and KJS libraries from KDE.
This website is also the home of S60's S60 WebKit development."

build(){
 if   [ -f autogen.sh ]
 then sh ./autogen.sh
 fi

 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 rm -f CMakeLists.txt
 default_build
}
