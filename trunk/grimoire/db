# undefined reference to `db_strerror'
# db 4.7.25 has an API change that is incompatible with
# reland and some other programs.

    stable 4.8.26 4.8.24 4.7.25.4 4.7.25.3 4.7.25.1 4.7.25
  optional gcc-g++
  category db
 attribute library
    source http://download.oracle.com/berkeley-db/db-${VERSION:0:6}.tar.gz
case $VERSION in
 4.7.25.4)
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.1
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.2
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.3
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.4 ;;
 4.7.25.3)
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.1
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.2
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.3 ;;
 4.7.25.1)
    source http://www.oracle.com/technology/products/berkeley-db/db/update/${VERSION:0:6}//patch.${VERSION:0:6}.1 ;;
esac
      opts --enable-static=no
  homepage http://www.oracle.com/technology/software/products/berkeley-db/index.html
      vurl http://www.oracle.com/technology/software/products/berkeley-db/index.html
 freshmeat berkeleydb
  estimate 900
      desc 'db also called Berkeley DB provides database support.
db also called Berkeley DB is a programmatic toolkit that provides 
fast, reliable, scalable, and mission-critical database support in 
software ranging from applications running on hand-held appliances 
to enterprise-scale servers.'

build(){
# cast automatically patched the source tree.
# PCX=1
# while [[ -n  ${SOURCE[$PCX]} ]]; do
#  patch -p0 < ${SOURCE[$PCX]}
#  (( PCX++ ))
# done

cd build_unix &&
../dist/configure  \
--prefix=/usr      \
--enable-dynamic   \
--enable-compat185 \
--enable-cxx       \
$OPTS              &&
make               &&
prepare_install    &&
make    install    &&
rm -rf /usr/docs
}


post_install(){
 default_post_install
          get_provider openldap |
 pipe     show_installed        |
 LC_ALL=C sort                  |
          uniq -d               |
          pipe_queue $CAST_QUEUE com
}
