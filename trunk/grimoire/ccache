   version stable 3.1.6 3.1.5 3.1.4
  category development
 attribute console solo
    source http://samba.org/ftp/ccache/ccache-$VERSION.tar.xz
      info last  20110821
      info home  http://ccache.samba.org/
      info docs  http://ccache.samba.org/manual.html
    CFLAGS='-O2'
   LDFLAGS='-Wl,-O1 -static'
      desc 'C and C++ compiler wrapper to speed compilation
ccache is a compiler cache.
It acts as a caching pre-processor to C/C++ compilers, 
using the -E compiler switch and a hash to detect when 
a compilation can be satisfied from cache.
This often results in a 5 to 10 times 
speedup in common compilations.'

build(){

 symlink_install(){
  cd $DESTDIR/usr/libexec/ccache
  ln -sf ccache cc
  ln -sf ccache gcc
  ln -sf ccache c++
  ln -sf ccache g++
 }


export LDFLAGS+=" $OPTS"

sed -i 's:$(CFLAGS):$(CFLAGS) $(LDFLAGS):' Makefile.in

ac_cv_func_getpwuid=no       \
./configure                  \
--prefix=/usr/libexec/ccache \
--bindir=/usr/libexec/ccache \
--sysconfdir=/etc            \
--localstatedir=/var         \
--mandir=/usr/man            \
$OPTS                        &&
make                         &&
mkdir -p $DESTDIR/usr/libexec/ccache &&
make    install "DESTDIR=$DESTDIR"   &&
symlink_install
}
