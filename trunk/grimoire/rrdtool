   version stable 1.4.5 1.4.4 1.4.3
      opts --disable-rpath
   require lua pango
  optional ruby '' '' for ruby bindings
      opts --disable-python --enable-static=no
  category network
 attribute console perl-module
    source http://oss.oetiker.ch/rrdtool/pub/rrdtool-$VERSION.tar.gz
# Versions 1.2.19 and 1.2.18 fail compilation when linking python modules.
# --disable-python avoids the failure,
# however rrdtool will have no python bindings.
  homepage http://oss.oetiker.ch/rrdtool/
      desc 'time-series data logging and graphing program
rrdtool is basically the time-series graphing and data
storage/management component of MRTG, broken out and done right.
done right means that RRDtool is magnitudes faster than MRTG and
extremely configurable.'

build(){
# puts ELF libraries into /usr/share unless explicitly told to do otherwise.

 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then opts --libdir=/usr/lib64
 else opts --libdir=/usr/lib
 fi

 export   CFLAGS="${CFLAGS//-ffast-math/}"
 export CXXFLAGS="${CXXFLAGS//-ffast-math/}"
 ./configure                  \
  --prefix=/usr/share/rrdtool \
  --includedir=/usr/include   \
  --bindir=/usr/bin           \
  --mandir=/usr/man           \
  --sysconfdir=/etc           \
  --localstatedir=/var        \
  --enable-perl-site-install  \
  $OPTS &&
 make   &&
 make install DESTDIR=$DESTDIR
}
