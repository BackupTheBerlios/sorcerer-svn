   version stable 2.25b 2.25 2.24
  category network/web
  sys_user thttpd thttpd /srv/http
 attribute console server old_init unsafe
# Debian reports finding security problems in thttpd
# unknown if version 2.25b is effected.
    source http://www.acme.com/software/thttpd/thttpd-$VERSION.tar.gz
      info home http://www.acme.com/software/thttpd/
  eprovide web-server
      desc 'throttling httpd server
thttpd is a simple, small, fast and secure HTTP server.
It does not have a lot of special features
but it suffices for most uses of the web.
It is faster than Apache and it has one extremely useful feature
(URL-traffic-based throttling) that no other server currently has.'

build() {
 WD="WEBDIR=/srv/http"
 CD="CGIBINDIR=/usr/share/thttpd/cgi-bin"
 WG="WEBGROUP=thttpd"

 ./configure \
 --prefix=/usr \
 --sysconfdir=/etc \
 --localstatedir=/var \
 $OPTS &&
 make $WD $CD $WG &&
 make $WD $CD $WG install DESTDIR=$DESTDIR &&
 mkdir -p $DESTDIR/etc &&
 install  -m 0600 $SCRIPT_DIR/thttpd.conf $DESTDIR/etc/thttpd.conf
}
