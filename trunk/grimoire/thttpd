   VERSION=( "2.25b" "2.25" "2.24" )
    IGNORE="beta"
  CATEGORY="network/web"
 ATTRIBUTE="console server old_init"
    SOURCE="thttpd-$VERSION.tar.gz"
       URL="http://www.acme.com/software/thttpd/"
  HOMEPAGE="http://www.acme.com/software/thttpd/"
       REQ="init-functions"
  EPROVIDE="web-server"
  ESTIMATE="40"
      DESC="thttpd is a throttling httpd server.
thttpd is a simple, small, fast and secure HTTP server.
It doesn't have a lot of special features
but it suffices for most uses of the web.
It is faster than Apache and it has one extremely useful feature
(URL-traffic-based throttling) that no other server currently has."

build() {
mkdir    -p -m 0755 /srv/http
groupadd -K GID_MIN=768 -K GID_MAX=999    thttpd                     2>/dev/null
useradd  -K UID_MIN=768 -K UID_MAX=999 -g thttpd -d /srv/http thttpd 2>/dev/null
chown thttpd:thttpd /srv/http

  WD="WEBDIR=/srv/http"
  CD="CGIBINDIR=/usr/share/thttpd/cgi-bin"
  WG="WEBGROUP=thttpd"

  ./configure           \
  --build=$BUILD        \
  --prefix=/usr         \
  --sysconfdir=/etc     \
  --localstatedir=/var  \
  $OPTS                 &&
  make             $WD  $CD  $WG  &&
  prepare_install                 &&
  make    install  $WD  $CD  $WG  &&
  install  -m 0600 $SCRIPT_DIR/thttpd.conf  /etc/thttpd.conf
}
