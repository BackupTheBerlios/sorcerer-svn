# lm_sensors might be merely optional?

   version stable 2.4.2
   require cpufrequtils init-functions lm_sensors
  category utility
 attribute console
    source $SOURCEFORGE_URL cpufreqd/Source%20packages/$VERSION/cpufreqd-$VERSION.tar.gz
  homepage http://sourceforge.net/projects/cpufreqd
      info last  20100418
      desc 'adjusts the CPU frequency governor according to rules

cpufreqd is a small daemon to adjust cpu speed and voltage
for kernels using any of the cpufreq drivers available.
The CpuFreq patch has been included in the 2.6 tree,
2.4 kernels have to be patched.

cpufreqd is meant to be a replacement of the
speedstep applet you can find in Windows.
It monitors battery level, AC state,
and running programs and adjusts the frequency
governor according to a set of rules specified
in the config file.'

build(){
 case ${VERSION} in
  1.*) CFILE='main.c' ;;
  2.*) CFILE='src/daemon_utils.c' ;;
 esac 
 sed -i 's:fprintf(pid, "\%d":fprintf(pid, "\%d\\n":'  "$CFILE"	&&

 default_build
}
