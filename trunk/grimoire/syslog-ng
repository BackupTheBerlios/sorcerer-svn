   VERSION=( "1.6.8" "1.6.7" "1.6.6" "1.6.5" "1.6.4" "1.6.3" "1.6.2" "1.6.1" )
  CATEGORY="log"
 ATTRIBUTE="server"
    SOURCE="syslog-ng-$VERSION.tar.gz"
  HOMEPAGE="http://www.balabit.hu"
       URL="http://www.balabit.hu/downloads/syslog-ng/${VERSION:0:3}/src"
  EPROVIDE="system-logger"
       REQ="flex libol"
  ESTIMATE="63"
      DESC="sysklog-ng is an enhanced sysklogd replacement
syslog-ng, as the name shows, is a syslogd replacement,
but with new functionality for the new generation.
The original syslogd allows messages only to
be sorted based on priority/facility pairs;
syslog-ng adds the possibility to filter
based on message contents using regular expressions.
The new configuration scheme is intuitive and powerful.
Forwarding logs over TCP and remembering all forwarding
hops makes it ideal for firewalled environments."

build() {
finish_install() {
  if  [  !     -f                      /etc/syslog-ng/syslog-ng.conf  ];
  then  mkdir  -p                      /etc/syslog-ng
        cp  doc/syslog-ng.conf.sample  /etc/syslog-ng/syslog-ng.conf
  fi
  install -m 700  $SCRIPT_DIR/syslog-ng  /etc/init.d
}

  sed  -i  "s/-O2/$CFLAGS/"  configure
  default_build  &&
  finish_install
}

post_install() {
  /lib/lsb/install_initd /etc/init.d/syslog-ng
  /etc/init.d/syslog-ng start
  true
}

pre_remove() {
  /etc/init.d/syslog-ng stop
  /lib/lsb/remove_initd /etc/init.d/syslog-ng
}
