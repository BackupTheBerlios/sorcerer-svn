# If this fails to compile
# then recompile qt-everywhere-opensource and try compiling this spell again.

    stable src-0.1.0
   require qt-everywhere-opensource
  category graphic
 attribute kde4
 attribute broke
    source http://qtscriptgenerator.googlecode.com/files/qtscriptgenerator-$VERSION.tar.gz
  homepage http://code.google.com/p/qtscriptgenerator/
  estimate 8000
      desc 'tool that generates Qt bindings for Qt Script.
Generated bindings provide access to substantial portions
of the Qt API from within Qt Script.'

build(){ (
 case $VERSION in
  src-0.1.0) patch -p1 < $SCRIPT_DIR/qtscriptgenerator-0.1.0.patch ;;
 esac
 export PKG_CONFIG_PATH=/opt/kde4/lib/pkgconfig
 export            PATH="/opt/kde4/bin:$PATH"
 export           QTDIR=/opt/kde4
 cd generator  &&
 qmake && make &&
 ./generator   &&
 cd ..         &&
 cd qtbindings &&
 qmake && make &&
 prepare_install &&
 mkdir -pv  /opt/kde4/lib/kde4/plugins/script &&
 cp    -avt /opt/kde4/lib/kde4/plugins/script/ ../plugins/script/*
) }
