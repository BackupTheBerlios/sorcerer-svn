   VERSION=( 20080121-0 )
  CATEGORY='utility'
 ATTRIBUTE='console'
  HOMEPAGE='http://sorcerer.silverice.org/'
       REQ=( ''
             ':critical::detect and fix breaks involving glibc ncurses readline ELF libraries'
             ':health::verify and correct md5sums for files of installed spells'
             ':neglect::update boxes not updated during last 2 weeks'
             ':stall::restart stalled cast and leech' )
  ESTIMATE='10'
      DESC='sorcery-immune provides an immune system

Computer immune systems are similar to human immune systems.
They do not prevent problems from occuring.
But they do detect and correct problems.

sorcery-immune can do 4 checks:

Detect and fix breaks involving the ELF libraries from
glibc, ncurses and readline once every 2 minutes.

Verify md5sums of installed files once per day
and re-cast installed spells with incorrect md5sums
for installed files that are not configuration files.

Boxes not updated for 2 weeks can be updated by immune.

Stalled cast and stalled immune processing can be
detected and restarted once per hour.'

build(){
 sed -i "s:OPTS=.*:OPTS='$OPTS':" $SCRIPT_DIR/init.d.on/immune
 prepare_install
 mkdir  -pvm 0755 /usr/{/libexec/sorcery,sbin}
 install -vm 0700 $SCRIPT_DIR/immune.wrap /usr/sbin/immune
 install -vm 0600 $SCRIPT_DIR/immune      /usr/libexec/sorcery
}
