#!/bin/bash

### BEGIN INIT INFO
# Default-Mode: 510
# Required-Start: $network coda
# Required-Stop:  $network
# Should-Start: venus.cache
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: venus provides the coda client.
### END INIT INFO

. /lib/lsb/init-functions

PIDF=/usr/coda/venus.cache/pid
SERV=/usr/sbin/venus
NAME=venus

start(){
 run(){
  . $( codaconfedit venus.conf )
  vutil --swaplogs
  venus &>/dev/null
  start_daemon -p "$PIDF" $SERV
 }

 if   log_warning_msg "$NAME starting"; run
 then log_success_msg "$NAME started"
 else log_failure_msg "$NAME not started"; status
 fi
}

parse "$@"
