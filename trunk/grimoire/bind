   VERSION=( "9.3.2" "9.3.1" "9.3.0" "9.2.3" "9.2.2-P3" "9.2.2" "9.2.1" )
  CATEGORY="network/dns"
 ATTRIBUTE="console client server"
    SOURCE="bind9/$VERSION/bind-$VERSION.tar.gz"
       URL="ftp://ftp.isc.org/isc/"
#      URL="$ISC_URL"
  HOMEPAGE="http://www.isc.org/products/BIND"
       REQ="openssl"
   PROTECT="/etc/bind
            /var/chroot/bind"
#   PROTECT="                /etc/bind/rndc.key
#            /var/chroot/bind/etc/bind/rndc.key"
  ESTIMATE="651"
      DESC="bind contains a DNS server and dig
bind (Berkeley Internet Name Domain) is an implementation
of the Domain Name System (DNS) protocols and provides an
openly redistributable reference implementation of the
major components of the Domain Name System, including:

* a Domain Name System server (named)
* a Domain Name System resolver library
* tools for verifying the proper operation of the DNS server"


build() {
  conf_install()  {
    SNC="$SCRIPT_DIR/named.conf"
    SNR="$SCRIPT_DIR/named.root"
    RES="$SCRIPT_DIR/resolv.conf"
    JAIL="/var/chroot/bind"

    install  -d  -m 0755  -o bind  -g bind        $JAIL/var/run
    install  -d  -m 0755  -o bind  -g bind        $JAIL/etc/bind
    install      -m 0644  -o bind  -g bind  $SNR  $JAIL/etc/bind

    [  -f  $JAIL/etc/bind/named.conf  ]  ||
    install      -m 0644  -o bind  -g bind  $SNC  $JAIL/etc/bind
    [  -f  $JAIL/etc/bind/rndc.key    ]  ||
    rndc-confgen  -a  -u bind  -t $JAIL
    true
  }

  groupadd  bind            2>/dev/null
  useradd   bind  -g  bind  2>/dev/null

  ./configure             \
  --prefix=/usr           \
  --sysconfdir=/etc/bind  \
  --localstatedir=/var    &&
  make                    &&
  prepare_install         &&
  make    install         &&
     conf_install
}
