# Avahi 0.6.27 still requires gobject-introspection version 0.6.14

# avahi correctly uses pkgconfig files to locate install locations for:
# qt-x11-free and qt-everywhere-opensource
# avahi-autoipd if started should be started from a template
# provided by networks rather than a separate init script
# since the purpose of avahi-autoipd is to automatically assign
# an IP address to a network interface.
# 0.6.21 may have acquired a requirement on libcap

      opts --disable-gtk3 --disable-gtk
    stable 0.6.27 0.6.25 0.6.24 0.6.23 0.6.22 0.6.21 0.6.20
case $VERSION in
 0.6.27)
      opts --enable-introspection=no ;;
esac
   require avahi qt-everywhere-opensource 
      opts --disable-gtk --disable-qt3 --with-distro=none --disable-mono --disable-python --disable-static --enable-compat-libdns_sd
  category utility
 attribute library kde4
    source http://avahi.org/download/avahi-$VERSION.tar.gz
  homepage http://avahi.org/
  estimate 1100
      desc 'qt-everywhere-opensource bindings for avahi'

build(){
 export PKG_CONFIG_PATH=/opt/kde4/lib/pkgconfig
 ./configure           \
  --sysconfdir=/etc    \
  --localstatedir=/var \
  --prefix=/opt/kde4   \
 $OPTS &&
 make  &&
 make install "DESTDIR=$DESTDIR"
}
