# intiramfs spell is for the Sorcerer distribution only
# Copyright 2007-2012 by Kyle Sallee, all rights reserved.

with version stable 20130221
with base    coreutils cpio findutils grep init-scripts module-init-tools sed udev util-linux
with role    administration/bootloader
with trait   archive_off console solo
with info    last 20130221
with info    cite "creates the Sorcerer's keep

The Sorcerer's keep is an inital random access memory file system
used during booting and retained during normal operation.
The keep can be used to troubleshout problems.
While logged into the keep on virtual console #7 or by
# ssh -p 30 127.0.0.1
the real root filesystem will be mounted as /media/root/

Modular kernels often lack compiled in drivers
that are required for mounting the root filesystem.
An initramfs can be essential for booting boxes with a modular kernel.
Even if the Sorcerer's keep is not desired
then a box will probably be UNABLE to boot without it.
Dispel this at the risk of GREAT peril!

A bash shell can be immediately provided
instead of booting normally
when bash is appened to kernel parameters.
This may be more useful than appending rdinit=/bin/bash
when the only keyboard is USB."

build(){
 mkdir  -pvm 755 $DESTDIR/sbin
 install -vm 700 $SCRIPT_DIR/init  $DESTDIR/init
 ln      -fs /etc/init.d/initramfs $DESTDIR/sbin/mkinitrd
 ln      -fs /etc/init.d/initramfs $DESTDIR/sbin/mkinitrf
}
