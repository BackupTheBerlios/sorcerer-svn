# intiramfs spell is for the Sorcerer distribution only
# Copyright 2007 2008 by Kyle Sallee, all rights reserved.

    stable 20080813
   require coreutils cpio findutils grep init-scripts module-init-tools sed udev util-linux
  category administration/bootloader
 attribute archive_off console solo
      desc 'initramfs provides an initramfs for use during booting
An initramfs is essential for booting boxes with a modular kernel
that does not have the filesystem and hardware drivers
compiled into the kernel that are required to mount the root filesystem.'

build(){
 prepare_install &&
 install -vm 700 $SCRIPT_DIR/init /init &&
 ln      -vsf /etc/init.d/initramfs /sbin/mkinitrd &&
 ln      -vsf /etc/init.d/initramfs /sbin/mkinitrf
}

pre_remove(){
 if [ -z "$UPGRADING" ]; then
  rm  -f /boot/*/initrf* /init
  sed -i       "/initrf/d" /etc/lilo.conf
  update_etc_lilo_conf
 fi
 default_pre_remove
}
