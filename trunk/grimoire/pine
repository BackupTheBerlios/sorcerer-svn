   VERSION=( "4.62" "4.61" "4.60" )
      SAFE=( "4.62" "4.61" "4.60" )
  CATEGORY="editor email"
 ATTRIBUTE="console client server"
    SOURCE="pine$VERSION.tar.bz2"
       URL="ftp://ftp.cac.washington.edu/pine"
  HOMEPAGE="http://www.washington.edu/pine"
   PROVIDE="email-client pop3 pop3s imap imaps"
       REQ=( "ncurses"
             "Linux-PAM:::"
             "stunnel:::for imaps or pops"
             "xinetd:::for running servers" )
  ESTIMATE="246"
      DESC="pine is a text-based MIME Email client.

pine is a tool for reading, sending, and managing electronic mail.

The source also installs:
imapd	an Internet Mail delivery server
pop3d	an Internet Mail delivery server
pico	a text edtior
pine	console email client"

make_install()  {
  cd  bin
  install  -m 0755 -o root -g root  imapd   /usr/sbin
  install  -m 0755 -o root -g root  ipop2d  /usr/sbin
  install  -m 0755 -o root -g root  ipop3d  /usr/sbin
  install  -m 0755 -o root -g root  rpload  /usr/sbin
  install  -m 0755 -o root -g root  rpdump  /usr/sbin
  install  -m 0755 -o root -g root  mtest   /usr/bin
  install  -m 0755 -o root -g root  pico    /usr/bin
  install  -m 0755 -o root -g root  pilot   /usr/bin
  install  -m 0755 -o root -g root  pine    /usr/bin

  mkdir    -p  /usr/include/imap  /usr/man/man1
  chmod  0755  /usr/include/imap  /usr/man/man1

  cd       ../c-client
  chmod  0644  *.h
  cp       -f  *.h  /usr/include/imap
  install  -m 0644  -o root  -g root  c-client.a  /usr/lib/libc-client.a
  cd       ..

  find  doc  -name \*.1  -type f  |
  while  read;  do
    gzip     -9  $REPLY
    install  -m 0644  -o root  -g root  $REPLY.gz  /usr/man/man1
  done

  if  spell_installed  stunnel;  then
    ln  -sf  stunnel.pem  /etc/ssl/certs/imapd.pem
    ln  -sf  stunnel.pem  /etc/ssl/certs/ipop3d.pem
  fi
}

##############################################
build() {
	unset  SSL

	if  spell_installed  openssl;  then
		SSL="NOSSL=unix  SSLCERTS=/etc/ssl/certs SSLINCLUDE=/usr/include/openssl SSLLIB=/usr/lib"
	fi

	if    spell_installed  Linux-PAM
	then  ./build  DEBUG="$CFLAGS"  $SSL  lnp
	else  ./build  DEBUG="$CFLAGS"  $SSL  slx
	fi               &&

	prepare_install  &&
	make_install
}

