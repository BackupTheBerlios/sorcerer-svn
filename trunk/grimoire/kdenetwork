inherit kde
  CATEGORY="network/email network/news"
       REQ=( "gnupg kdelibs libXScrnSaver libXtst libidn openslp ortp speex"
             "openssl:--with-ssl:--without-ssl:for SSL support"
             "wireless_tools:--with-wifi:--without-wifi:for wireless networking support"
             "xmms:--with-xmms:--without-xmms:for kopete chat client to display what you are listening to with xmms" )

#            "ortp:--enable-jingle:--disable-jingle:for Jabber Jingle voice support"
# Compiling with jingle enabled causes compile error during kopete


#            "arts:--with-arts:--without-arts:for sound support"
#            ":--enable-sametime-plugin:--disable-sametime-plugin:build the Kopete Sametime plugin" )
# sametime plugin no longer exists

# speex may only be required for jabber jingle support?  Not sure.
# kopete jabber jingle may have optional requirement on ilbc
# something in kdenetwork may have optional requirement on gsm

case  $VERSION  in
  3.5.5)  SAFE=( "3.5.5" )
 SOURCE[1]="security_patches/post-3.5.5-kdenetwork-ksirc.diff"  ;;
  3.4.1)  SAFE=( "3.4.1" )
 SOURCE[1]="security_patches/post-3.4.1-kdenetwork-libgadu.patch"  ;;
esac
  ESTIMATE="11650"
      DESC="kdenetwork contains an email and news client, and other programs.
kdenetwork contains network applications.
Currently contains the mail program, 
the news reader, and several other 
network-related programs like kopete."

build() {
  case  $VERSION  in
    3.5.5)  patch  -p0  <  $SOURCE_CACHE/kdenetwork/$VERSION/${SOURCE[1]##*/}  ;;
    3.4.1)  patch  -p0  <  $SOURCE_CACHE/kdenetwork/$VERSION/${SOURCE[1]##*/}  ;;
  esac
  kde_build
}


current()  {
  case  $VERSION  in
    3.5.5) grep -qx "patching file ksirc/iocontroller.cpp"  $COMPILE_LOGS/kdenetwork ;;
    3.4.1) grep -qx "patching file kopete/protocols/gadu/libgadu/pubdir50.c"  $COMPILE_LOGS/kdenetwork ;;
  esac
}
