inherit kde
  CATEGORY='network/email network/news'
# decibel is not yet ready for production use.
#             'decibel:::for kopete telepathy protocol'
       REQ=( 'kdebase-workspace kdepimlibs'
             'LibVNCServer:::to build Krfb and VNC support in Krdc'
             'avahi:::for service discovery and Krfb, Krd, dnssd ioslave'
             'jpeg:::for JPEG images in Krdc'
             'libidn:::for internationalized DNS in Kopete Jabber plugin'
             'libxslt:::for ...'
             'openslp:::for SLP support in Krfb'
             'openssl:::for ...'
             'qca:::to build kopete groupwise and jabber protocols'
             'sqlite:::for kopete statistics plugin'
             'xmms:::for music playing' )

case  $VERSION  in
  3.5.5)  SAFE=( "3.5.5" )
 SOURCE[1]="security_patches/post-3.5.5-kdenetwork-ksirc.diff"  ;;
  3.4.1)  SAFE=( "3.4.1" )
 SOURCE[1]="security_patches/post-3.4.1-kdenetwork-libgadu.patch"  ;;
esac
  ESTIMATE='4500'
      DESC='kdenetwork contains an email and news client, and other programs.
kdenetwork contains network applications.
Currently contains the mail program, 
the news reader, and several other 
network-related programs like kopete.'

build() {
  case  $VERSION  in
    3.5.5)  patch  -p0  <  $SOURCE_CACHE/kdenetwork/$VERSION/${SOURCE[1]##*/}  ;;
    3.4.1)  patch  -p0  <  $SOURCE_CACHE/kdenetwork/$VERSION/${SOURCE[1]##*/}  ;;
  esac
  kde_build
}


current()  {
  case  $VERSION  in
    3.5.5) grep -qx "patching file ksirc/iocontroller.cpp"  $COMPILE_LOGS/kdenetwork ;;
    3.4.1) grep -qx "patching file kopete/protocols/gadu/libgadu/pubdir50.c"  $COMPILE_LOGS/kdenetwork ;;
  esac
}
