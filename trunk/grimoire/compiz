# compiz 0.7.4 not compatibile with kde 4.0.3
#            ':--enable-kde4:--disable-kde4:for kde window decorator'
# kde3 support appears to not work.
#            ':--enable-kde:--disable-kde:for kde window decorator'

  category window-manager
 attribute x11
  homepage http://compiz-fusion.org
       url http://releases.compiz-fusion.org/
    stable 0.8.2 0.7.6 0.7.4 0.6.2 0.6.0
      opts --enable-static=no
if [[ $SPELL == compiz ]]; then
   require dbus-glib GConf libwnck
  optional gnome-control-center --enable-gnome   --disable-gnome    for gnome settings module
  optional fuse                 ''               --disable-fuse     for fuse support
  optional librsvg              --enable-librsvg --disable-librsvg  for svg support
  optional metacity             ''               --disable-metacity for metacity theme support
  optional kdelibs-v4           --enable-kde4    --disable-kde4
# appears to have no effect
# optional kdelibs-v3           --enable-kde     --disable-kde
    source $VERSION/compiz-$VERSION.tar.bz2
  estimate 2500
      desc 'compiz provides a compositing window manager that uses OpenGL'
fi

build(){
if echo $OPTS | grep -qw '\--enable-kde4'; then PATH+=':/opt/kde4/bin'; fi
if echo $OPTS | grep -qw '\--enable-kde';  then PATH+=':/opt/kde3/bin'; fi
default_build
}
