   VERSION=( "2.12r" "2.12q" "2.12p" "2.12o" "2.12m" )
      SAFE=( "2.12r" "2.12q" )
    IGNORE="pre"
  CATEGORY="utility"
 ATTRIBUTE="console"
    SOURCE="pub/linux/utils/util-linux/util-linux-$VERSION.tar.gz"
       URL="$KERNEL_URL"
#      URL="http://ftp.cwi.nl/aeb/util-linux/"
#      URL="ftp://ftp.win.tue.nl/pub/linux-local/utils/util-linux/"
  HOMEPAGE="ftp://ftp.win.tue.nl/pub/linux-local/utils/util-linux/"
       REQ=( "e2fsprogs gettext ncurses zlib"
             "libselinux:--with-selinux::for selinux support"
             ":--utc:--localtime:Does the hardware clock store time in UTC" )
   PROTECT="/usr/bin/column
            /usr/bin/renice"
   EXCLUDE="/etc/fstab
            /etc/mtab"
  ESTIMATE="233"
      DESC="util-linux contains essential utilities.
util-linux is a suite of essential utilities for any Linux system.
Its primary audience is system integrators and DIY Linux hackers.
Util-linux is attempting to be portable, but the only platform it
has been tested much on is Linux i386.
It contains the following programs:
agetty arch blockdev cal cfdisk chfn chkdupexe chsh clear col colcrt
colrm column ctrlaltdel cytune ddate dmesg elvtune fastboot fasthalt
fdformat fdisk fsck.cramfs fsck.minix getopt halt hexdump hwclock
initctl ipcrm ipcs isosize kill last line logger login look mcookie
mesg mkfs mkfs.bfs mkfs.cramfs mkfs.minix mkswap more mount namei need
passwd pg pivot_root ramsize raw rdev readprofile reboot rename renice
rescuept reset rev rootflags script setfdprm setsid setterm sfdisk
shutdown simpleinit sln swapoff swapon tunelp ul umount vidmode vipw
wall whereis write."

build()  {
  if    echo  "$OPTS"  |  grep  -q  "\--with-selinux"  &&
        spell_installed  $( get_provider  libselinux  )
  then  sed  -i  "s:HAVE_SELINUX=no:HAVE_SELINUX=yes:"  MCONFIG
  fi

  if    echo  "$OPTS"  |  grep  -q  "\--localtime"
  then  sed  -i  "s:--utc:--localtime:"  $SCRIPT_DIR/init.d/hwclock
  else  sed  -i  "s:--localtime:--utc:"  $SCRIPT_DIR/init.d/hwclock
  fi

  unset  OPTS
  sed  -i  "s:HAVE_SLN=no:HAVE_SLN=yes:
            s:\$(OPT)::
            s:_WRITE=no:_WRITE=yes:"  MCONFIG
  default_build
}
