# must check for new releases manually
# Only installs ar libraries and not ELF.
# Very odd.
# OpenGTL refuses to compile with llvm when llvm has assertions enabled
# -DCMAKE_BUILD_TYPE=RELEASE release builds turn off assertions support

   version stable 3.0 2.9 2.8 2.7 2.6
   require gcc-g++
      opts --enable-shared
#     opts -DCMAKE_BUILD_TYPE=RELEASE -DBUILD_SHARED_LIBS:BOOL=TRUE
  category development/emulator
# lto compilation requires too much RAM
 attribute console library lto_off makej multilib-concurrent
#   source http://www.llvm.org/releases/$VERSION/llvm-$VERSION.tgz
    source http://www.llvm.org/releases/$VERSION/llvm-$VERSION.tar.gz
      info last 20111201
      info home http://www.llvm.org
      vurl http://www.llvm.org/releases/
      desc 'low level virtual machine'

build(){
# if     [[ $HOSTTYPE == x86_64 ]] &&
#      ! [[ $CFLAGS   =~ -m32   ]]
# then opts -DLLVM_LIBDIR_SUFFIX=64
# fi

# Did not work.
 if     [[ $HOSTTYPE == x86_64 ]] &&
      ! [[ $CFLAGS   =~ -m32   ]]
 then opts --libdir=/usr/lib64
 fi

 rm -f CMakeLists.txt
 default_build &&
 if     [[ $HOSTTYPE == x86_64 ]] &&
      ! [[ $CFLAGS   =~ -m32   ]]
 then mv -v $DESTDIR/usr/lib{,64}
 fi
}
