   version stable 5.9 5.7 5.6
   require gawk
      opts --without-debug
  category development
 attribute console library lto makej multilib-dual solo
    source $GNU_URL ncurses/ncurses-$VERSION.tar.gz
      info home http://www.gnu.org/software/ncurses/ncurses.html
   protect /usr/share/terminfo
      desc 'displays and updates text on text-only terminals
The ncurses (new curses) library is a free software
emulation of curses in System V Release 4.0 and more.
It uses terminfo format, supports pads and color
and multiple highlights and forms chracters and
function-key mapping, and has all the other
SYSV-curses enhancements over BSD curses.
The distribution includes the library and support
utilities, including a terminfo compiler tic,
a decompiler infocmp, clear, tput, tset,
and a termcap conversion tool captoinfo.'

build(){
 move_clear_tput(){
  mkdir -pvm 755 $DESTDIR/bin
  mv     -v      $DESTDIR/{usr/bin/{clear,tput},bin/}
 }

 if    [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then  LIBDIR=/lib64
 else  LIBDIR=/lib
 fi

 mkdir -pvm 755 $DESTDIR/usr/{lib,share/tabset}

# sed -i 's:-L${exec_prefix}/lib::' misc/ncurses-config.in

 ./configure       \
 --prefix=/usr     \
 --libdir=$LIBDIR  \
 --with-normal     \
 --with-shared     \
 --disable-termcap \
 $OPTS &&
 make  &&
 make install DESTDIR=$DESTDIR &&
 make clean &&

 ./configure       \
 --prefix=/usr     \
 --libdir=$LIBDIR  \
 --with-normal     \
 --with-shared     \
 --disable-termcap \
 --enable-widec    \
 $OPTS  &&
 make   &&
 cd c++ &&
 make   &&
 make install DESTDIR=$DESTDIR &&
 cd ..  &&
 make install DESTDIR=$DESTDIR &&
 move_clear_tput
}

current(){
 case $VERSION in
  5.9) grep -q "^/bin/clear" $INSTALL_LOGS/ncurses ;;
 esac
}
