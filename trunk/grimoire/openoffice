   VERSION=( "1.1.3" "1.1.0" "1.0.3.1" )
      SAFE=( "1.1.3" )
  CATEGORY="office"
 ATTRIBUTE="i386 noheal x11 broken"
# The tarball Jan rolled for this spell no longer exists
    SOURCE="openoffice_net_install-${VERSION}.tar.bz2"
       URL="http://sorcerer.wox.org/download/sources/openoffice/$VERSION"
  HOMEPAGE="http://www.openoffice.org"
  disable  archive
  disable  necropolis
       REQ=( "unzip x11 zip"
             "java:::for java support" )
      DESC="openoffice provides the Open Source Office Suite.
openofice provides an open source office suite that
runs on all major platforms and provide access to
all functionality and data through open-component
based APIs and an XML-based file format.
It can open M$ Office Documents.

Note
====
Network installation archive.
Run 'soffice' to make workstation
installation for each user."

fix_path() {
  files=$( grep -r -l "/tmp/OpenOffice.org${VERSION}" /opt/openoffice )
  for i in $files; do
      sed -i "s:/tmp/OpenOffice.org${VERSION}:/opt/openoffice:g" $i
  done
}

current() {
 case $VERSION in
   1.1.3) files=$( grep -r -l "/tmp/OpenOffice.org${VERSION}" /opt/openoffice )
          [ "${files}x" == "x" ]  ;;
 esac
}

build() {
install_oo()  {
  if    !  [   -f  /opt/openoffice ]
  then  mkdir  -p  /opt/openoffice
  fi
  tar  -cpf  -  -C  $BUILD_DIR  .  |         \
  tar  -xpf  -  -C  /opt/openoffice
  for  APP  in  swriter  scalc sdraw          \
                simpress smath soffice
  do  ln  -vsf  /opt/openoffice/program/$APP  \
                /usr/bin/$APP
  done
  case $VERSION in
    1.1.3)  fix_path  ;;
  esac
}

prepare_install  &&
install_oo
ldconfig
rm  -rf  $LIBRARY_CACHE/openoffice
}

post_remove()  {
ldconfig
rm  -rf  $LIBRARY_CACHE/openoffice
}
