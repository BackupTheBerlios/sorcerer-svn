# Source does not compile how it is told.

   version stable 1.8.10 1.8.9 1.8.8
   version unstable 1.9.17 1.9.16 1.9.15
   require bzip2 gcc-g++ perl zlib
  category security/encryption
 attribute library
#attribute multilib-dual
 attribute multilib-fail
    source http://files.randombit.net/botan/Botan-$VERSION.tgz
      vurl http://botan.randombit.net/download.php
      info home  http://botan.randombit.net
# has various documentation available as hyperlink from homepage
 freshmeat botan
      desc 'library of cryptographic algorithms
Botan (formerly OpenCL) is a library of
cryptographic algorithms, written in C++.
It currently includes a wide selection of
block and stream ciphers, public key algorithms,
hash functions, and message authentication codes,
plus a high level filter-based interface.'

build(){
 local SETARCH

 if    [[ $HOSTTYPE == x86_64 ]]; then
  if   [[ $CFLAGS   =~ -m32   ]]
  then export CFLAGS+=' -m32'; opts --cpu=i686;  SETARCH="setarch i686"
  fi
 fi

 $SETARCH ./configure.py --cc=gcc --os=linux --disable-debug --prefix=/usr $OPTS &&
 $SETARCH make install "DESTDIR=$DESTDIR/usr" &&
 if     [[ $HOSTTYPE == x86_64 ]] &&
      ! [[ $CFLAGS   =~ -m32   ]]
 then mv $DESTDIR/usr/lib{,64}
 fi

# sed -i 's:-L${libdir}::' $DESTDIR/usr/lib/pkgconfig/*.pc &&
# if    [[ $HOSTTYPE == x86_64   ]]; then
#  if   [[ $CFLAGS   =~ -m32     ]]; then mv $DESTDIR/usr/lib{,32}
#                                    else mv $DESTDIR/usr/lib{,64}
#    if [[ -d $DESTDIR/usr/lib32 ]]; then mv $DESTDIR/usr/lib{32,}; fi
#  fi
# fi
}
