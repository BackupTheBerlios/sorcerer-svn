# 0.46 causes kdepimlibs-v4 4.5.0 and 4.5.1 to fail compilation

   version stable 0.44 0.43
   version unstable 0.46
  category utility/time
 attribute library
#attribute makej multilib-concurrent
    source $SOURCEFORGE_URL freeassociation/libical/libical-$VERSION/libical-$VERSION.tar.gz
#   source http://www.softwarestudio.org/download/libical-$VERSION.tar.gz
# homepage http://www.softwarestudio.org/libical/
      desc 'library for iCal protocols: iCAL core, iTIP, iMIP, iRIP, CAP.
libical is an Open Source implementation of the IETF iCalendar
Calendaring and Scheduling protocols. (RFC 2445, 2446, and 2447).
It parses iCal components and provides a C API for manipulating
the component properties, parameters, and subcomponents.'

build(){
# rm -f CMakeLists.txt
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then opts -DLIB_SUFFIX:STRING=64
 fi
 default_build &&
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then sed -i 's:libdir=${exec_prefix}/lib$:libdir=${exec_prefix}/lib64:' $DESTDIR/usr/lib64/pkgconfig/libical.pc 
 fi
}
