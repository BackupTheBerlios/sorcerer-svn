# libgnutls-config removed used pkg-config instead to check for gnutls
# 3.0.0 failed compilation
# 3.x series is xz compressed
# info page generation can fail when multilib-concurrent
# 3.0.7 is alo a security fix for when 3.0.x becomes usable

# 3.1.0 failed compilation

   version   stable 3.1.2 3.1.1 3.0.21 3.0.20
   require guile libcfg+ libgcrypt libtasn1 ncurses nettle p11-kit pkgconfig readline zlib
  optional gcc-g++
  optional lzo2 --with-lzo
      opts --enable-static=no --disable-rpath
  category security/encryption
 attribute library multilib-dual setarch
#attribute multilib-concurrent
#attribute makej
# Evert sent a compile log that suggested a problem can occur
# when compiling with makej
    source   stable $GNU_URL gnutls/gnutls-$VERSION.tar.xz
    source unstable $GNU_URL gnutls/gnutls-$VERSION.tar.xz
      info last 20120926
      info home http://www.gnu.org/software/gnutls/
      info docs http://www.gnu.org/software/gnutls/documentation.html
      info mail http://www.gnu.org/software/gnutls/lists.html
      desc 'library for SSL
gnutls is the GNU Transport Layer Security Library
is a library which implements a secure layer over
a reliable transport layer such as TCP/IP.
It implements the TLS 1.0 and SSL 3.0 protocols'

build(){
 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 default_build &&
 sed -i 's:, zlib::; s:-lgmp:-lgmp -lz:' $DESTDIR/usr/lib*/pkgconfig/gnutls.pc
}
