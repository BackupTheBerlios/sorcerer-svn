ir_menu(){
 show_menu(){
  dialog --backtitle "Sorcerer Install/Rescue" --title "Task Menu" \
  --stdout --cancel-label Shell --menu "$HELP" 0 0 0 \
  Dialog   "Tutorial" \
  Sentient "Automatic installation of KDE + firefox + xorg" \
  Sorcerer "Menu driven installation"
 }

 while REPLY=$( show_menu ); do
  case $REPLY in
   Dialog)   /sbin/dt ;;
   Sentient) /sbin/sinstall Sentient ;;
   Sorcerer) /sbin/sinstall ;;
  esac
 done
}

wait_for_prc(){
 while ps   -C prc --no-headers -o fname |
       grep -q prc
 do    sleep 1
 done
 sleep 5
}

if   (( UID == 0 )) && ! pgrep sinstall >/dev/null
then wait_for_prc; ir_menu
else unset ir_menu
fi
