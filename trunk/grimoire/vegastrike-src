with version stable 0.5.1.r1
case $VERSION in
 0.5.1.r1)
with base    ffmpeg-v0.7 ;;
esac
with base    ffmpeg freeglut libtheora ogre
with role    game game/3d/flightsim
with trait   optimize x11
with trait   broke
with source  $SOURCEFORGE_URL vegastrike/vegastrike/${VERSION:0:5}/vegastrike-src-$VERSION.tar.bz2
with info    last 20120405
with info    home http://vegastrike.sourceforge.net/
with info    cite 'engine source tarball for vegastrike
Run vegastrike while the present working directory is
/usr/share/vegastrike directory'

build(){
 ffmpeg_legacy(){
  local SUFFIX

  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then SUFFIX=64
  else SUFFIX=
  fi

  export   CFLAGS+=' -I/opt/ffmpeg/0.7/usr/include'
  export CXXFLAGS+=' -I/opt/ffmpeg/0.7/usr/include'
  export      PKG_CONFIG_PATH="/opt/ffmpeg/0.7/usr/lib$SUFFIX:$PKG_CONFIG_PATH"
  export LDFLAGS+=" -L/opt/ffmpeg/0.7/usr/lib$SUFFIX -Wl,-rpath,/opt/ffmpeg/0.7/usr/lib$SUFFIX"
 }

 case $VERSION in
  0.5.1.r1) ffmpeg_legacy
            export   CFLAGS+=' -fpermissive'
            export CXXFLAGS+=' -fpermissive';;
 esac

 ./configure --prefix=/usr $OPTS &&
 make &&
 make install "DESTDIR=$DESTDIR"
}
