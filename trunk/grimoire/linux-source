# 3.9.4 is a bit crashy on the shutdown and unmounting.

with info    last 20130610
with version stable	3.9.5		3.9.4		3.9.3		3.9.2		3.9.1		3.8.12		3.8.11		3.8.10
with version 3.9.x	3.9.5		3.9.4		3.9.3		3.9.2		3.9.1		3.9		3.8.12		3.8.11
with version 3.8.x	3.8.13		3.8.12		3.8.11		3.8.10		3.8.9		3.8.8		3.8.7		3.8.6		3.8.5		3.8.4		3.8.3		3.8.2		3.8.1		3.8.0
with version 3.7.x	3.7.10		3.7.9		3.7.8		3.7.7		3.7.6		3.7.5		3.7.4		3.7.3		3.7.2		3.7.1		3.7.0
with version 3.6.x	3.6.11		3.6.10		3.6.9		3.6.8		3.6.7		3.6.6		3.6.5		3.6.4		3.6.3		3.6.2		3.6.1		3.6
with version 3.5.x	3.5.7		3.5.6		3.5.5		3.5.4		3.5.3		3.5.2		3.5.1		3.5
with version 3.4.x	3.4.47		3.4.46		3.4.45		3.4.44		3.4.43		3.4.42		3.4.41		3.4.40		3.4.39		3.4.38		3.4.37		3.4.36		3.4.35		3.4.34		3.4.33		3.4.32		3.4.31		3.4.30		3.4.29		3.4.28		3.4.27		3.4.26		3.4.25		3.4.24		3.4.23		3.4.22		3.4.21		3.4.20		3.4.19		3.4.18		3.4.17		3.4.16		3.4.15		3.4.14		3.4.13		3.4.12		3.4.11		3.4.10		3.4.9		3.4.8		3.4.7		3.4.6		3.4.5		3.4.4		3.4.3		3.4.2		3.4.1		3.4
with version 3.3.x	3.3.8		3.3.7		3.3.6		3.3.5		3.3.4		3.3.3		3.3.2		3.3.1		3.3
with version 3.2.x	3.2.46		3.2.45		3.2.44		3.2.43		3.2.42		3.2.41		3.2.40		3.2.39		3.2.38		3.2.37		3.2.36		3.2.35		3.2.34		3.2.33		3.2.32		3.2.31		3.2.30		3.2.29		3.2.28		3.2.27		3.2.26		3.2.25		3.2.24		3.2.23		3.2.22		3.2.21		3.2.20		3.2.19		3.2.18		3.2.17		3.2.16		3.2.15		3.2.14		3.2.13		3.2.11		3.2.10		3.2.9		3.2.8		3.2.7		3.2.6		3.2.5		3.2.4		3.2.3		3.2.2		3.2.1		3.2
with version "git 3.2.y"	3.2.46	3.2.45		3.2.44		3.2.43		3.2.42		3.2.41		3.2.40		3.2.39		3.2.38		3.2.37		3.2.36		3.2.35		3.2.34		3.2.33		3.2.32		3.2.31		3.2.30		3.2.29		3.2.28		3.2.27		3.2.26		3.2.25		3.2.24		3.2.23		3.2.22		3.2.21		3.2.20		3.2.19		3.2.18		3.2.17		3.2.16		3.2.15		3.2.14		3.2.13		3.2.11		3.2.10		3.2.9		3.2.8		3.2.7		3.2.6		3.2.5		3.2.4		3.2.3		3.2.2		3.2.1		3.2
with version 3.1.x	3.1.10		3.1.9		3.1.6		3.1.4		3.1.3		3.1.2		3.1.1		3.1
with version 3.0.x	3.0.80		3.0.79		3.0.78		3.0.77		3.0.76		3.0.75		3.0.74		3.0.73		3.0.72		3.0.71		3.0.70		3.0.69		3.0.68		3.0.67		3.0.66		3.0.65		3.0.64		3.0.63		3.0.62		3.0.61		3.0.60		3.0.59		3.0.58		3.0.57		3.0.56		3.0.55		3.0.54		3.0.53		3.0.52		3.0.51		3.0.50		3.0.49		3.0.47		3.0.46		3.0.45		3.0.44		3.0.43		3.0.42		3.0.41		3.0.40		3.0.39		30.0.38		3.0.37		3.0.36		3.0.35		3.0.34		3.0.33		3.0.32		3.0.31		3.0.30		3.0.29		3.0.28		3.0.27		3.0.26		3.0.25		3.0.24		3.0.17		3.0.9		3.0.8		3.0.4		3.0.3		3.0.2		3.0.1		3.0
with version 2.6.39.x	2.6.39.4	2.6.39.3	2.6.39.2	2.6.39.1
with version 2.6.38.x	2.6.38.8	2.6.38.6	2.6.38.5	2.6.38.4	2.6.38.3
with version 2.6.37.x     2.6.37.6	2.6.37.4	2.6.37.3	2.6.36.3
with version 2.6.36.x	2.6.36.4	2.6.36.3	2.6.36.2	2.6.36.1
with version 2.6.35.x	2.6.35.14	2.6.35.13	2.6.35.12	2.6.35.11	2.6.35.10
with version 2.6.34.x	2.6.34.14	2.6.34.13	2.6.34.12	2.6.34.11	2.6.34.10	2.6.34.9	2.6.34.8
with version 2.6.32.x	2.6.32.60	2.6.32.59	2.6.32.41	2.6.32.40	2.6.32.28	2.6.32.24
with version 2.6.30.x	2.6.30.10	2.6.30.9	2.6.30.8
with version 2.6.27.x	2.6.27.62	2.6.27.59	2.6.27.58	2.6.27.57	2.6.27.54
with role    kernel
with trait   data

with source  stable	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.9.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.8.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.7.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.6.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.5.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.4.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.3.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.2.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  "git 3.2.y"	linux-v$VERSION.tar v$VERSION git://git.kernel.org/pub/scm/linux/kernel/git/bwh/linux-3.2.y.git
with source  3.1.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  3.0.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.39.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.38.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.37.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.36.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.35.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.34.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.33.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.32.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.30.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with source  2.6.27.x	$KERNEL_URL pub/linux/kernel/v${VERSION:0:1}.x/linux-$VERSION.tar.xz
with info    home http://www.kernel.org/
with info    cite 'installs linux kernel on /usr/src/linux'

build(){
   if   [ -z "$BUILD_DIR" ]; then return 1
 elif   [ -z "$DESTDIR"   ]; then return 1
 elif ! [ -f "Makefile"   ]; then return 1
 fi

 LC_ALL=C grep -l /bin/pwd $( find * -type f -name Makefile ) |
 xargs -r --max-lines=64 sed -i 's:/bin/pwd:pwd:'

 make  distclean
 mkdir -pvm 755                   "$DESTDIR/"usr/src/
 chown -R root:root "$BUILD_DIR/"
 find               "$BUILD_DIR/" -type d | xargs --max-lines=64 chmod 755
 find               "$BUILD_DIR/" -type f | xargs --max-lines=64 chmod o-w
 mv    -v           "$BUILD_DIR/" "$DESTDIR/"usr/src/linux
                             [ -f "$DESTDIR/"usr/src/linux/Makefile ]
}

post_install(){
 auto_update(){
  local p v=uncertain
  p="$( get_provider "$1" )"
  p="${p:-$1}"

  # [ -f     "$VERSION_INDEX/$p" ] &&
  # read v < "$VERSION_INDEX/$p"
  # if [ "$VERSION" == "$v" ]; then return; fi

  touch "$GRIMOIRE/$p"
  event "$p" "$VERSION"   "Cast New"
  echo  "$p" | pipe_queue "$MOIL_QUEUE"
 }

 touch "$GRIMOIRE"/linux{,-config,-firmware,-headers,-kernel,-modules}

                  auto_update linux
                  auto_update linux-config
                  auto_update linux-headers
 [ -d /boot/ ] && auto_update linux-firmware
 [ -d /boot/ ] && auto_update linux-kernel
 [ -d /boot/ ] && auto_update linux-modules

 default_post_install
}

current(){ [ -f /usr/src/linux/Makefile ]; }
