# 3.4.3 3.4.2 3.4.1 has compile error.
# 3.4.2 is also a security fix.
# 3.3.13 was a security release

   version stable 3.5.11 3.5.10 3.5.9 3.5.8 3.5.7 3.5.6
   version secure 3.5.10 3.5.6
   version legacy 3.4.15
   version unstable 3.6.0pre1
   require avahi e2fsprogs init-functions keyutils libcap ncurses popt readline
  optional Linux-PAM '--with-pam --with-pam_smbpass' --without-pam  for pluggable authentication
  optional cups      ''                              --disable-cups for printing support
  optional dmapi     ''                              ''             for dmapi support
  optional gamin     ''                              ''             for file change notification and gamin can also be used
  optional heimdal   ''                              ''             for kerberos support
  optional openldap  '--with-ldap'                   --without-ldap for connecting with ldap servers
  optional openssl   ''                              ''             for encrypted communication
  optional xinetd    ''                              ''             for running samba web administration tool
  category network
 attribute client console library multilib-dual server
    source http://us1.samba.org/samba/ftp/ \
           http://us5.samba.org/samba/ftp/ \
           http://us2.samba.org/samba/ftp/ \
           http://us3.samba.org/samba/ftp/ \
           http://us4.samba.org/samba/ftp/ \
            ftp://au1.samba.org/pub/samba/ \
            ftp://ca.samba.org/ \
            ftp://de.samba.org/samba.org/ \
            ftp://ftp.easynet.be/samba/ \
            ftp://ftp.k2.net/mirrors/samba/ \
            ftp://ftp.oss.eznetsols.org/samba/ \
            ftp://ftp.te8.com/pub/samba/ \
            ftp://ftp.ucr.ac.cr/pub/Unix/samba/ \
            ftp://gd.tuwien.ac.at/infosys/servers/samba/ \
            ftp://giswitch.sggw.waw.pl/pub/unix/samba/ \
            ftp://it.samba.org/pub/samba/ \
            ftp://mirror.kn.vutbr.cz/pub/MIRRORS/samba/ \
            ftp://pl.samba.org/pub/unix/net/samba/ \
            ftp://ru.samba.org/pub/samba/ \
            ftp://se.samba.org/pub/samba/ \
           http://sambafr.idealx.org/samba/ftp/ \
           http://us1.samba.org/samba/ftp/ \
           stable/samba-$VERSION.tar.gz
      info last  20110804
  homepage http://www.samba.org/
      desc 'file and print services to SMB/CIFS clients
samba provides Windows NT and LAN manager-style
file and print services to SMB clients such as Windows.'

build(){
 if   [ -d source3 ]
 then   cd source3
 elif [ -d source ]
 then   cd source
 fi &&
 ./configure          \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 --with-fhs           \
 --with-shared-modules=idmap_rid \
 $OPTS &&
 make  &&
 mkdir -p    $DESTDIR/lib             &&
 mkdir -p    $DESTDIR/etc/samba       &&
 mkdir -p    $DESTDIR/usr/share/samba &&
 mkdir -p    $DESTDIR/var/log/samba   &&
 make install DESTDIR=$DESTDIR        &&
 rm    -rf   $DESTDIR/usr/private     &&
 if   [ -f   $DESTDIR/usr/lib/libsmbclient.so   ] &&
    ! [ -f   $DESTDIR/usr/lib/libsmbclient.so.0 ]
 then ln -fs                  libsmbclient.so \
             $DESTDIR/usr/lib/libsmbclient.so.0
 fi &&
 if   [  -f  nsswitch/libnss_winbind.so ]
 then cp -av nsswitch/libnss_winbind.so $DESTDIR/lib/
 fi
}
