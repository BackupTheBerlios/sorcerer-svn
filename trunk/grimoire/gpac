    stable 0.4.5 0.4.4
   require gsm faac faad2 lame libtheora libxml2
  optional firefox --mozdir=/usr/lib/mozilla '' to install GPAC plugin for Mozilla-based browsers
  optional wxWidgets '' --disable-wx for Osmo4 player
  category video
 attribute library
 attribute multilib-fail
    source $SOURCEFORGE_URL gpac/GPAC/GPAC%20$VERSION/gpac-$VERSION.tar.gz
  homepage http://gpac.sourceforge.net
case $VERSION in
 0.4.4) [ $HOSTTYPE == x86_64 ] && attribute broke
        use_gcc gcc-v4.2 ;;
esac
# circular requirement: ffmpeg - x264 - gpac - ffmpeg, removed ffmpeg req
# Does it prefer wxPython over wxWidgets?
    CFLAGS='-O3 -ffast-math'
   LDFLAGS='-Wl,-O1'
  estimate 1700
 freshmeat gpac
      desc 'gpac is a multimedia framework based on the MPEG4 systems standard.
GPAC supports many multimedia formats, avi, mpeg, mpeg-4, mov, SVG, etc.
It currently supports local playback, http download and
play and RTP/RTSP streaming over UDP (unicast or multicast) or TCP.
GPAC also features MP4Box, a multimedia swiss-army knife for the prompt.'

build(){

 install_headers(){
  mkdir -p            $DESTDIR/usr/include/gpac
  cp -av include/gpac $DESTDIR/usr/include/gpac
 }

 export CFLAGS+=' -fPIC'

 sed -i "s:-lGL -lGLU:-lGL -GLU -L /usr/X11R6/lib:
         s:-O3 \$CFLAGS:$CFLAGS \$CFLAGS:" configure
 chmod 755 configure

 ./configure \
 --prefix=/usr \
 $OPTS &&
 make &&
 make install DESTDIR=$DESTDIR &&
 install_headers 
}
