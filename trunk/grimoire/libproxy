# libproxy 0.2.3 does not correctly detect and use installed xulrunner

   version stable 0.2.3
   require GConf
#  require GConf-dbus
case $VERSION in
 0.2.3) opts --without-mozjs ;;
esac
  category network
 attribute library makej multilib-concurrent
    source http://libproxy.googlecode.com/files/libproxy-$VERSION.tar.gz
  homepage http://code.google.com/p/libproxy/
  estimate 900
      desc 'library that provides automatic proxy configuration management'

build(){
# version 0.2.3 requires linking with libdl, but
# the software author forgot to explicitly make it so
# that causes subversion to fail to compile
 export LDFLAGS+=' -ldl'
 case $HOSTTYPE in
  x86_64) export CFLAGS+=' -I/usr/include/dbus-1.0/ -I/usr/lib64/dbus-1.0/include' ;;
       *) export CFLAGS+=' -I/usr/include/dbus-1.0/ -I/usr/lib/dbus-1.0/include' ;;
 esac
 default_build
}

current(){
 case $VERSION in
  0.2.3) grep -q "libproxy.so.0.0.0.*libdl.so.2" $ELF_LOGS/libproxy ;;
 esac
}
