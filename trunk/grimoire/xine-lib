# 1.1.13 gained optional on libmodplug, but why?
# 1.1.18 failed compilation

# 1.2.0 might not be unstable but it breaks ABI compatibility
# with versions 1.1.x
# Some software might compile error with xine-lib 1.2.x headers.
# Will wait until xine-lib 1.2.1 or later to test the newer ABI

   version   stable 1.1.21 1.1.20.1 1.1.20 1.1.19 1.1.18.1 1.1.17
   version unstable 1.2.2 1.2.1 1.2.0
   version   latest 1.2.2 1.2.1 1.2.0
   require MesaLib gdk-pixbuf libXinerama libXvMC libpng v4l-utils
#  require MesaLib gdk-pixbuf libXinerama libXvMC libpng libv4l
  optional GConf
  optional ImageMagick ''                             --disable-imagemagick to convert and display different image formats
  optional SDL         ''                             --disable-sdl         for output through SDL
  optional XviD        --with-xvid-prefix=/usr        ''                    for mpeg 4 decoding
  optional esound      ''                             --disable-esd         for output through esound
  optional faad2       --enable-faad                  --disable-faad        to build the faad decoder
  optional ffmpeg      --with-external-ffmpeg         '' instead            of included ffmpeg
  optional flac        ''                             --disable-flac        for FLAC support
  optional jackit
  optional libmodplug  ''                             ''                    for playing amiga mod audio files
  optional libtheora   ''                             ''                    to play theora streams
  optional libvorbis   ''                             ''                    for support of the ogg vorbis audio codec
  optional pulseaudio  ''                             ''                    for pulseaudio audio mixing
  optional speex       ''                             --disable-speex       to enable SPX decoding
  optional w32codec    --with-w32-path=/usr/lib/win32 ''                    for more codecs support
  category video
 attribute library makej optimize setarch x11
    source $SOURCEFORGE_URL xine/xine-lib/$VERSION/xine-lib-$VERSION.tar.xz
##  source $SOURCEFORGE_URL xine/xine-lib%20\(xine%20core\)/$VERSION/xine-lib-$VERSION.tar.bz2
#   source $SOURCEFORGE_URL xine/xine-lib/$VERSION/xine-lib-$VERSION.tar.bz2
      info last 20120609
      info home http://xine.sourceforge.net
 freshmeat xine
      desc 'libraries for xine, a free video player'

build(){
 case $VERSION in
  1.1.19) sed -i '1i#include <X11/Xlib.h>
                  1i#include <X11/extensions/XvMClib.h>
                  1i#define _GNU_SOURCE
                  1i#define __USE_GNU
                  1i#include <string.h>' \
                  src/video_out/{video_out_xxmc.c,xvmc_mocomp.c} ;;
 esac
 default_build
}
