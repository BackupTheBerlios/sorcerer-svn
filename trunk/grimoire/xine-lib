# 1.1.13 gained optional on libmodplug, but why?
# 1.1.18 failed compilation

   version stable 1.1.19 1.1.18.1 1.1.17
   require MesaLib gdk-pixbuf libXinerama libXvMC libmng libpng libv4l
  optional GConf
  optional ImageMagick ''                             --disable-imagemagick to convert and display different image formats
  optional SDL         ''                             --disable-sdl         for output through SDL
  optional XviD        --with-xvid-prefix=/usr        ''                    for mpeg 4 decoding
  optional esound      ''                             --disable-esd         for output through esound
  optional faad2       --enable-faad                  --disable-faad        to build the faad decoder
# optional ffmpeg      --with-external-ffmpeg         '' instead            of included ffmpeg
  optional flac        ''                             --disable-flac        for FLAC support
  optional gnome-vfs   ''                             --disable-gnome       for gnome-vfs plugin
  optional jackit
  optional libmodplug  ''                             ''                    for playing amiga mod audio files
  optional libtheora   ''                             ''                    to play theora streams
  optional libvorbis   ''                             ''                    for support of the ogg vorbis audio codec
  optional pulseaudio  ''                             ''                    for pulseaudio audio mixing
  optional speex       ''                             --disable-speex       to enable SPX decoding
  optional w32codec    --with-w32-path=/usr/lib/win32 ''                    for more codecs support
  category video
 attribute library makej setarch x11
#   source $SOURCEFORGE_URL xine/xine-lib%20\(xine%20core\)/$VERSION/xine-lib-$VERSION.tar.bz2
    source $SOURCEFORGE_URL xine/xine-lib/$VERSION/xine-lib-$VERSION.tar.bz2
  homepage http://xine.sourceforge.net
    CFLAGS='-O2'
   LDFLAGS='-Wl,-O1'
 freshmeat xine
      desc 'libraries for xine, a free video player'

build(){
 case $VERSION in
  1.1.19) sed -i '1i#include <X11/Xlib.h>
                  1i#include <X11/extensions/XvMClib.h>
                  1i#define _GNU_SOURCE
                  1i#define __USE_GNU
                  1i#include <string.h>' \
                  src/video_out/{video_out_xxmc.c,xvmc_mocomp.c} ;;
 esac
 default_build
}
