# requires libgmpxx from gmp which is gmp compiled with gcc-g++ support enabled
# ppl 0.11 compiles, however
# cloog-ppl 0.15.9 does not compile with ppl 0.11 installed

   version stable 0.10.2
   require gmp
# requirement on gcc-g++ creates circuliar requirement loop
#  require gcc-g++ gmp
      opts --enable-static=no --disable-rpath --disable-debugging
  category development/compiler
 attribute library multilib-dual
#attribute makej multilib-concurrent
    source http://www.cs.unipr.it/ppl/Download/ftp/releases/$VERSION/ppl-$VERSION.tar.bz2
  homepage http://www.cs.unipr.it/ppl
      vurl http://www.cs.unipr.it/ppl/Download/
      desc 'Parma Polyhedra Library
used by gcc for Graphite loop optimizations'

build(){ (
 if   echo "$CFLAGS $CXXFLAGS" | grep -q "\-m32"; then
  export   CFLAGS+=' -I/usr/include32'
  export CXXFLAGS+=' -I/usr/include32'
 fi

 # to rid the rpath
 # yet not entirely successful
 aclocal; automake -acf; libtoolize -cf; autoreconf -fi
 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 sed -i 's:hardcode_automatic=yes:hardcode_automatic=no:' configure
 sed -i 's:hardcode_automatic_CXX=yes:hardcode_automatic_CXX=no:' configure

 export ac_preproc_ok=yes
 default_build
) }
