# NO SPELLS INSTALL IN /usr/local !

   VERSION=( 1.3.9 1.2.9 )
    IGNORE="dev\|src\|1\.3\.\|x86\|java\|bin"
  CATEGORY='utility/terminal-emulator'
 ATTRIBUTE='new x11'
    SOURCE="vnc-tight/tightvnc-${VERSION}_unixsrc.tar.bz2"
  HOMEPAGE='http://www.tightvnc.com'
       URL="$SOURCEFORGE_URL"
# incomplete requirement list
       REQ='gccmakedep imake jpeg libXaw'
  ESTIMATE='2800'
      DESC='tightvnc is a fork of vnc optimized for use on slow network links.

tightvnc is a remote display system for viewing
a computing desktop environment from other boxes.
It is optimized for faster operation on slow
network links such as modem connections,
provides more configuration options in the server,
features automatic SSH tunneling in the Unix vncviewer.
The modified servers and viewers are fully compatible
with the original VNC software.'


build(){
build_old(){

sed -i "s:-D_POSIX_SOURCE:-D_POSIX_SOURCE -D_XOPEN_SOURCE=500:" Xvnc/config/cf/linux.cf

xmkmf       &&
make  World &&
cd    Xvnc  &&
./configure           \
--build=$BUILD        \
--prefix=/usr         \
--sysconfdir=/etc     \
--localstatedir=/var  \
--with-installed-zlib \
$OPTS                 &&
make                  &&
cd ..                 &&
prepare_install       &&
./vncinstall /usr/bin /usr/man    &&
mkdir -p     /usr/bin/vnc.classes &&
cp classes/* /usr/bin/vnc.classes
}

xmkmf -a &&
make CDEBUGFLAGS="$CFLAGS" World &&
cd  Xvnc        &&
./configure     \
--prefix=/usr   &&
make            &&
prepare_install &&
cd ..           &&
./vncinstall /usr/bin /usr/man
}


current(){
 case $VERSION in
  1.3.9) [ -f /usr/bin/vncviewer ] ;;
 esac
}
