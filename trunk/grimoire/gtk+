# Starting with gtk+ version 2.14.1 gtk+ may have a recursive
# requirement with gail

    stable 2.16.4 2.16.3 2.16.2 2.16.1 2.16.0
  unstable 2.17.2 2.17.1 2.17.0
   require atk jasper libXcomposite libXcursor libXdamage libXinerama libXrandr pango tiff
  optional cups '' '' for optional cups print backend
  category graphic/library
 attribute library gnome
       url $GNOME_URL
    source sources/gtk+/${VERSION:0:4}/gtk+-$VERSION.tar.bz2
  homepage http://www.gtk.org
# Xinput is needed for tablets and other extended input devices 
      opts --with-xinput=yes
# Can not add cups optional requirement which exists at this time
# To avoid circuliar requirement loop with cups dbus gtk+
# dbus's optional requirement on gtk+ was dropped
  estimate 6200
   protect /etc/gtk-2.0/gtk.immodules
 freshmeat gtk
      desc 'gtk+ is a toolkit for creating GUIs.'

build(){

 build_old(){
  # using default_build now.
  # if installed with DESTDIR instead then
  # use gtk-query-immodules-2.0  to generate /etc/gtk-2.0/gtk.immodules
  # and gdk-pixbuf-query-loaders to generate /etc/gtk-2.0/gdk-pixbuf.loaders
  default_build
 }

 uncustomize(){
  if   [  -d  /etc.sav/gtk-2.0 ]
  then rm -fr /etc.sav/gtk-2.0
  fi
 }

sed -i 's:demos tests::' Makefile.in

 ./configure          \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 $OPTS                &&
 make                 &&
 prepare_install      && uncustomize &&
 make    install
}
