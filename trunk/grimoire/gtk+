   VERSION=( 2.12.10 2.12.9 2.12.8 2.12.7 2.12.5 2.12.4 2.12.3 2.12.2 2.12.1 )
    IGNORE='^2\.13\.'
  CATEGORY='graphic/library'
 ATTRIBUTE='library x11'
    SOURCE="sources/gtk+/${VERSION:0:4}/gtk+-$VERSION.tar.bz2"
       URL="$GNOME_URL"
  HOMEPAGE='http://www.gtk.org'
       REQ=( 'atk libXcomposite libXcursor libXdamage libXinerama libXrandr pango tiff'
             'cups:::for optional cups print backend' )
# Xinput is needed for tablets and other extended input devices 
      OPTS='--with-xinput=yes'
# Can not add cups optional requirement which exists at this time
# To avoid circuliar requirement loop with cups dbus gtk+
# dbus's optional requirement on gtk+ was dropped
  ESTIMATE='5500'
   PROTECT='/etc/gtk-2.0/gtk.immodules'
 FRESHMEAT='gtk'
      DESC='gtk+ is a toolkit for creating GUIs.'

build(){

 build_old(){
  # using default_build now.
  # if installed with DESTDIR instead then
  # use gtk-query-immodules-2.0  to generate /etc/gtk-2.0/gtk.immodules
  # and gdk-pixbuf-query-loaders to generate /etc/gtk-2.0/gdk-pixbuf.loaders
  default_build
 }

 uncustomize(){
  if   [  -d  /etc.sav/gtk-2.0 ]
  then rm -fr /etc.sav/gtk-2.0
  fi
 }

sed -i 's:demos tests::' Makefile.in

 ./configure          \
 --build=$BUILD       \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 $OPTS                &&
 make                 &&
 prepare_install      && uncustomize &&
 make    install
}
