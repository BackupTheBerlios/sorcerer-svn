# patch added to 2.22.0 in order for gtkhtml 3.32.0 to compile

# Starting with gtk+ version 2.14.1 gtk+ may have a recursive
# requirement with gail

    stable 2.24.0 2.22.1 2.22.0
  unstable 2.99.3 2.99.2
   require atk gdk-pixbuf jasper libXcomposite libXcursor libXdamage libXinerama libXrandr pango
#  require atk gdk-pixbuf gobject-introspection jasper libXcomposite libXcursor libXdamage libXinerama libXrandr pango
  optional cups '' '' for optional cups print backend
      opts --disable-gtk-doc --with-xinput=yes
  category graphic/library
 attribute gnome library makej
    source $GNOME_URL sources/gtk+/${VERSION:0:4}/gtk+-$VERSION.tar.bz2
      home http://www.gtk.org/
      docs http://www.gtk.org/documentation.html
# Xinput is needed for tablets and other extended input devices 
# Can not add cups optional requirement which exists at this time
# To avoid circuliar requirement loop with cups dbus gtk+
# dbus's optional requirement on gtk+ was dropped
 conflicts gail
  estimate 8000
 freshmeat gtk

# Actually, gtk+ version 2.22.0 seems to provide gail.
 conflicts gail
      desc 'toolkit for creating GUIs'

build(){
 sed -i 's:demos tests::' Makefile.in
 default_build
}

post_install(){
 default_post_install
 echo gtk-query-immodules-2.0  | pipe_queue $CAST_QUEUE com
}

current(){
 case $VERSION in
  2.22.0) grep -qx /etc/init.d/gtk-update-icon-cache $INSTALL_LOGS/gtk+ ;;
 esac
}
