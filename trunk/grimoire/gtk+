   VERSION=( 2.12.2 2.12.1 2.12.0 2.10.14 2.10.13 2.10.12 2.10.11 )
    IGNORE="^2\.13\."
  CATEGORY='graphic/library'
 ATTRIBUTE='library x11'
    SOURCE="sources/gtk+/${VERSION%.*}/gtk+-$VERSION.tar.bz2"
       URL="$GNOME_URL"
  HOMEPAGE='http://www.gtk.org'
       REQ=( "atk libXcomposite libXcursor libXdamage libXinerama libXrandr pango tiff"
             "cups:::for optional cups print backend" )
# Xinput is needed for tablets and other extended input devices 
      OPTS="--with-xinput=yes"
# Can not add cups optional requirement which exists at this time
# To avoid circuliar requirement loop with cups dbus gtk+
# dbus's optional requirement on gtk+ was dropped
  ESTIMATE='6200'
 FRESHMEAT="gtk"
      DESC="gtk+ is a toolkit for creating GUIs."

build()  {

build_old() {
  # using default_build now.
  # if installed with DESTDIR instead then
  # use gtk-query-immodules-2.0  to generate /etc/gtk-2.0/gtk.immodules
  # and gdk-pixbuf-query-loaders to generate /etc/gtk-2.0/gdk-pixbuf.loaders
  default_build
}

  uncustomize()  {
    if    [   -d   /etc.sav/gtk-2.0  ]
    then  rm  -fr  /etc.sav/gtk-2.0
    fi
  }

# The following case statement is because
# firefox 1.0.0.7 fails compilation with pango 1.17.3
# Maybe a bug in pango 1.17.[0-3] ?
# Fortuantely, gtk+ 2.12.0 can compile with pango 1.17.3
  case  $VERSION  in
    2.12.0)  sed  -i  "s:1\.17\.3:1.16.5:g"  configure  ;;
  esac

  ./configure            \
  --build=$BUILD         \
  --prefix=/usr          \
  --sysconfdir=/etc      \
  --localstatedir=/var   \
  $OPTS                  &&
  make                   &&
  prepare_install        &&  uncustomize  &&
  make    install
}
