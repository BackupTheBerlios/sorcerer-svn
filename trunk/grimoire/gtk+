# patch added to 2.22.0 in order for gtkhtml 3.32.0 to compile

# Starting with gtk+ version 2.14.1 gtk+ may have a recursive
# requirement with gail

   version stable 2.24.9 2.24.8 2.24.7 2.24.6 2.24.5 2.24.4 2.24.3 2.24.1 2.24.0
   require atk gdk-pixbuf glib jasper libXcomposite libXcursor libXdamage libXinerama libXrandr pango
#  require atk gdk-pixbuf gobject-introspection jasper libXcomposite libXcursor libXdamage libXinerama libXrandr pango
  optional cups '' '' for optional cups print backend
      opts --disable-gtk-doc --with-xinput=yes
  category graphic/library
 attribute gnome library makej multilib-concurrent optimize
    source $GNOME_URL sources/gtk+/${VERSION:0:4}/gtk+-$VERSION.tar.xz
      info last 20120125
      info home http://www.gtk.org/
      info docs http://www.gtk.org/documentation.html
# Xinput is needed for tablets and other extended input devices 
# Can not add cups optional requirement which exists at this time
# To avoid circuliar requirement loop with cups dbus gtk+
# dbus's optional requirement on gtk+ was dropped
 conflicts gail
 freshmeat gtk

# Actually, gtk+ version 2.22.0 seems to provide gail.
 conflicts gail
      desc 'toolkit for creating GUIs'

build(){
 sed -i 's:demos tests::' Makefile.in
 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 default_build
}

post_install(){
 default_post_install
 echo gtk-query-immodules-2.0  | pipe_queue $CAST_QUEUE
}

current(){
 case $VERSION in
  2.22.0) grep -qx /etc/init.d/gtk-update-icon-cache $INSTALL_LOGS/gtk+ ;;
 esac
}
