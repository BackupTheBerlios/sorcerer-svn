    stable 1.25 1.24 1.23 1.22
    secure 1.25 1.24 1.23 1.22
   require openssl

    ignore 'crlf'
  category network/email
 attribute console server new
    source xmail-$VERSION.tar.gz
       url http://www.xmailserver.org/
  homepage http://www.xmailserver.org/
  eprovide finger mail-transport-agent pop3
  estimate 100
      desc 'xmail is an Internet mail server solution.
xmail features SMTP server, POP3 server, finger server,
multiple domains support, mail-only accounts, SMTP relay checking,
RBL/RSS/ORBS/DUL and custom spam protection,
SMTP authentication (PLAIN, LOGIN, CRAM-MD5,
POP3-before-SMTP, and custom), aliases, domain aliases,
a POP3 account synchronizer with external POP3 accounts,
custom mail processing, local maildrop, custom mail filters,
mailing lists, remote administration, custom mail exchangers.

xmail may require more initial configuration than other servers.'


build() {

docs_install()  {
chown  -R  root:root  docs
mkdir  -p             /usr/share/doc/xmail
cp     -av  docs/*    /usr/share/doc/xmail
true
}

xmail_install()  {
mkdir  -p  /usr/libexec
chown  -R  root:root MailRoot
strip  bin/*
find   bin  -type f  -printf "%P\n"  |
while  read;  do
  install  -m 0755  -o root  -g root  bin/$REPLY  /usr/libexec/$REPLY
  ln       -sf /usr/libexec/$REPLY  MailRoot/bin/$REPLY
done
ln     -sf  /usr/libexec/sendmail   /usr/lib/sendmail
ln     -sf  /usr/libexec/sendmail  /usr/sbin/sendmail
cp     -av  MailRoot  /var
true
}

sed   -i  "s:-O2:$CFLAGS:"  Makefile.lnx
make  -f                    Makefile.lnx  &&
prepare_install  &&
  xmail_install  &&
   docs_install
}
