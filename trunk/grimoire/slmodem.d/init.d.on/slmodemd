#!/bin/bash

### BEGIN INIT INFO
# Provides: slmodemd
# Required-Start: $local_fs
# Should-Start: modprobe run udev
# Required-Stop:  $local_fs
# Default-Start: 2 3 4 5
# Default-Stop: 0 6
# Short-Description: slmodemd starts the winmodem
# Description: slmodemd starts the winmodem
### END INIT INFO

. /lib/lsb/init-functions

SERV=/usr/sbin/slmodemd
PIDF=/var/run/slmodemd.pid
NAME='slmodemd'
CONF='-c USA /dev/slamr0'
MODULE='slamr'
OPTS="$CONF"

start() {
 run() {
  modprobe $MODULE
  start_daemon -b -n -20 $SERV $OPTS
 }

 if   log_warning_msg "$NAME starting"; run
 then log_success_msg "$NAME started"
 else log_failure_msg "$NAME not started"
 fi
}

parse
