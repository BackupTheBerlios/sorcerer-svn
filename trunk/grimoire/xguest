# Copyright Kyle Sallee 2008 through 2010
# All rights reserved.
# For use with the distribution sorcerer only!

   version stable 20080516
   require shadow twm xinit xsetroot xterm
  category window-manager
 attribute archive_off x11
      info home http://sorcerer.silverice.org
      desc 'automatically logged in Xsession following boot

xguest is to configures a kiosk style box.
This profile creates user xguest and group xguest.
It installs an init-script that starts on runlevels 4 and 5.
It continually restarts the Xsession with user xguest logged in.
The window manager and programs run for user xguest are specified
in ~/xguest/.xinitrc
Please customize ~/xguest/.xinitrc
The manual page for startx contains verbose instructions.'

pre_build(){
# This is a normal user account and not a system use account
XG=xguest
groupadd -K GID_MIN=1024 -K GID_MAX=60000       $XG                  2>/dev/null
useradd  -K UID_MIN=1024 -K UID_MAX=60000 -m -g $XG -d /home/$XG $XG 2>/dev/null
default_pre_build
}

post_install(){
 if ! [ -f ~/home/xguest/.xinitrc ]; then
  install -m 600 -o xguest -g xguest $SCRIPT_DIR/xinitrc \
  /home/xguest/.xinitrc
 fi
 default_post_install
}
