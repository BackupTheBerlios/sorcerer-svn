# 0.9.56 has compile error
#  VERSION=( 0.9.56 0.9.55 0.9.54 0.9.53 0.9.52 0.9.51 0.9.50 )
   VERSION=(        0.9.55 0.9.54 0.9.53 0.9.52 0.9.51 0.9.50 )
    IGNORE='200[0-4]\|alpha\|api\|cfg\|dlls\|docs\|fish\|kevin\|mingw\|prgs\|programs\|icons\|setup\|tools\|xe\|i486'
# 0.9.16 gained an optional on libgphoto2, but no configure parameter.
# 0.9.30 gained an optional requirement on nas
#        but seriously nothing should use nas
  CATEGORY='development/emulator'
 ATTRIBUTE='solo x11'
    SOURCE="wine/wine-$VERSION.tar.bz2"
       URL="$SOURCEFORGE_URL"
  HOMEPAGE='http://www.winehq.com'
# has requirement on libusb now, not sure why or if optional.
       REQ=( 'MesaLib alsa-lib audiofile bison flex fontforge glib libusb ncurses'
             'cups:::for printing'
             'esound:::for output through enlightenment sound daemon'
             'lcms:::for lcms color management engine'
             'libgphoto2:::for input from digital cameras'
             'nas:::for nas sound audio mixing support'
             'openldap:::for authentication using LDAP'
             'openssl:::for secure socket connectios'
             'sane-backends:::for scanning support' )
      OPTS='--enable-opengl'
  ESTIMATE='10000'
 FRESHMEAT='wine'
      DESC='wine runs some Windows 3.x and Windows 9x programs.
wine Is Not an Emulator.
It is an alternative implementation of the Windows 3.x and Win32 APIs.
Wine provides both a development toolkit (Winelib)
for porting legacy Windows sources to Unix and a
program loader, allowing unmodified Windows 3.1/95/NT
binaries to run under Intel Unixes.
Wine does not require Microsoft Windows, as it is a
completely alternative implementation consisting of
100% Microsoft-Free code, but it can optionally use
native system DLLs if they are available.

Important!
In order to install fonts for wine.
http://prdownloads.sourceforge.net/corefonts/arial32.exe?download
Download at least the above font file.
Run it using wine.
Otherwise you may see little squire or rectangle 
boxes for text where a character should be instead.'

build(){
if [ -n "${SOURCE[1]}" ]; then
 case $HOSTTYPE in
   i*86) ln -s asm-i386   linux-libc-headers-2.6.12.0/include/asm ;;
  x*86*) ln -s asm-x86_64 linux-libc-headers-2.6.12.0/include/asm ;;
 esac
 export   CFLAGS+=' -I$BUILD_DIR/linux-libc-headers-2.6.12.0/include'
 export CXXFLAGS+=' -I$BUILD_DIR/linux-libc-headers-2.6.12.0/include'
fi

 # This test require too much RAM
 sed -i "s:\$(TESTSUBDIRS)::" dlls/Makefile.in
 sed -i "/winetest/d"     programs/Makefile.in

 unset LDFLAGS LTDL_LIBRARY_PATH LD_LIBRARY_PATH LD_RUN_PATH

 ./configure          \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 $OPTS           &&
 make    depend  &&
 make            &&
 prepare_install &&
 make    install
}
