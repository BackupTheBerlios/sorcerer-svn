   VERSION=( 1.40.4 1.40.3 1.40.2 1.40.1 1.40 )
      SAFE=( 1.40.4 1.40.3 )
# 1.40 is not a security fix but a major bug fix
    IGNORE="WIP\|compr\|rc"
  CATEGORY='disk/file-system'
 ATTRIBUTE='console'
    SOURCE="e2fsprogs/e2fsprogs-$VERSION.tar.gz"
       URL="$SOURCEFORGE_URL"
  HOMEPAGE='http://e2fsprogs.sourceforge.net'
       REQ='awk init-functions'
  ESTIMATE='1000'
      DESC='e2fsprogs contains the required utilities for the EXT2 file system.
e2fsprogs - The EXT2 file system utilities and libraries.
EXT2 stands for "Extended Filesystem", version 2.
It is a hard drive filesystem used on GNU Linux boxes.
This package contains programs for creating, checking,
and maintaining EXT2 filesystems, and the generic fsck wrapper.
The ext2fsprogs package contains essential ext2 filesystem utilities
which consists of e2fsck, mke2fs, debugfs, dumpe2fs, tune2fs,
and most of the other core ext2 filesystem utilities.'

build() {
 install_init()  {
  mkdir    -p                                 /usr/include/uuid
  install  -m 0644  lib/uuid/uuid.h           /usr/include/uuid
  install  -m 0644  lib/uuid/libuuid.a        /usr/lib
 }

#   grep  -rl    "#include <linux/fd.h>"  *  |  xargs  --max-lines=16  \
#   sed   -i   "\,#include <linux/fd.h>,i#include <linux/compiler.h>"

  ./configure               \
  --build=$BUILD            \
  --prefix=/usr             \
  --with-root-prefix=       \
  --enable-elf-shlibs       \
  --enable-dynamic-e2fsck   \
  $OPTS                     &&
  make  "LDFLAGS=$LDFLAGS"  \
         LDCONFIG=/bin/true &&
  prepare_install           &&
  make    install           &&
  make    install-libs      &&
  make    install-strip     &&
# make    install-libs      &&
          install_init
}

current()  {
  case  $VERSION  in
    1.40.2)  LC_ALL=C  file  /sbin/e2fsck  |  grep  -q  ', stripped$'  ;;
  esac
}
