   VERSION=( "3.7" "3.6" "3.5" "3.4" )
  CATEGORY="network"
 ATTRIBUTE="console"
    SOURCE="rp-pppoe-$VERSION.tar.gz"
       URL="http://www.roaringpenguin.com/penguin/pppoe"
  HOMEPAGE="http://www.roaringpenguin.com/pppoe"
       REQ="ppp"
      DESC="rp-pppoe is a PPP over Ethernet client/server suite.
rp-pppoe, Roaring Penguin, is a PPPoE client and server
suite for Linux, NetBSD, Solaris, and Mac OS X Beta.
It is fully RFC-compliant and supports cookies, relay-IDs,
and multiple simultaneous PPPoE discovery phases.
It is cleanly coded and fairly efficient,
and supports kernel-mode PPPoE on Linux 2.4.x."

configure() {
  if  [  -z  "$CONFIGURE"  ]; then
    if    query "run pppoe-setup after install step to setup the connection?" y
    then  echo "RUN_PPPOE_SETUP=true"   >  $SPELL_CONFIG
    else  echo "RUN_PPPOE_SETUP=false"  >  $SPELL_CONFIG
    fi
    echo "CONFIGURE=true" >>  $SPELL_CONFIG
  fi
}
	

build() {
  install_extra()  {
    mkdir  -p  /usr/share/applnk/Internet
    mkdir  -p  /usr/share/gnome/apps/Internet
    cp  $SCRIPT_DIR/tkpppoe.kdelnk   /usr/share/applnk/Internet
    cp  $SCRIPT_DIR/tkpppoe.desktop  /usr/share/gnome/apps/Internet
  }

  sed  -i  "s/read a/a=0/"  scripts/adsl-setup.in
  cd  src
  ./configure           \
  --build=$BUILD        \
  --prefix=/usr         \
  --sysconfdir=/etc     \
  --localstatedir=/var  \
  $OPTS                 &&
  make                  &&
  cd  ../gui            &&
  make                  &&
  prepare_install       &&
  make  install         &&
  cd  ../src            &&
  make  install         &&
        install_extra
}


post_install()  {
  if  [  -z  "$CONFIGURED"  ]; then
    echo "CONFIGURED=true" >>  $SPELL_CONFIG
    $RUN_PPPOE_SETUP &&
    pppoe-setup
    true
  fi
}
