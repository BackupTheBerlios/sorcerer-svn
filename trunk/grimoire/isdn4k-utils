# Does anyone use this?
# isdn4k-utils.v3.2p1.tar.bz2  	5116 KB  	08/01/2002  	12:00:00 AM
# No new source releases since 2002
# Probably does not compile with current versions of gcc.

    stable v3.2p1 v3.1pre1
  category network
 attribute console
  homepage http://www.isdn4linux.org/
    source ftp://ftp.isdn4linux.de/pub/isdn4linux/ \
           ftp://ftp.gwdg.de/pub/linux/isdn/isdn4linux/ \
           ftp://ftp.cs.tu-berlin.de/pub/net/isdn/isdn4linux/ \
           ftp://ftp.leo.org/pub/comp/os/unix/linux/isdn/isdn4linux/ \
           ftp://linux.mathematik.tu-darmstadt.de/pub/linux/mirrors/misc/isdn4linux/ \
           utils/isdn4k-utils.$VERSION.tar.bz2
      desc 'utilitiles to make use of ISDN specific features
isdn4linux is a set of kernel modules which are part of the Linux kernel.
It consists of the main module isdn and the actual hardware driver that
control some specific card.In addition, the package isdn4k-utils
contains utilities to make use of ISDN specific features.'


configure(){
 local CUR="$CONFIG_LOGS/$SPELL/isdn4k-utils-config"
 local OLD="$CONFIG_LOGS/$SPELL/isdn4k-utils-config.old"

 copy(){ if [[ -f $1 ]]; then cp "$1" "$2"; fi; }

 if  ! [ -f $CUR ]; then
  if ! sources_cached "$SPELL"; then
   echo "Sources must be download before configuration."
   leech -w $SPELL
  fi
  pre_build &&
  optimize  &&
  copy "$OLD" .config &&
  make         config &&
  cp          .config  $CUR
  if   [  -n  "$BUILD_DIR" ] &&
       [  -d  "$BUILD_DIR" ]
  then rm -fr "$BUILD_DIR"
  fi
  clear
  echo "isdn4k-utils configuration complete."
  cd /tmp
 fi
}

build(){
 restore_linux_configs(){
  local CUR="$CONFIG_LOGS/$SPELL/isdn4k-utils-config"
  local OLD="$CONFIG_LOGS/$SPELL/isdn4k-utils-config.old"

  if   [ -f $CUR ]; then cp $CUR .config
  elif [ -f $OLD ]; then cp $OLD .config
  fi
 }

 make_install(){
  yes  "" |
  make subconfig &&
  make           &&
  make install DESTDIR=$DESTDIR
 }

 restore_linux_configs
 make_install
}
