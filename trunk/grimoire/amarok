# 2.2.2 can not locate installed qtscriptgenerator
# 2.2.2-patched can not locate installed qtscriptgenerator

    stable 2.3.1 2.3.0 2.2.2 2.2.1 2.2.0 2.1.1
   inherit kde-v4
   require kdelibs-v4 libmtp mysql qca qtscriptgenerator taglib-extras
      opts -DCMAKE_INSTALL_PREFIX:PATH=/opt/kde4
      opts -DCMAKE_INSTALL_RPATH:PATH=/opt/kde4/lib:/opt/kde4/lib64
      opts -DCMAKE_SKIP_BUILD_RPATH:BOOL=TRUE
      opts -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=TRUE
      opts -DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=TRUE
      opts -DCMAKE_BUILD_TYPE=Release
  optional libgpod
  optional loudmouth
  category audio
 attribute kde4
    source stable/amarok/$VERSION/src/amarok-$VERSION.tar.bz2
  homepage http://amarok.kde.org/
  estimate 2500
     desc 'music manager for kde4'
 conflicts amarok2

build(){
case $VERSION in
 2.3.*) sed -i "s:find_package( QtScriptQtBindings REQUIRED ):#    find_package( QtScriptQtBindings REQUIRED ):" CMakeLists.txt
        sed -i "s:macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:#    macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:" CMakeLists.txt ;;
 2.2.2) sed -i "s:find_package( QtScriptQtBindings REQUIRED ):#    find_package( QtScriptQtBindings REQUIRED ):" CMakeLists.txt
        sed -i "s:macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:#    macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:" CMakeLists.txt ;;
esac
default_build
}
