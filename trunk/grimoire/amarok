# 2.2.2 can not locate installed qtscriptgenerator
# 2.2.2-patched can not locate installed qtscriptgenerator
# Evert reports 2.4.1 is not compiling after kde upgrade.
# 2.4.2 and 2.4.3 are empty directories.

with version stable 2.6.0 2.5.0 2.4.3
with inherit kde-v4
with base    kdelibs-v4 libmtp mysql qca taglib-extras
with also    -DCMAKE_INSTALL_PREFIX:PATH=/usr
with also    -DCMAKE_INSTALL_RPATH:PATH=/usr/lib64:/usr/lib
with also    -DCMAKE_SKIP_BUILD_RPATH:BOOL=TRUE
with also    -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=TRUE
with also    -DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=TRUE
with also    -DCMAKE_BUILD_TYPE=Release
with elect   libgpod
#with elect   loudmouth
with role    audio
with trait   makej
with source    stable $KDE_URL   stable/amarok/$VERSION/src/amarok-$VERSION.tar.bz2
with source  unstable $KDE_URL unstable/amarok/$VERSION/src/amarok-$VERSION.tar.bz2
with info    last 20120810
with info    home http://amarok.kde.org/
with info    cite 'music manager for kde4'
with clash   amarok2

build(){
case $VERSION in
 2.4.*) sed -i "s:find_package( QtScriptQtBindings REQUIRED ):#    find_package( QtScriptQtBindings REQUIRED ):" CMakeLists.txt
        sed -i "s:macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:#    macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:" CMakeLists.txt ;;
 2.3.*) sed -i "s:find_package( QtScriptQtBindings REQUIRED ):#    find_package( QtScriptQtBindings REQUIRED ):" CMakeLists.txt
        sed -i "s:macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:#    macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:" CMakeLists.txt ;;
 2.2.2) sed -i "s:find_package( QtScriptQtBindings REQUIRED ):#    find_package( QtScriptQtBindings REQUIRED ):" CMakeLists.txt
        sed -i "s:macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:#    macro_log_feature( QTSCRIPTQTBINDINGS_FOUND:" CMakeLists.txt ;;
esac
default_build
}
