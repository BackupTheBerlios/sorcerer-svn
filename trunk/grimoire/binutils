   VERSION=( "2.17" "2.16.1" "2.16" "2.15" "2.14" )
# /usr/bin/../lib/libbfd.a(cache.o): In function `bfd_open_file':
# cache.c:(.text+0x213): undefined reference to `unlink_if_ordinary'
# 2.16.1 and 2.16 appears to have a problems that impeeds linking other programs.
# After upgrading to 2.16.2 test aMule to see if it compiles and links.
  CATEGORY="development"
 ATTRIBUTE="console solo"
    SOURCE="binutils/binutils-$VERSION.tar.bz2"
  HOMEPAGE="http://sources.redhat.com/binutils"
       URL="$GNU_URL"
   PROTECT="/usr/bin/as
            /usr/bin/ld
            /usr/bin/ranlib"
# sysroot option given so that binutils supports sysroot parameter.
# that way programs like busybox can be compiled using an alternate
# sysroot that enables compiling and linking with uClibc instead of glibc.
      OPTS="--with-sysroot=/ --enable-shared --disable-static"
  ESTIMATE="2980"
      DESC="binutils is an essential collection of binary utilities.

binutils - Collection of binary utilities
ld		-the GNU linker
as		-the portable GNU assembler
ar		-creates, modifies, and extracts from archives
nm		-lists symbols from object files
objcopy		-copies and translates object files
objdump		-displays information from object files
ranlib		-indexes the contents of an archive
size		-lists the section sizes of an object or archive file
strings		-lists printable strings from files
strip		-discards symbols
c++filt		-filter to demangle encoded C++ symbols
addr2line	-converts addresses to file and line
nlmconv		-converts object code into an NLM"


build()  {
  case  $VERSION  in
    2.17)  grep  -rl  "\-Werror" *    |
           grep  -v   "\.m4$\|\.am$"  |
           xargs -l64 \
           sed   -i   "s:-Werror::g"  ;;
  esac

  case  $VERSION  in
    2.17)  echo  "Compiling binutils with sysroot support"  ;;
  esac

  export    CFLAGS="${CFLAGS/-fomit-frame-pointer/}"
  export  CXXFLAGS="${CXXFLAGS/-fomit-frame-pointer/}"

  TD="tooldir=/usr"
  LDF="LDFLAGS=$LDFLAGS"

  ./configure                \
  --host=$BUILD              \
  --prefix=/usr              \
  $OPTS                      &&
  make          "$LDF"  $TD  &&
  prepare_install            &&
  make    install       $TD  &&
  make    install-info  $TD
}


current()  {
  case  $VERSION  in
    2.17)  grep  -qx  "Compiling binutils with sysroot support"  $COMPILE_LOGS/binutils  ;;
  esac
}
