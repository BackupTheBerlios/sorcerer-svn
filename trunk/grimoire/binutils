# 2.22 can not be used to link binutils version 2.22 when compiled.
# buggy?
# gcc upgrade broke compilation of binutils

with version   stable 2.23.1 2.23 2.22
with version unstable 2.23.1
with base    zlib
with also    --enable-gold --enable-threads --enable-plugins
with also    --disable-werror
with role    development
with trait   bias console lto_off optimize makej solo
with source    stable $GNU_URL http://www.kernel.org/pub/linux/devel/ binutils/binutils-$VERSION.tar.bz2
with source  unstable $GNU_URL http://www.kernel.org/pub/linux/devel/ binutils/binutils-$VERSION.tar.bz2
with info    last 20121117
with info    home http://sources.redhat.com/binutils/
with protect /usr/bin/as
with protect /usr/bin/ld
with protect /usr/bin/ranlib

# sysroot option given so that binutils supports sysroot parameter.
with also    --with-sysroot=/ --enable-shared --disable-static --disable-bootstrap --prefix=/usr

# Ever suspects that -O3 caused
# collect2: ld terminated with signal 11 [Segmentation fault]
#    CFLAGS='-O2'
#   LDFLAGS='-Wl,-O1'
with info    cite 'essential collection of binary utilities

binutils - Collection of binary utilities
ld		-the GNU linker
as		-the portable GNU assembler
ar		-creates, modifies, and extracts from archives
nm		-lists symbols from object files
objcopy		-copies and translates object files
objdump		-displays information from object files
ranlib		-indexes the contents of an archive
size		-lists the section sizes of an object or archive file
strings		-lists printable strings from files
strip		-discards symbols
c++filt		-filter to demangle encoded C++ symbols
addr2line	-converts addresses to file and line
nlmconv		-converts object code into an NLM'


build(){
 export   CFLAGS="${CFLAGS/-fomit-frame-pointer/}"
 export CXXFLAGS="${CXXFLAGS/-fomit-frame-pointer/}"

 TD="tooldir=/usr"
 LDF="LDFLAGS=$LDFLAGS"

 ./configure $OPTS     &&
 make       "$LDF" $TD &&
 make install      $TD "DESTDIR=$DESTDIR"
}
