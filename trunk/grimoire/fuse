# no configure switch to disable selinux support with fuse 2.6.3
# --disable-static causes compilation error with fuse 2.7.0

    stable 2.8.5 2.8.4 2.8.3
   require automake init-functions libtool
      opts --exec-prefix= --enable-static=no
#     opts --disable-kernel-module --with-pkgconfigdir=/usr/lib/pkgconfig --enable-static=no
  category utility
 attribute library
    source $SOURCEFORGE_URL fuse/fuse-2.X/$VERSION/fuse-$VERSION.tar.gz
  homepage http://fuse.sourceforge.net
  estimate 300
      desc 'file system in userspace program and kernel module
fuse is a simple interface for userspace programs
to export a virtual filesystem to the Linux kernel.
It also aims to provide a secure method for non privileged users
to create and mount their own filesystem implementations.
This spell installs the library only.
Install the fuse kernel module using linux.'

build(){
 case $VERSION in
  2.6*) sed -i "s:PRGNAME=.*:PRGNAME=\"\${0##*/}\":
                s:which \${FSTYPE}:hash \${FSTYPE}:" util/mount.fuse ;;
 esac

 ./configure          \
 --prefix=/usr        \
 --bindir=/bin        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 $OPTS                &&
 make                 &&
 make install DESTDIR=$DESTDIR
}
