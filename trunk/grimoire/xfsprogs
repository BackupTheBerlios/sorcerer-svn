# This might have trouble downloading?
# 2.9.8-1 has compile error
# 2.10.1-1 has install error
# 2.10.2-1 has install error

CURL_PARAM=--disable-epsv

#case $HOSTTYPE in
# x86_64) opts --enable-lib64=yes ;;
#esac

   version stable 3.1.8 3.1.7 3.1.6 3.1.5 3.1.4 3.1.3 3.1.2
   require util-linux
      opts --exec-prefix= --enable-lib64=no
  category disk/file-system
 attribute console library makej multilib-dual
    source ftp://oss.sgi.com/projects/xfs/cmd_tars/xfsprogs-$VERSION.tar.gz
#   source ftp://oss.sgi.com/projects/xfs/cmd_tars/xfsprogs_$VERSION.tar.gz
      info last 20120323
      info home http://oss.sgi.com/projects/xfs/
      desc 'required utilities for the XFS file system'

# FATAL ERROR: could not find a valid <aio.h> header.
case $MACHTYPE in
 *-uclibc) attribute broke ;;
esac

build(){
 rid_ar(){ rm -f $DESTDIR/lib{,64}/libhandle.a; }

 local OPTIMIZER DEBUG DIST_ROOT LIBDIR

 if   [ $HOSTTYPE == x86_64 ] && [[ $CFLAGS =~ -m32 ]]
 then OPTS+=" --host=${MACHTYPE/x86_64/i686}"
 fi

 export LDFLAGS+=" $CFLAGS"
 export OPTIMIZER="$CFLAGS"
 unset              CFLAGS
 export DEBUG=-DNDEBUG
 export DIST_ROOT="$DESTDIR"

 ./configure --prefix=/usr $OPTS &&
 make &&
 make install install-dev &&
 rid_ar
}
