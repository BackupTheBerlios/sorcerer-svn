# vlc 0.8.6i not compatible with firefox 3.0.1

    stable 0.9.1 0.8.6i 0.8.6h 0.8.6g 0.8.6f 0.8.6e 0.8.6d
    secure 0.8.6i 0.8.6h
   require a52dec gtk+-v1.2 libXv libavc1394 libdvbpsi libnotify sysfsutils
  optional SDL_image   ''                --disable-sdl      for SDL support
  optional alsa-lib    --enable-alsa     ''                 for alsa sound support
  optional avahi       ''                ''                 for publishing and discovering services on local network
  optional esound      --enable-esd      ''                 for Esound library support
# optional firefox     --enable-mozilla  ''                 to build a vlc-based browser plugin
  optional fribidi     --enable-fribidi  --disable-fribidi  for bidirectional unicode
  optional gnome-vfs   --enable-gnomevfs --disable-gnomevfs for gnomevfs access module
  optional libcddb     ''                ''                 for accessing data on access data on a CDDB server
  optional libdv       --enable-dv       ''                 for DV decoder support
  optional libdvdread  ''                --disable-dvdread  for DVD decryption support
  optional libdvdnav   ''                --disable-dvdnav   for DVD navigation support
  optional libdvdplay  --enable-dvdplay  --disable-dvdplay  for DVD menu navigation support experimental
  optional libid3tag   ''                ''                 for reading id3 tags on audio files
  optional libmatroska --enable-mkv      --disable-mkv      for Matroska demux support
  optional libmpcdec   ''                ''                 for playing musepack encoded streams
  optional libmodplug  ''                ''                 for playing amiga mod music files
  optional libmpeg2    --enable-libmpeg2 --disable-libmpeg2 for decoding MPEG-1 and MPEG-2 streams
  optional libupnp     --enable-upnp     --disable-upnp     for Intel UpnP SDK
  optional libvorbis   ''                ''                 for ogg/vorbis support
  optional libmad      ''                ''                 for a 24 bit capable mpeg3 decoder
  optional samba       ''                ''                 for supporting win32 clients
  optional speex       --enable-speex    --disable-speex    for voice quality audio codec
  optional svgalib     --enable-svgalib  --disable-svgalib  for SVGAlib support
  optional x264        --enable-x264     --disable-x264     for H264 encoding suport
  switch             --enable-v4l      --disable-v4l      for Video4Linux support

  category video/dvd video/player
 attribute x11
#attribute broke
    source http://download.videolan.org/pub/videolan/vlc/$VERSION/vlc-$VERSION.tar.bz2
      vurl http://www.videolan.org/vlc/download-sources.html
  homepage http://www.videolan.org/
# vlc 0.8.6d does not compile with ffmpeg version 2008-01-13 installed
#            'ffmpeg:--enable-ffmpeg:--disable-ffmpeg:for WMA,SVQ 1,H263,H263i,MJPEG A/B and other ffmpeg codecs support'
OPTS+=' --disable-ffmpeg'

# vlc 0.8.6a has problems with wxWidgets 2.8.0
      opts --disable-wxwindows
#             'wxWidgets:--enable-wxwindows:--disable-wxwindows:for GUI' 
##            'wxGTK:--enable-wxwindows:--disable-wxwindows:for GUI' 


# changed to firefox...
#            'mozilla:--enable-mozilla '' to build a vlc-based seamonkey plugin'


# not compatible with x264 snapshots
# OPTS+=' --disable-x264'

# libupnp 1.4.0 not compatibile with vlc 0.8.5
# OPTS+=' --disable-upnp'

# 0.7.2 and 0.7.1 have an unsual link error when it comes to libdvdnav
# Has new optional requirements on avahi samba sysfsutils libebml
# not sure why yet.
#     OPTS+=' --disable-libmpeg2  --disable-ffmpeg'
     OPTS+=' --enable-static=no'
case $VERSION in
 0.9.1) use_gcc gcc-v4.2 ;;
 0.8.6e) use_gcc gcc-v4.2 ;;
esac
  estimate 6600
      desc 'vlc is the videolan client multimedia player.
vlc the VideoLAN Client is an MPEG, MPEG2, VCD and DVD player.
It can play MPEG streams from a file, from a
network source, or directly from a VCD or DVD.
There is video support for X11/XVideo, GGI, SDL,
the Linux framebuffer device, DirectX, BeOS, and
QNX, audio support for OSS, Esound, ALSA, and
GNOME, GTK+, Qt and KDE interfaces.'

# older gcc due to libraw1394 headers
case $VERSION in
 0.9.1) source http://www.linux1394.org/dl/libraw1394-1.3.0.tar.gz
         use_gcc gcc-v4.2 ;;
 0.8.6i) source http://www.linux1394.org/dl/libraw1394-1.3.0.tar.gz
         use_gcc gcc-v4.2 ;;
esac

build(){
 old_libraw(){
  cd libraw1394-1.3.0
  ./configure \
   --prefix $PWD/install \
   --enable-shared=no \
   --enable-static=yes &&
  make install &&
  OPTS+=" --with-dv-raw1394=$PWD/install" &&
  export  CFLAGS+=" -I$PWD/install/include" &&
  export LDFLAGS+=" -L$PWD/install/lib" &&
  cd ..
 }

unset CFLAGS
unset CXXFLAGS
export LDFLAGS+=' -L/usr/lib/mozilla -Wl,-rpath,/usr/lib/mozilla'

case $VERSION in
 0.9.1) # sed -i 's/typedef .* byte_t\;/#ifndef byte_t\ntypedef u_int8_t byte_t;\n#endif/' libraw1394-1.3.0/src/raw1394.h
         old_libraw
         sed -i /byte_t/d libraw1394-1.3.0/install/include/libraw1394/raw1394.h
 ;;
 0.8.6i) # sed -i 's/typedef .* byte_t\;/#ifndef byte_t\ntypedef u_int8_t byte_t;\n#endif/' libraw1394-1.3.0/src/raw1394.h
         old_libraw
         sed -i /byte_t/d libraw1394-1.3.0/install/include/libraw1394/raw1394.h
 ;;
esac
default_build
}
