# Version 5.4.1 keeps segfaulting (after couple minutes) so a newer version is needed
# 5.4.1.1 complains about a perl module version mismatch.

    stable 5.4.1.2 5.4.1.1 5.2.5.pre2
  unstable 5.4.2.rc3 5.4.2.rc2 5.4.2.rc1 5.4.2.pre2
   require automake init-functions libelf zlib
  optional openssl '' '' for secure socket connections
  category network
 attribute console
       url $SOURCEFORGE_URL
    source net-snmp/net-snmp-$VERSION.tar.gz
  homepage http://www.net-snmp.org
      opts --enable-static=no
  estimate 3400
      desc 'net-snmp is a simple network managment protocol agent, libraries and utilities
net-snmp provides tools and libraries relating to
SNMP (the Simple NetworkManagement Protocol) including:
- An extensible agent
- An SNMP library
- tools to request or set information from SNMP agents
- tools to generate and handle SNMP traps, etc.'


build(){
 SYS_CONTACT="--with-sys-contact=root@`hostname -f`"
  PERSISTENT="--with-persistent-directory=/var/state/ucd-snmp"
    DEFAULTS="--with-defaults"

 ./configure          \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 $SYS_CONTACT         \
 $PERSISTENT          \
 $DEFAULTS            \
 $OPTS                &&
 make                 &&
 prepare_install      &&
 make    install
}

current(){
 case $VERSION in
  5.4.1) grep -q SERV= /etc/init.d/snmpd ;;
 esac
}
