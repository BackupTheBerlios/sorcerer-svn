    stable 1.0.5
   require MesaLib SDL_ttf SDL_image freealut
  category game
 attribute x11
    source detritus-$VERSION.tar.bz2
       url http://www.erif.org/code/detritus/src/
  homepage http://www.erif.org/code/detritus/
case $VERSION in
 1.0.5) use_gcc gcc-v4.2 ;;
esac
  estimate 100
      desc 'detritus is a 3D first-person game of blowing up asteroids.'

build(){
# Standard fix did not work
# case $VERSION in
#  1.0.5) sed -i '1i#include <climits>
#                 1iusing namespace std;' src/geometry.cpp ;;
# esac
 sed -i 's:#define DATAPREFIX "":#define DATAPREFIX "/usr/share/detritus/":' src/os.h
 find data -type d | xargs --max-lines=2048 chmod 755
 find data -type f | xargs --max-lines=2048 chmod 644
 make &&
 prepare_install &&
 cp -av data /usr/share/detritus/ &&
 install -m 755 detritus /usr/bin
}
