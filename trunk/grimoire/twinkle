# twinkle 1.1 might not be compatible with kdelibs 4.0.0 ?
# configure: error: libboost_regex library is missing (boost package).

   VERSION=( 1.1 1.0.1 1.0 0.9 0.8.1 0.8 0.7.1 0.7 0.6.2 0.6.1 0.6 0.5 )
    IGNORE='alpha\|beta'
  CATEGORY='network/telephone'
 ATTRIBUTE='kde broken'
    SOURCE="twinkle-$VERSION.tar.gz"
       URL='http://www.xs4all.nl/~mfnboer/twinkle/download/'
  HOMEPAGE='http://www.twinklephone.com/'
       REQ=( 'boost ccrtp kdelibs libsndfile'
             'ilbc:::for the Internet low bitrate codec support'
             'speex:::for speex codec support'
             'libzrtpcpp:::for secure voice communication' )
  ESTIMATE='930'
      DESC='twinkle is a voice over IP using the SIP protocol application'

build() {
  case  $VERSION  in
    1.1)       sed  -i  's:-lboost_regex:-lboost_regex-gcc:'  \
               configure  src/{Makefile.in,gui/{Makefile,twinkle.pro}}  ;;
    0.[8-9]*)  sed  -i  's:-lboost_regex:-lboost_regex-gcc:'  \
               configure  src/{Makefile.in,gui/{Makefile,twinkle.pro}}  ;;
  esac

sed  -i  "s:INCLUDEPATH	+=:INCLUDEPATH	+= /usr/include/qt:" src/gui/twinkle.pro
export  QTDIR="/usr/share/qt"
default_build
}
