# 0.6.0 requires modification to build() to compile
# stable versions are 0.5.x
# developmental versions are 0.6.x

   version   stable 0.7.3 0.5.11
   version unstable 0.7.3
   require openssl
  category network
 attribute console client server
    source http://hostap.epitest.fi/releases/hostapd-$VERSION.tar.gz
      info last 20100907
      info home http://hostap.epitest.fi/hostapd/
      desc 'a server and client for extended IEEE 802.11 management
User space daemon for extended IEEE 802.11 management
IEEE 802.1X Authenticator
RADIUS Authentication client
RADIUS Accounting client'

build(){
 build_old(){
  sed -i "s:-O2:$CFLAGS:" Makefile
  [ -f .config ] || cp defconfig .config
  make &&
  mkdir -p $DESTDIR/usr/bin &&
  for FILE in *; do
   if   [ -f $FILE ] &&
        [ -x $FILE ]
   then cp   $FILE $DESTDIR/usr/sbin
   fi
  done
 }

 sed -i "s:-O2 -Wall -g:$CFLAGS:"        src/lib.rules
 sed -i "s:/usr/local:$DESTDIR/usr:" hostapd/Makefile

 cd hostapd
 [ -f .config ] || cp defconfig .config
 mkdir -pvm 755 $DESTDIR/usr/bin
 make &&
 make install
}
