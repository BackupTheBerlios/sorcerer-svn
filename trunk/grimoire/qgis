  stable 0.10.0 0.9.1 0.7.4
    IGNORE='win'
  CATEGORY='utility/gis'
 ATTRIBUTE='kde4'
#    SOURCE="qgis/qgis-$VERSION.tar.gz"
#       URL="$SOURCEFORGE_URL"
    SOURCE="qgis_$VERSION.tar.gz"
       URL='http://download.osgeo.org/qgis/src/'
  HOMEPAGE='http://qgis.org'
       REQ=( 'gdal qt-x11-opensource sqlite'
             'expat:::for the GPS plugin'
             'gsl:::for the raster georeferencer plugin' )
      OPTS='-DCMAKE_INSTALL_PREFIX:PATH=/opt/kde4
            -DCMAKE_INSTALL_RPATH:PATH=/opt/kde4/lib:/opt/kde4/lib64
            -DCMAKE_SKIP_BUILD_RPATH:BOOL=TRUE
            -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=TRUE
            -DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=TRUE
            -DCMAKE_BUILD_TYPE=Release'
# case $HOSTTYPE in
#  x86_64) OPTS+=' -DLIB_DESTINATION=lib64' ;;
# esac
  ESTIMATE='2000'
      DESC='qgis is a Geographic Information System (GIS)
qgis supports vector, raster, and database formats.
QGIS lets you browse and create map data on your computer.
It supports many common spatial data formats
(e.g. ESRI ShapeFile, geotiff).
QGIS supports plugins to do things 
like display tracks from your GPS.'

build(){
build_old(){

 export QTDIR=/opt/kde4

 case $VERSION in
 0.7.4)
  sed -i "s/QgsProject:://"	src/qgsproject.h		&&
  sed -i "s/QgsRasterLayerProperties:://"			\
				src/qgsrasterlayerproperties.h	&&
  sed -i "s/QgsProjectProperties:://"				\
				src/qgsprojectproperties.h	&&
  sed -i "s/QgsLabel:://"	src/qgslabel.h			&&
  sed -i "s/QgsGPXProvider:://"	providers/gpx/qgsgpxprovider.h	&&
  sed -i "s/DataPointAcetate:://"				\
		plugins/georeferencer/datapointacetate.h	&&
  sed -i "s/GraticuleCreator:://"				\
		plugins/grid_maker/graticulecreator.h
  ;;
 esac

 default_build
}

 mkdir build
 cd    build
 cmake $OPTS ..  &&
 make            &&
 prepare_install &&
 make    install
}
