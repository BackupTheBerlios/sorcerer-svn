inherit kde
  CATEGORY="graphic"
case  $VERSION  in
  3.5.5)       SAFE=( "3.5.5" )
          SOURCE[1]="security_patches/post-3.5.5-kdegraphics.diff"  ;;
  3.5.1)       SAFE=( "3.5.1" )
          SOURCE[1]="security_patches/post-3.5.1-kdegraphics-CVE-2006-0301.diff"  ;;
esac
       REQ=( "glut kdelibs lcms"
             "sane-backends:::for libkscan/kooka"
             "gphoto2:::for digital still camera support"
             "imlib:::to build the graphics browser/viewer KuickShow"
             "fribidi:::for viewing right to left texts" 
             "poppler-qt-x11-free:--with-poppler:--without-poppler:for enhanced PDF support" 
             "openexr:--with-openexr:--without-openexr:for OpenEXR support" 
             "tiff:--with-tiff:--without-tiff:for TIFF image support" )
#            "arts:--with-arts:--without-arts:for sound support" 
 FRESHMEAT="kde"
  ESTIMATE="7440"
      DESC="kdegraphics contains graphics related programs.
kdegraphics contains graphics-related programs like PostScript? 
previewer, DVI previewer, and a drawing program."


build()  {
  case  $VERSION  in
    3.5.5)  patch  -p0  <  $SOURCE_CACHE/kdegraphics/$VERSION/${SOURCE[1]##*/}  ;;
    3.5.1)  patch  -p0  <  $SOURCE_CACHE/kdegraphics/$VERSION/${SOURCE[1]##*/}  ;;
  esac
  kde_build
}

current()  {
  case  $VERSION  in
    3.5.7)  if    spell_installed "poppler"
            then  echo            "poppler-qt-x11-free"  |
                  pipe_queue  "$CAST_QUEUE"  "com"
            fi  ;;
    3.5.5)  grep   -qx  "patching file kfile-plugins/jpeg/exif.cpp"  $COMPILE_LOGS/kdegraphics  ;;
    3.5.1)  grep   -qx  "patching file kpdf/xpdf/splash/SplashXPathScanner.cc"  $COMPILE_LOGS/kdegraphics  ;;
  esac
}
