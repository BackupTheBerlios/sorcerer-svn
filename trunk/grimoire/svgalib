   VERSION=( "1.9.24" "1.9.23" "1.9.21" "1.9.20" "1.9.19" "1.4.3" )
# 1.9.x are developmental versions.
# but the stable version from 2001 is too much of a pain
# to patch to get compile.  Hope the dev version works for you.
  CATEGORY="graphic"
 ATTRIBUTE="library"
    SOURCE="svgalib-$VERSION.tar.gz"
       URL="http://www.arava.co.il/matan/svgalib"
#      URL="http://www.svgalib.org"
  HOMEPAGE="http://www.svgalib.org"
  ESTIMATE="19"
      DESC="svgalib is a graphics library to provide VGA and SVGA modes in a console.
It is not intended as an alternative to X for apps,
but rather a set of tools for things like VGA games,
image viewing in modes that X cannot support, etc."

build() {
sed_source()  {
  sed    -i  "\,#include <linux/pci.h>,itypedef unsigned long kernel_ulong_t;
              \,#include <linux/pci.h>,i#include <linux/types.h>"  src/et6000.c
}


header_patch()  {
  local  LVER
  LVER=$(  installed_version  $(  get_provider  linux-kernel  )  )

  case  $LVER  in
    2.6.7)  sed_source  ;;
  esac
}

case  $VERSION  in
  1.9.23)  header_patch  ;;
esac

case  $VERSION  in
  1.4.3)  sed  -i  "s:##::"  src/vga.c  
          sed  -i  "\,finish_w_eeprom:,a;"  src/mach32.c  ;;
esac

make             prefix=/usr  &&
prepare_install               &&
make    install  prefix=/usr
}
