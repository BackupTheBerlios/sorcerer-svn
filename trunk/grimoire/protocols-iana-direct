#    stable "$( date -u +%Y-%m )" 

version_year_month 12
  category network
 attribute client server
    source http://www.iana.org/assignments/protocol-numbers/protocol-numbers.txt
  homepage http://www.iana.org/
disable scavenge
   protect /etc/protocols
  eprovide protocols
      desc 'translates the protocol numbers assigned by IANA to /etc/protocols'

build(){
local  LC_ALL=C
export LC_ALL

[[ -f $SOURCE ]] || return 1

mkdir -p $DESTDIR/etc
cat   $SOURCE  |
tr -d '\r'     |
tr    '\t' ' ' |
tr -s  ' '     |
tr -d  '\177-\377' |
sed  "s:^ *::"     |
grep "^[0-9]"      |
grep -v "^ \|Unassigned\|experimentation\|Reserved\|1981" |
while read NUMBER NAME DESCRIPTION; do
 echo -n       "$NAME"  | tr "[:upper:]" "[:lower:]"
 echo "|$NUMBER|$NAME"
done             | 
tr     -d '\r'   |
column -s '|' -t >         protocols &&
install -vm 644 -b -S .old protocols $DESTDIR/etc
}
