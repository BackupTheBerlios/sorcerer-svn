   version stable 2.21.1a
   require glibc-legacy zlib
  category development
 attribute console solo makej
    source $GNU_URL http://www.kernel.org/pub/linux/devel/ binutils/binutils-$VERSION.tar.bz2
      info last 20110831
      info home http://sources.redhat.com/binutils/

# sysroot option given so that binutils supports sysroot parameter.
#     opts --enable-shared --disable-static --disable-bootstrap --prefix=/usr
      opts --enable-shared --disable-static --disable-bootstrap 
      opts --prefix=/opt/legacy/usr 
      opts --disable-nls
      opts --with-sysroot=/opt/legacy
#     opts --with-build-sysroot=/opt/legacy
      opts --with-lib-path=/opt/legacy/lib64:/opt/legacy/usr/lib64:/opt/legacy/lib:/opt/legacy/usr/lib
    CFLAGS='-O2'
   LDFLAGS='-Wl,-O1'
      desc 'essential collection of binary utilities

binutils - Collection of binary utilities
ld		-the GNU linker
as		-the portable GNU assembler
ar		-creates, modifies, and extracts from archives
nm		-lists symbols from object files
objcopy		-copies and translates object files
objdump		-displays information from object files
ranlib		-indexes the contents of an archive
size		-lists the section sizes of an object or archive file
strings		-lists printable strings from files
strip		-discards symbols
c++filt		-filter to demangle encoded C++ symbols
addr2line	-converts addresses to file and line
nlmconv		-converts object code into an NLM'


build(){
 export   CFLAGS="${CFLAGS/-fomit-frame-pointer/}"
 export CXXFLAGS="${CXXFLAGS/-fomit-frame-pointer/}"
 local legacy=/opt/legacy

# export   CFLAGS+=' -isystem /opt/legacy/usr/include -I/opt/legacy/usr/include'
# export CXXFLAGS+=' -isystem /opt/legacy/usr/include -I/opt/legacy/usr/include'
# if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
# then export LDFLAGS+=' -Wl,-I/opt/legacy/lib64/ld-linux-x86-64.so.2 -L/opt/legacy/lib64 -Wl,-rpath,/opt/legacy/lib64 -Wl,-rpath-link,/opt/legacy/lib64'
# else export LDFLAGS+=' -Wl,-I/opt/legacy/lib/ld-linux.so.2 -L/opt/legacy/lib   -Wl,-rpath,/opt/legacy/lib -Wl,-rpath-link,/opt/legacy/lib'
# fi

#export CFLAGS+=' --sysroot=/opt/legacy'
#export LDFLAGS+=' -nodefaultlibs -lc -lz -lgcc'

#TD="tooldir=/usr"
 LDF="LDFLAGS=$LDFLAGS"

 ./configure $OPTS     &&
 make       "$LDF" $TD &&
 make install      $TD "DESTDIR=$DESTDIR"
}
