    stable 1.5.2
   require gcc-g++ perl
  category documentation
 attribute console
    source $SOURCEFORGE_URL openjade/opensp/$VERSION/OpenSP-$VERSION.tar.gz
  homepage http://openjade.sourceforge.net
      opts --disable-doc-build --enable-static=no
  eprovide sp
  estimate 1300
      desc 'implementation of DSSSL SGML/XML'

build(){
 make_symlinks(){
  ln -sf onsgmls   $DESTDIR/usr/bin/nsgmls
  ln -sf osgmlnorm $DESTDIR/usr/bin/sgmlnorm
  ln -sf ospam     $DESTDIR/usr/bin/spam
  ln -sf ospent    $DESTDIR/usr/bin/spent
  ln -sf osx       $DESTDIR/usr/bin/sx
  ln -sf osx       $DESTDIR/usr/bin/sgml2xml
}

 case $VERSION in
  1.5.1) sed -i '\,#include "types.h",i#include "constant.h"' include/RangeMap.cxx ;;
 esac

 if   [[ $HOSTTYPE == x86_64 ]]
 then LIBDIR=/usr/lib64
 else LIBDIR=/usr/lib
 fi

 ./configure \
 --prefix=/usr \
 --libdir=$LIBDIR \
 $OPTS &&
 make &&
 make install DESTDIR=$DESTDIR &&
 make_symlinks
}
