    stable 1.5.2 1.5.1 1.5
   require perl
  category documentation
 attribute console
       url $SOURCEFORGE_URL
    source openjade/OpenSP-$VERSION.tar.gz
  homepage http://openjade.sourceforge.net
case $VERSION in
 1.5.1) use_gcc gcc-v3.4 ;;
esac
      opts --disable-doc-build --enable-static=no
  eprovide sp
  estimate 1300
      desc 'opensp is an implementation of DSSSL SGML/XML'

build(){
 make_symlinks(){
  ln -sf onsgmls   /usr/bin/nsgmls
  ln -sf osgmlnorm /usr/bin/sgmlnorm
  ln -sf ospam     /usr/bin/spam
  ln -sf ospent    /usr/bin/spent
  ln -sf osx       /usr/bin/sx
  ln -sf osx       /usr/bin/sgml2xml
}

 case $VERSION in
  1.5.1) sed -i '\,#include "types.h",i#include "constant.h"' include/RangeMap.cxx ;;
 esac

 if   [ "$HOSTTYPE" == "x86_64" ]
 then LIBDIR=/usr/lib64
 else LIBDIR=/usr/lib
 fi

 ./configure     \
 --build=$BUILD  \
 --prefix=/usr   \
 --libdir=$LIBDIR \
 $OPTS           &&
 make            &&
 prepare_install &&
 make    install &&
 make_symlinks
}
