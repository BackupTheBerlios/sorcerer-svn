# Source code is too old and not compliant with current gcc-g++
# Atlas authors might not be maintaining it any longer.

   version stable 0.3.1 0.3.0
   require FlightGear curl jpeg
      opts --with-fgbase=/usr/share/FlightGear
  category game/3d/flightsim
 attribute x11 broke deprecated
    source $SOURCEFORGE_URL atlas/atlas/$VERSION/Atlas-$VERSION.tar.gz
      info home  http://atlas.sourceforge.net/
      info docs  "http://atlas.sourceforge.net/index.php?page=run"
      desc 'moving map for FlightGear
Maps can not be installed because spell since access
to an X server is not permitted when casting.
Execute a command such as:
/usr/bin/Map --size=256 --atlas=/usr/share/FlightGear/Atlas/lowres
To have maps install into the atlas directory when root is permitted
to connect with X, or generate the maps in a different directory and
copy them to the above location.'

build(){
 install_atlas(){
  export SDL_VIDEODRIVER=dummy
  mkdir   -vp                      $DESTDIR/usr/share/FlightGear/Atlas/lowres
  install -vm 644 src/AtlasPalette $DESTDIR/usr/share/FlightGear
  #/usr/bin/Map --size=256 --atlas=/usr/share/FlightGear/Atlas/lowres
 }

 default_build &&
 install_atlas
}
