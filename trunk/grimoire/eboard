with version stable 1.1.1
case $VERSION in
 1.1.1)
with base    libpng14 ;;
esac
with base    gtk+
with role    game/board/chess
with trait   x11
with trait   broke
with source  $SOURCEFORGE_URL eboard/eboard/$VERSION/eboard-$VERSION.tar.bz2
with source  $SOURCEFORGE_URL eboard/eboard-extras/pack%201%20patchlevel%202/eboard-extras-1pl2.tar.gz
with source  $SOURCEFORGE_URL eboard/eboard-extras/pack%202/eboard-extras-2.tar.gz
with info    omit 20130101
with info    last 20080222
with info    home http://www.bergo.eng.br/eboard/
with info    docs 'http://www.bergo.eng.br/eboard/index.php?p=5'
with info    cite 'chess interface for chess engines, FICS, etc.

eboard is a graphic based chess interface.
It provides a chess board interface to ICS
(Internet Chess Servers) like FICS and to
chess engines like GNU Chess, Sjeng and Crafty.'


build(){
 libpng_fix(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then LIBPNGLIBDIR=/opt/libpng/1.4.x/lib64
  else LIBPNGLIBDIR=/opt/libpng/1.4.x/lib
  fi
  export   CFLAGS+=" -I/opt/libpng/1.4.x/include"
  export CXXFLAGS+=" -I/opt/libpng/1.4.x/include"
  export  LDFLAGS+=" -L$LIBPNGLIBDIR -Wl,-rpath,$LIBPNGLIBDIR"
  export PKG_CONFIG_PATH="$LIBPNGLIBDIR/pkgconfig:$PKG_CONFIG_PATH"
  echo "LDFLAGS=$LDFLAGS"
  echo "PKG_CONFIG_PATH=$PKG_CONFIG_PATH"
 }

 install_extras(){
  cd $1
  ./configure --prefix=$DESTDIR/usr
  make install
  cd -
 }

 sed_makefile(){ sed -i "s:-O6:$CXXFLAGS:" Makefile; }

 case $VERSION in
  1.1.1) libpng_fix ;;
 esac

 ./configure    \
  --prefix=/usr \
  $OPTS         &&
 sed_makefile   &&
 make           &&
 make install "DESTDIR=$DESTDIR" &&
 for DIR in eboard-extras*
 do  install_extras $DIR
 done
}
