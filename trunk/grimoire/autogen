# 5.16.1 failed to compile

with info    last 20130521
with version   stable 5.17.4 5.17.3 5.17.2
with base    guile libxml2
with also    --enable-static=no
case $VERSION in
 5.17.4)
with base    guile-1.8 ;;
 5.17.3)
with base    guile-1.8 ;;
 5.17.2)
with base    guile-1.8 ;;
esac
with role    development
with trait   console hidden library multilib-concurrent
#trait multilib-fail
with source  stable $GNU_URL autogen/rel$VERSION/autogen-$VERSION.tar.xz
#   source $SOURCEFORGE_URL autogen/AutoGen/AutoGen-$VERSION/autogen-$VERSION.tar.bz2
with info    home http://www.gnu.org/software/autogen/
with info    cite 'generates files that contain repetitive text with varied substitutions
autogen is a tool designed for generating program files
that contain repetitive text with varied substitutions.
Its goal is to simplify the maintenance of programs
that contain large amounts of repetitious text.
This is especially valuable if there are several
blocks of such text that must be kept synchronized.
Output is specified with a Scheme-enhanced output template.
Input, if required by your template, may come
from AutoGen definitions, CGI data, or XML files.'

build(){
 local RATH=$PATH
 local PATH=$RATH

 old_guile(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then export PATH="/opt/guile/1.8/bin:$PATH"
       export LDFLAGS+=" -Wl,-rpath,/opt/guile/1.8/lib64"
  else export PATH="/opt/guile/1.8/bin32:$PATH"
       export LDFLAGS+=" -Wl,-rpath,/opt/guile/1.8/lib"
  fi
 }

 case $VERSION in
  5.17.4) old_guile ;;
  5.17.3) old_guile ;;
  5.17.2) old_guile ;;
 esac
 default_build
}
