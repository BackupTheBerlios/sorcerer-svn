# Installs a /usr/include/sqltypes.h header file
# that might be broke and prevents compilatio nof ptlib
# has header files and libraries that are named
# the same as unixODBC

   version stable 3.52.7
   require gtk+
      opts --enable-static=no --prefix=/opt/kde4
  category db
 attribute library x11
    source http://www.iodbc.org/downloads/iODBC/libiodbc-$VERSION.tar.gz
  homepage http://www.iodbc.org/dataspace/iodbc/wiki/iODBC/
#conflicts unixODBC
      desc 'Independent Open DataBase Connectivity for linux'

build(){
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then OPTS+=' --libdir=/opt/kde4/lib64'
 fi

 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 default_build &&
 if   [[ $HOSTTYPE == x86_64 ]] && [[ $CFLAGS =~ -m32 ]]; then
  mkdir -pvm 755 $DESTDIR/opt/kde4/bin32
  mv     -v      $DESTDIR/opt/kde4/bin{,32}/iodbc-config
 fi
}

current(){
 case $VERSION in
  3.52.7) [ -f /opt/kde4/bin/iodbc-config ] ;;
 esac
}
