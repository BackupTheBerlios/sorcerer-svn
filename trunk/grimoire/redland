# When updating to redland version > 1.0.10
# compile and check the kdelibs-v4 log to see
# if soprano or redland support broke.

# in 1.0.10 /usr/lib/redland/librdf_storage_virtuoso.so
# is possibily linked incorrectly and causes soprano's compile log to read:
# -- Found Redland storage: /usr/lib/redland/librdf_storage_mysql.so;/usr/lib/redland/librdf_storage_sqlite.so;/usr/lib/redland/librdf_storage_virtuoso.so
# -- /usr/lib/redland/librdf_storage_virtuoso.so: undefined symbol: librdf_new_uri

    stable 1.0.10 1.0.9 1.0.8 1.0.7
case $VERSION in
 1.0.10) opts --with-virtuoso=no ;;
esac
   require libiodbc rasqal
  optional mysql      '' '' for mysql support
  optional postgresql '' '' for postgresql support
  category development
 attribute library
    source http://download.librdf.org/source/redland-$VERSION.tar.gz
  homepage http://librdf.org/
      opts --enable-static=no
  estimate 800
      desc 'the RDF API and triple stores'

build(){
case $VERSION in
 1.0.9) sed -i 's:4\.7 4\.6:4.10 4.9 4.8 4.7 4.6:' configure ;;
esac
default_build
}

current(){
case $VERSION in
 1.0.10) ! [ -f /usr/lib/redland/librdf_storage_virtuoso.so ] && 
         ! [ -f /usr/lib64/redland/librdf_storage_virtuoso.so ] ;;
esac
}
