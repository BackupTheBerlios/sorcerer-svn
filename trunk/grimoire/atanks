# Wonder why the software author only makes broke releases of atanks?
# What version of allegro does atanks require?

   version stable 5.3 5.2 5.1 5.0 4.9 4.8 4.7 4.6 4.5
#  require allegro gcc-g++
   require allegro-v4 gcc-g++
  category game
 attribute makej x11
 attribute broke
    source $SOURCEFORGE_URL atanks/atanks/atanks-$VERSION/atanks-$VERSION.tar.gz
      info last 20120223
      info home http://atanks.sourceforge.net/
      desc 'clone of the game scorched earth.
atanks is a multi-platform scorched earth clone similar to Worms. 
Annihilate the other tanks to earn money, then spend it on bigger 
and better shields and weapons to wipe out the opposition.
It features a wide array of weapons, destructible landscape, 
weather, parachutes, teleports and a wide range of other features.'

build(){
# First sed might not be necessary in 4.6 and later versions
# not yet tested without it.

# export   CFLAGS+=' -I/usr/include/allegro5'
# export CXXFLAGS+=' -I/usr/include/allegro5'
 sed -i 's:-DDATA_DIR=\\"\.\\":-DDATA_DIR=\\"/usr/share/games/atanks\\":' src/Makefile
 make &&
 make install "PREFIX=$DESTDIR/usr/" "INSTALL=install -c"
}
