with version stable 4.4.1.1
case $VERSION in
 4.4.1.1)
with base    libpng14 ;;
esac
with elect   alsa-lib    '' '--disable-alsadigi --disable-alsamidi' for sound output through alsa
with elect   esound      '' '--disable-esddigi'                     to work output through enlightenment sound mixer
with elect   libXpm      '' '-without-x'                            for x11 graphics output
with elect   libXxf86dga '' ''                                      for DGA support with x11 graphics
with also    --enable-fbcon=no --disable-asm
with role    game
with trait   library x11
#trait multilib-fail
with source  $SOURCEFORGE_URL alleg/allegro/$VERSION/allegro-$VERSION.tar.gz
with info    good  20120713
with info    last  20110303
with info    home  http://alleg.sourceforge.net/
with info    forum http://www.allegro.cc/forums/
with info    mail  http://alleg.sourceforge.net/maillist.html
with info    irc   http://alleg.sourceforge.net/irc.html
with info    bugs  "http://sourceforge.net/tracker/?group_id=5665&atid=105665"
with info    use   http://alleg.sourceforge.net/license.html
with info    docs  http://alleg.sourceforge.net/docs.html
with info    wiki  http://wiki.allegro.cc/
with info    cite 'cross-platform game library
allegro is a multi-platform game library that
provides many functions for graphics, sounds,
player input (keyboard, mouse, and joystick), and timers.
It also provides fixed and floating point mathematical
functions, 3D functions, file management functions,
compressed datafile, and a GUI.'

build(){
 libpng_fix(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then LIBPNGLIBDIR=/opt/libpng/1.4.x/lib64
  else LIBPNGLIBDIR=/opt/libpng/1.4.x/lib
  fi
  export   CFLAGS+=" -I/opt/libpng/1.4.x/include"
  export CXXFLAGS+=" -I/opt/libpng/1.4.x/include"
  export  LDFLAGS+=" -L$LIBPNGLIBDIR -Wl,-rpath,$LIBPNGLIBDIR"
  export PKG_CONFIG_PATH="$LIBPNGLIBDIR/pkgconfig:$PKG_CONFIG_PATH"
  echo "LDFLAGS=$LDFLAGS"
  echo "PKG_CONFIG_PATH=$PKG_CONFIG_PATH"
 }

 case $VERSION in
  4.4.1.1) libpng_fix ;;
 esac

 sed -i "s/-O2/$CFLAGS/" configure
 default_build
}

current(){
 case $VERSION in
  4.4.1.1) grep -q lib_path= /usr/bin/allegro-config ;;
 esac
}
