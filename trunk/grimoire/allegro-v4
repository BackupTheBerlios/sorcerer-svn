   version stable 4.4.1.1
case $VERSION in
 4.4.1.1)
   require libpng14 ;;
esac
  optional alsa-lib    '' '--disable-alsadigi --disable-alsamidi' for sound output through alsa
  optional esound      '' '--disable-esddigi'                     to work output through enlightenment sound mixer
  optional libXpm      '' '-without-x'                            for x11 graphics output
  optional libXxf86dga '' ''                                      for DGA support with x11 graphics
      opts --enable-fbcon=no --disable-asm
#            'arts::--disable-artsdigi:to output through arts sound mixer'
  category game
 attribute library x11
#attribute multilib-fail
    source $SOURCEFORGE_URL alleg/allegro/$VERSION/allegro-$VERSION.tar.gz
      info good  20120713
      info last  20110303
      info home  http://alleg.sourceforge.net/
      info forum http://www.allegro.cc/forums/
      info mail  http://alleg.sourceforge.net/maillist.html
      info irc   http://alleg.sourceforge.net/irc.html
      info bugs  "http://sourceforge.net/tracker/?group_id=5665&atid=105665"
      info use   http://alleg.sourceforge.net/license.html
      info docs  http://alleg.sourceforge.net/docs.html
      info wiki  http://wiki.allegro.cc/
      desc 'cross-platform game library
allegro is a multi-platform game library that
provides many functions for graphics, sounds,
player input (keyboard, mouse, and joystick), and timers.
It also provides fixed and floating point mathematical
functions, 3D functions, file management functions,
compressed datafile, and a GUI.'

build(){
 libpng_fix(){
  if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
  then LIBPNGLIBDIR=/opt/libpng/1.4.x/lib64
  else LIBPNGLIBDIR=/opt/libpng/1.4.x/lib
  fi
  export   CFLAGS+=" -I/opt/libpng/1.4.x/include"
  export CXXFLAGS+=" -I/opt/libpng/1.4.x/include"
  export  LDFLAGS+=" -L$LIBPNGLIBDIR -Wl,-rpath,$LIBPNGLIBDIR"
  export PKG_CONFIG_PATH="$LIBPNGLIBDIR/pkgconfig:$PKG_CONFIG_PATH"
  echo "LDFLAGS=$LDFLAGS"
  echo "PKG_CONFIG_PATH=$PKG_CONFIG_PATH"
 }

 case $VERSION in
  4.4.1.1) libpng_fix ;;
 esac

 sed -i "s/-O2/$CFLAGS/" configure
 default_build
}

current(){
 case $VERSION in
  4.4.1.1) grep -q lib_path= /usr/bin/allegro-config ;;
 esac
}
