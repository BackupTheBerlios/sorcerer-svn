# this spell must be multilib-dual

   version   stable 2.3.1a 2.2.0 2.1.0
   version unstable 2.4.0-beta
# case $VERSION in
#  2.2.0)
#       opts -DWITH_FFMPEG:BOOL=OFF ;;
# esac
   require gst-plugins-base libv4l numpy openexr
#  require ffmpeg gst-plugins-base libv4l openexr
  optional libdc1394
  category graphic
 attribute library multilib-dual
    source $SOURCEFORGE_URL opencvlibrary/opencv-unix/${VERSION:0:5}/OpenCV-$VERSION.tar.bz2
      info last 20110912
      info home http://opencv.willowgarage.com/wiki/
      desc 'open source computer vision library'

build(){
 default_build &&
 if     [[ $HOSTTYPE == x86_64 ]] &&
      ! [[ $CFLAGS   =~ -m32   ]]
 then mv $DESTDIR/usr/lib{,64}
      sed -i 's:prefix}/lib:prefix}/lib64:' $DESTDIR/usr/lib64/pkgconfig/opencv.pc
 fi
}
