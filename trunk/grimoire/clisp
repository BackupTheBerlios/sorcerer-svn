# Might have requirement on ffcall instead of libffi
# no spell for ffcall, ffcall source no longer hosted for download?

with version stable 2.49
with base    gettext libffi libsigsegv readline
with elect   postgresql '' '' for postgresql support
with also    --with-gettext --with-readline
with role    development/interpreter
with trait   broke
with trait   console
with source  $SOURCEFORGE_URL clisp/clisp/$VERSION/clisp-$VERSION.tar.gz
with info    omit 20130101
#     info good 20120604
with info    last 20100707
with info    home http://clisp.cons.org/

#            'smalltalk:::forwit elect   requirement on smalltalk' )
# Does it really have anwit elect   on smalltalk?
with info    cite 'ANSI Common Lisp interpreter, compiler and debugger'

build(){
 case $VERSION in
  2.49) sed -i 's:/bin/pwd:pwd:' configure src/clisp-link{,.in} ;;
 esac

 make_CLISP(){
  ./configure        \
  --prefix=/usr      &&
  cd src             &&
  ./makemake         \
  --prefix=/usr      \
  --with-dynamic-ffi \
  $OPTS > Makefile   &&
  make config.lisp   &&
  make
 }
  
make_CLISP  &&
make install "DESTDIR=$DESTDIR"
}
