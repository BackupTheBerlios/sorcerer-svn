# update setleds when updating kbd

#            'linuxdoc-tools:::for building HTML documentation' )
# linuxdoc-tools optional requirement creates problems on the I/R
# linuxdoc-tools requires openjade and openjade requires gcc-v3.4

# 1.15.3 failed compilation

# kbd hosted on ftp.kernel.org is older than 1.15.x
# where is this project hosted now?

   version   stable 1.15.2
   version unstable 1.15.3
   require automake flex init-functions libtool perl
# kbd source ignores --bindir=/bin
#     opts --bindir=/bin
  category font utility/keyboard
 attribute console
#   source ftp://ftp.kernel.org/pub/linux/utils/kbd/kbd-$VERSION.tar.bz2
    source http://sources.silverice.org/kbd/$VERSION/kbd-$VERSION.tar.bz2
      info last 20110515
      info home ftp://ftp.kernel.org/pub/linux/utils/kbd/
 conflicts console-tools console-data
      desc 'keytable files and keyboard utilities
Configuration file is /etc/keymap.conf'

build(){
 default_build &&
 mkdir -pvm 755                  $DESTDIR/bin &&
 mv -v $DESTDIR/usr/bin/loadkeys $DESTDIR/bin/
}

current(){
 case $VERSION in
  1.15.2) ! grep -q "/etc/keymap.conf" /etc/init.d/loadkeys ;;
 esac
}
