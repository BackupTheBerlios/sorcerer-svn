   VERSION=( "0.6" "0.5" "0.4" )
  CATEGORY="email"
 ATTRIBUTE="console core client server"
    SOURCE="mailutils/mailutils-$VERSION.tar.bz2"
       URL="$GNU_URL"
  HOMEPAGE="http://www.gnu.org/software/mailutils"
       REQ=( "guile libtool ncurses readline"
             "Linux-PAM::--disable-pam:for pluggable authentication"
             "db:::can use either db or gdbm for APOP authnetication in POP3 daemon  Use Berkeley sleepycat db"
             "gdbm:::use GNU database library for APOP authentication in POP3 daemon"
             "emacs:--enable-mh-utils::to provide an interface between mailutils and emacs"
             "gnutls:--with-gnutls::to enable TSL/SSL server-side encryption via gnutls in IMAP4/POP3 daemons"
             "gsasl:--with-gsasl::use libgsasl for SASL authnetication with IMAP4d"
             "gss:--with-gssapi::for gssapi/kerberos 5 authentication"
             "mysql:--with-mysql::to enable authnetication using mysql "
             "postgresql:--with-postgres::to enable authneticaion via postgresql"
             "emacs:--enable-mh-utils::to provide an interface between Mailutils and Emacs using mh-e module"
             "stunnel:::for imaps or pops services"
             "xinetd:::for running servers" )
   PROVIDE="email-client pop3 pop3s imap imaps mailx"
  ESTIMATE="1571"
      DESC="mailutils contains a series of useful mail clients, servers, and libraries.

mailutils contains a series of useful mail clients, servers and libraries.
These are the primary mail utilities of the GNU system.
It contains a POP3 server, an IMAP4 server, and a Sieve mail filter.
It also provides a POSIX 'mailx' client and a collection of other tools.

Using pop3d or imap4d through stunnel has not
been tested with this spell and may not work.
If it does not, please fix and report it
or use pine's SSL mail servers instead."


case  $VERSION  in
  0.6)  REQ="gcc-v3.4 guile libtool ncurses readline"  ;;
esac


build()  {

case  $VERSION  in
  0.6)  GCC3_VER=$( installed_version gcc-v3.4 )
        export  PATH="${PATH/gcc\/current/gcc/$GCC3_VER}"
        export  CCACHE_PATH="/opt/gcc/$GCC3_VER/bin"  ;;
esac

case  $VERSION  in
 0.6)  sed  -i  "\,extern int,d"  mailbox/getline.h  ;;
esac


if    grep  -qx  "db"    $OPT_ON_LOGS/mailutils;  then  OPTS="$OPTS  --with-db2"
elif  grep  -qx  "gdbm"  $OPT_ON_LOGS/mailutils;  then  OPTS="$OPTS  --with-gdbm"
fi

default_build  &&  ln  -s  mail  mailx
}
