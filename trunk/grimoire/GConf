   version stable 3.2.3 3.2.0 2.32.4
   require ORBit2 gtk+-v3 openldap polkit
      opts --enable-static=no
  optional gtk+
  optional openldap '' '' for lightweight directory access protocol support
  category development
 attribute gnome library

# Do not use the following two attributes
#attribute makej multilib-concurrent
    source $GNOME_URL sources/GConf/${VERSION:0:3}/GConf-$VERSION.tar.xz
      info last 20120209
      info home http://www.gnome.org/projects/gconf
   protect /etc/gconf/gconf.xml.mandatory
   exclude /etc/gconf/gconf.xml.defaults
 freshmeat gconf
      desc 'system for storing configuration information'

build(){
 sed -i 's:hardcode_into_libs=yes:hardcode_into_libs=no:' configure
 default_build
}

current(){
 if ! [ -d  /etc/gconf/gconf.xml.system ] ||
    ! find  /etc/gconf/gconf.xml.system -maxdepth 0 -perm 755 | grep -q .; then
  mkdir -p  /etc/gconf/gconf.xml.system
  chmod 755 /etc/gconf/gconf.xml.system
 fi
}

# If sources did not do this when installed then
# the following commands might be useful for updating
# gconf's defaults database

# GCONF_CONFIG_SOURCE=xml:merged:/etc/gconf/gconf.xml.defaults gconftool-2 --makefile-install-rule /etc/gconf/schemas/*.schemas
# for REPLY in /etc/gconf/schemas/*.entries
# do gconftool-2  --direct --config-source=xml:merged:/etc/gconf/gconf.xml.defaults --load $REPLY
# done
