# No useful programs to run, no mouse picture at startup?
# Squeak 3.9-8 appears useless and/or buggy.
# Perhaps I installed it wrong
# Compile error

# update the parameters to source also when updating Squeak's version

   version stable 4.0.3.2202 3.9-8
   require MesaLib Squeak-image
  optional gstreamer
  category development/interpreter
 attribute x11
    source http://ftp.squeak.org/4.1/unix-linux/Squeak-${VERSION}-src.tar.gz
      info home  http://squeak.org/
      info docs  http://squeak.org/Documentation/
  estimate 1400
      desc 'SmallTalk Development system
Squeak is an OpenSource and super-portable implementation of a 
multi-media capable Smalltalk-80 
based object-oriented programming environment.
It is written entirely in Smalltalk and has a 
high-performance VM, created by compiling the 
Smalltalk VM code into efficient and portable C code.
It now uses the Self language Morphic User Interface 
but still provides the original MVC GUI as well.
To run squeak first copy the Image file from /usr/share/squeak 
to your home directory and call the file squeak.image'

build(){
 ini_install(){
  mkdir   -  $DESTDIR/usr/{bin,libexec/squeak}
  mv      -v $DESTDIR/usr/bin/squeak $DESTDIR/usr/libexec/squeak
  install -vm 755 $SCRIPT_DIR/inisqueak $DESTDIR/usr/bin
  install -vm 755 $SCRIPT_DIR/inisqueak $DESTDIR/usr/bin/squeak
 }

mkdir bld &&
cd    bld &&
../unix/cmake/configure \
--prefix=/usr &&
make &&
make install "DESTDIR=$DESTDIR" &&
 ini_install
}
