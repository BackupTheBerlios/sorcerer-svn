   VERSION=( "3.7-7" )
# 3.9 distribution appears incomplete
    IGNORE="powerpc"
  CATEGORY="development/interpreter"
 ATTRIBUTE="new x11"
    SOURCE=( "unix-linux/Squeak-$VERSION.src.tar.gz"
             "SqueakV3.sources.gz" )
       URL="http://ftp.squeak.org/${VERSION:0:3}/"
       REQ="MesaLib Squeak-image"
  HOMEPAGE="http://squeak.org"
  ESTIMATE="960"
      DESC="Squeak is a SmallTalk Development system.
Squeak is an OpenSource and super-portable implementation of a 
multi-media capable Smalltalk-80 
based object-oriented programming environment.
It is written entirely in Smalltalk and has a 
high-performance VM, created by compiling the 
Smalltalk VM code into efficient and portable C code.
It now uses the Self language's Morphic User Interface 
but still provides the original MVC GUI as well.
To run squeak first copy the Image file from /usr/share/squeak 
to your home directory and call the file squeak.image"

build()  {
  install_sources()  {
    mkdir  -m 0755  -p  /usr/lib/squeak/$VERSION
    gunzip         $SOURCE_CACHE/Squeak/$VERSION/${SOURCE[1]##*/}  >  \
                        /usr/lib/squeak/$VERSION/SqueakV3.sources
    chmod  0644         /usr/lib/squeak/$VERSION/SqueakV3.sources
  }

mkdir  bld
cd     bld
../platforms/unix/config/configure  \
--prefix=/usr    &&
make             &&
prepare_install  &&
make    install  &&
        install_sources
}
