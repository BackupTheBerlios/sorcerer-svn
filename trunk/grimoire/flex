# lm_sensors versions 3.0.0 and 2.10.5
# do not compile with flex version 2.5.34
# maybe a flex bug?

    stable        2.5.33 2.5.34 2.5.4a
  unstable 2.5.35 2.5.33
  category utility/editor
 attribute console
       url $SOURCEFORGE_URL
    source flex/flex-$VERSION.tar.bz2
  homepage http://flex.sourceforge.net/
  estimate 800
      desc 'flex is a fast lexical analyser generator.
flex is a fast lexical analyser generator.
It is a tool for generating programs
that perform pattern-matching on text.
There are many applications for Flex,
including writing  compilers in
conjunction with GNU Bison.
Flex is a free implementation
of the well known Lex program.
It features a Lex compatibility mode,
and also provides several new features
such as exclusive start conditions.'

build() {
 make_shared_lib()  {
  ld  --whole-archive  -share  -o  $1.so.1  $1.a
  ln  -sf  $1.so.1  $1.so
 }

  ./configure   \
  --prefix=/usr \
  $OPTS         &&
  make "LDFLAGS=$LDFLAGS" &&
  prepare_install         &&
  make    install         &&
  # make_shared_lib /usr/lib/libfl &&
  ln -sf flex /usr/bin/lex
}

# building shared library causes a problem with
# compilation of ipsec-tools 0.6.3 and
# kdepim 3.4.3
