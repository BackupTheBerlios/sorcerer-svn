    stable 1.9.2.10 1.9.2.9 1.9.2.8 1.9.2 1.9.1.7 1.9.0.15 1.9.0.14 1.9.0.7 1.9.0.1
# Using internal mng
   require GConf jdk libIDL libnotify nss sqlite startup-notification zip
#  require GConf-dbus jdk libIDL libnotify nss sqlite startup-notification zip
  optional gnome-vfs '' --disable-gnomevfs for gnomevfs support
  optional libgnomeui '' --disable-gnomeui  for libgnomeui support
#   switch --enable-glitz --disable-glitz 'enable glitz for use with cairo'
  category network/web
 attribute client x11 solo
    source http://releases.mozilla.org/pub/mozilla.org/xulrunner/releases/$VERSION/source/xulrunner-$VERSION.source.tar.bz2
  homepage http://developer.mozilla.org/en/XULRunner
      vurl http://developer.mozilla.org/en/XULRunner
      opts --with-system-jpeg
      opts --with-system-zlib
      opts --with-system-bz2
      opts --enable-startup-notification
      opts --disable-static
      opts --enable-system-cairo
      opts --enable-system-lcms
      opts --enable-application=xulrunner
      opts --enable-libxul
      opts --with-java-include-path=/opt/jdk/include
      opts --with-java-bin-path=/opt/jdk/bin
      opts --with-system-nspr
      opts --with-system-nss
      opts --enable-strip
      opts --enable-default-toolkit=cairo-gtk2
      opts --disable-mochitest
      opts --disable-tests
#     opts --enable-system-sqlite
# xulrunner version 1.9.2.9 requires ancient version of sqlite
# checking for sqlite3 >= 3.6.22... yes
# checking SQLITE_CFLAGS...  
# checking SQLITE_LIBS... -lsqlite3  
# checking for SQLITE_SECURE_DELETE support in system sqlite... no
# configure: error: System Sqlite library is not compiled with SQLITE_SECURE_DELETE


## --with-system-png requires png with apng support and currently the patch does not apply
#     opts --with-system-png


           #--enable-cpp-rtti
#            'jdk:::for building the javaXPCOM components' )
# compilation with javaXPCOM component support is not working
  estimate 30400
      desc 'HTML rendering and javascript library'

build(){
 add_symlinks(){
  ln -s xulrunner-$VERSION $DESTDIR/usr/lib/xulrunner
  ln -s xulrunner-$VERSION $DESTDIR/usr/include/xulrunner
 }

 export LDFLAGS+=" -Wl,-rpath,/usr/lib/xulrunner-$VERSION"

 ./configure \
 --prefix=/usr \
 --sysconfdir=/etc \
 --localstatedir=/var \
 --enable-optimize="$CFLAGS" \
 $OPTS &&
 make &&
 make install DESTDIR=$DESTDIR &&
 add_symlinks
}
