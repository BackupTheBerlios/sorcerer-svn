    stable 1.9.1.7 1.9.0.15 1.9.0.14 1.9.0.7 1.9.0.1
# Using internal mng
   require GConf jdk nss sqlite startup-notification zip
  optional gnome-vfs '' --disable-gnomevfs for gnomevfs support
  optional libgnomeui '' --disable-gnomeui  for libgnomeui support
#   switch --enable-glitz --disable-glitz 'enable glitz for use with Cairo'
  category network/web
 attribute client x11
    source http://releases.mozilla.org/pub/mozilla.org/xulrunner/releases/$VERSION/source/xulrunner-$VERSION.source.tar.bz2
#   source http://releases.mozilla.org/pub/mozilla.org/xulrunner/releases/$VERSION/source/xulrunner-$VERSION-source.tar.bz2
  homepage http://developer.mozilla.org/en/XULRunner
      vurl http://developer.mozilla.org/en/XULRunner
      opts --with-system-jpeg
      opts --with-system-zlib
      opts --with-system-bz2
      opts --enable-startup-notification
      opts --disable-static
      opts --enable-system-cairo
      opts --enable-system-lcms
      opts --enable-application=xulrunner
      opts --enable-libxul
      opts --with-java-include-path=/opt/jdk/include
      opts --with-java-bin-path=/opt/jdk/bin
      opts --with-system-nspr
      opts --with-system-nss
      opts --enable-strip
      opts --enable-default-toolkit=cairo-gtk2
      opts --disable-mochitest
      opts --disable-tests
      opts --enable-system-sqlite

## --with-system-png requires png with apng support and currently the patch does not apply
#     opts --with-system-png


           #--enable-cpp-rtti
#            'jdk:::for building the javaXPCOM components' )
# compilation with javaXPCOM component support is not working
  estimate 100000
      desc 'HTML rendering and javascript library'

build(){
 export LDFLAGS+=" -Wl,-rpath,/usr/lib/xulrunner-$VERSION"

 ./configure          \
 --prefix=/usr        \
 --sysconfdir=/etc    \
 --localstatedir=/var \
 --enable-optimize="$CFLAGS" \
 $OPTS                &&
 make                 &&
 prepare_install      &&
 make    install
}
