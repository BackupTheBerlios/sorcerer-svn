   VERSION=( "1.6.1" "1.6.0" "1.5.2" "1.5.1" "1.5.0" )
      SAFE=( "1.6.1" )
    IGNORE="i18n\|l10n"
  CATEGORY="utility/editor utility/spreadsheet graphic/editor"
 ATTRIBUTE="kde"
    SOURCE=( "stable/koffice-$VERSION/src/koffice-$VERSION.tar.bz2" )
#            "security_patches/" )
  HOMEPAGE="http://www.koffice.org"
       URL="$KDE_URL"
# security patches now in $KDE_URL/security_patches not website URL
#            "http://www.koffice.org/releases/security" )
       REQ=( "kdebase"
             "ImageMagick:::for image conversion support"
             "Python:--with-pythondir=/usr::for Python support"
             "aspell:::for spell checking" 
             "koffice-l10n:::for internationalization support"
             "lcms:::for Krita support"
             "libwpd:::for reading word perfect documents"
             "libexif:::to enable JPEG format in krita"
             "mysql:--enable-mysql:--disable-mysql:for mysql support in Kexi"
             "poppler:::to import pdf files into krita"
             "postgresql:--enable-pgsql:--disable-pgsql: for postgresql support in Kexi"
             "ruby:::for ruby scripting support"
             "wv2:::to build MS word filter" )
# ImageMagick filter deprecated
#             "ImageMagick:::for image conversion support"
# koffice wants GraphicsMagick instead of ImageMagick now
#             "GraphicsMagick:::for image conversion support"
# GraphicsMagick is supposed to replace ImageMagick in koffice
# for additional graphic input filters, but
# GraphicsMagick has not made a release in a much longer time
# than ImageMagick and GraphicsMagic has a compile error.
# Therefore, staying with ImageMagick
  ESTIMATE="24000"
      DESC="koffice is an integrated office suite.
KOffice currently includes KWord, KSpread, KPresenter,
KChart, Krayon, KIllustrator, KFormula, Kugar, Kexi,
Krita and Kivio."

case  ${SPELL:8}  in
  l10n-*)  unset  REQ;  REQ="kdelibs"
           unset  SOURCE
                  SOURCE="stable/koffice-latest/src/koffice-l10n/$SPELL-${VERSION:0:5}.tar.bz2"
           CATEGORY="$CATEGORY documentation/i18n"
           EPROVIDE="koffice-i18n koffice-l10n ${SPELL/i18n/l10n}"
           ESTIMATE="118"  ;;
esac

build()  {
  case  $VERSION  in
    1.5.2)  sed  -i  "s:\"\"2\.4\"\":\"\"2.5\"\":"  configure
            sed  -i  "s:\"2\.4\":\"2.5\":"          acinclude.m4  \
                                              admin/acinclude.m4.in  ;;
  esac
  default_build
}
