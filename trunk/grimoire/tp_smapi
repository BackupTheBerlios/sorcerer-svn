    stable 0.37 0.36 0.34 0.33 0.32 0.31 0.30 0.29 0.27 0.25 0.22 0.21 0.20
   require dmidecode linux-kernel
  category kernel
 attribute linux-26-module
       url $SOURCEFORGE_URL
    source tpctl/tp_smapi-$VERSION.tgz
  homepage http://tpctl.sourceforge.net/
  estimate 16600
      desc 'tp_smapi provides an IBM ThinkPad SMAPI Driver
The tp_smapi kernel module exposes some features
of the ThinkPad SMAPI functionality via a sysfs interface.

Do not compile HDAPS in kernel, this spell provides hdaps.ko'

build()  {
LVER=$( installed_version $( get_provider linux-kernel ) )
if    [  -z  "$LVER"  ]
then           LVER=$(  uname  -r  )
fi

sed  -i  "s:sudo ::g"  Makefile
make    KVER=$LVER   &&
prepare_install      &&
make    KVER=$LVER install HDAPS=1 
}
