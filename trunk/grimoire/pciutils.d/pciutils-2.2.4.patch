diff -r -U2 pciutils-2.2.4/Makefile pciutils-2.2.4/Makefile
--- pciutils-2.2.4/Makefile	2006-09-09 05:57:03.000000000 -0700
+++ pciutils-2.2.4/Makefile	2006-09-09 05:57:03.000000000 -0700
@@ -3,5 +3,5 @@
 
 OPT=-O2
-CFLAGS=$(OPT) -Wall -W -Wno-parentheses -Wstrict-prototypes -Wmissing-prototypes
+# CFLAGS=$(OPT) -Wall -W -Wno-parentheses -Wstrict-prototypes -Wmissing-prototypes
 
 VERSION=2.2.4
@@ -15,5 +15,5 @@
 INSTALL=install
 DIRINSTALL=install -d
-PCILIB=lib/libpci.a
+PCILIB=lib/libpci.so.2
 PCIINC=lib/config.h lib/header.h lib/pci.h lib/types.h lib/sysdep.h
 
diff -r -U2 pciutils-2.2.4/lib/Makefile pciutils-2.2.4/lib/Makefile
--- pciutils-2.2.4/lib/Makefile	2006-07-30 05:02:07.000000000 -0700
+++ pciutils-2.2.4/lib/Makefile	2006-07-30 05:02:07.000000000 -0700
@@ -7,5 +7,5 @@
 INCL=internal.h pci.h config.h header.h sysdep.h types.h
 
-PCILIB=libpci.a
+PCILIB=libpci.so.2
 
 ifdef PCI_HAVE_PM_LINUX_SYSFS
@@ -47,5 +47,5 @@
 ifdef PCI_HAVE_PM_NBSD_LIBPCI
 OBJS += nbsd-libpci.o
-PCILIB=libpciutils.a
+PCILIB=libpciutils.so.2
 endif
 
@@ -54,6 +54,7 @@
 $(PCILIB): $(OBJS)
 	rm -f $@
-	ar rcs $@ $^
-	ranlib $@
+	cc  $(LDFLAGS) -o $(PCILIB) -shared -fPIC -Wl,-soname,$(PCILIB) $(OBJS)
+#	ar rcs $@ $^
+#	ranlib $@
 
 access.o: access.c $(INCL)
diff -r -U2 pciutils-2.2.4/lib/dump.c pciutils-2.2.4/lib/dump.c
--- pciutils-2.2.4/lib/dump.c	2006-05-05 05:18:28.000000000 -0700
+++ pciutils-2.2.4/lib/dump.c	2006-05-05 05:18:28.000000000 -0700
@@ -143,16 +143,3 @@
     }
 }
-
-struct pci_methods pm_dump = {
-  "dump",
-  NULL,					/* config */
-  dump_detect,
-  dump_init,
-  dump_cleanup,
-  dump_scan,
-  pci_generic_fill_info,
-  dump_read,
-  dump_write,
-  NULL,					/* init_dev */
-  dump_cleanup_dev
-};
+struct pci_methods pm_dump;
