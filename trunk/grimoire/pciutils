    stable 3.1.0 3.0.0 2.2.10 2.2.9
   require zlib
  category utility
 attribute console
  homepage http://mj.ucw.cz/pciutils.html
    source ftp://atrey.karlin.mff.cuni.cz/pub/linux/pci/ ftp://ftp.kernel.org/pub/software/utils/pciutils/ ftp://metalab.unc.edu/pub/Linux/hardware/ pciutils-$VERSION.tar.gz
#      url $KERNEL_URL
#   source pub/software/utils/pciutils/pciutils-$VERSION.tar.bz2
# homepage ftp://ftp.kernel.org/pub/software/utils/pciutils
      opts --enable-static=no
  estimate 100
      desc 'pciutils provides setpci and lspci utils.

pciutils include:

lspci		displays detailed information about all PCI busses and
		devices in the system, replacing the original /proc/pci
		interface.

setpci		allows to read from and write to
		PCI device configuration registers.
		For example, you can adjust
		the latency timers with it.'

build(){

 install_lib(){
  mkdir       -vpm 755        /usr/include/pci
  for                    file in lib/*.h
  do  install -vm  644  $file /usr/include/pci/
  done
  case $HOSTTYPE in
   x86_64) install -vm 755 lib/libpci.a /usr/lib64 ;;
        *) install -vm 755 lib/libpci.a /usr/lib   ;;
  esac
 }

 export CFLAGS+=' -fPIC'

 sed -i "s:-O2:$CFLAGS -fPIC:
         s:/usr/local:/usr:
         s:SHARED=no:SHARED=yes:" Makefile

 make            &&
 prepare_install &&
 make    install install-lib
}

current(){
 case $VERSION in
  3.0.0) [ -f /usr/lib/libpci.so.3.0.0 ] ;;
  2.2.9) [ -f /usr/sbin/lspci ] ;;
 esac
}
