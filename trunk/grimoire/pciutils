   VERSION=( "2.2.4" "2.2.3" "2.2.1" "2.2.0" "2.1.11" "2.1.10" "2.1.9" )
  CATEGORY="utility"
 ATTRIBUTE="console"
    SOURCE="pub/software/utils/pciutils/pciutils-$VERSION.tar.bz2"
  HOMEPAGE="ftp://ftp.kernel.org/pub/software/utils/pciutils"
       URL="$KERNEL_URL"
       REQ="zlib"
  ESTIMATE="60"
      DESC="pciutils provides setpci and lspci utils.

pciutils include:

lspci		displays detailed information about all PCI busses and
		devices in the system, replacing the original /proc/pci
		interface.

setpci		allows to read from and write to
		PCI device configuration registers.
		For example, you can adjust
		the latency timers with it."

build() {
# export  LDFLAGS="$LDFLAGS -L/lib"
# sed  -i  "s:-O2:${CFLAGS}:
#           s:/usr/local:/usr:"  Makefile

case  $VERSION  in
  2.2.4)  patch  -p1  <  $SCRIPT_DIR/pciutils-$VERSION.patch
          sed    -i      "s:/usr/local:/usr:"  Makefile  ;;
esac

make             &&
prepare_install  &&
make    install  &&
install  -v -m 755  -d               /usr/include/pci  &&
install  -v -m 644  lib/*.h          /usr/include/pci  &&
install  -v -m 755  lib/libpci.so.2  /usr/lib          &&
ln       -v -s          libpci.so.2  /usr/lib/libpci.so
}
