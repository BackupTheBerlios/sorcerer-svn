inherit xorg
   VERSION=( X11R7.3-20070927 X11R7.1-20061101 )
unset  SOURCE  URL  REQ
  CATEGORY='xserver profile'
 ATTRIBUTE='data'
  ESTIMATE='5'
       REQ=( ''
'applewmproto:::for individual version'
'appres:::for individual version'
'bdftopcf:::for individual version'
'beforelight:::for individual version'
'bigreqsproto:::for individual version'
'bitmap:::for individual version'
'compiz:::for individual version'
'compiz-plugins:::for individual version'
'compositeproto:::for individual version'
'damageproto:::for individual version'
'dmxproto:::for individual version'
'editres:::for individual version'
'encodings:::for individual version'
'evieext:::for individual version'
'fixesproto:::for individual version'
'font-alias:::for individual version'
'font-util:::for individual version'
'fontcacheproto:::for individual version'
'fontsproto:::for individual version'
'fonttosfnt:::for individual version'
'fslsfonts:::for individual version'
'fstobdf:::for individual version'
'gccmakedep:::for individual version'
'glproto:::for individual version'
'iceauth:::for individual version'
'ico:::for individual version'
'imake:::for individual version'
'inputproto:::for individual version'
'kbproto:::for individual version'
'lbxproxy:::for individual version'
'libAppleWM:::for individual version'
'libFS:::for individual version'
'libICE:::for individual version'
'libSM:::for individual version'
'libWindowsWM:::for individual version'
'libX11:::for individual version'
'libXScrnSaver:::for individual version'
'libXTrap:::for individual version'
'libXau:::for individual version'
'libXaw:::for individual version'
'libXcomposite:::for individual version'
'libXcursor:::for individual version'
'libXdamage:::for individual version'
'libXdmcp:::for individual version'
'libXevie:::for individual version'
'libXext:::for individual version'
'libXfixes:::for individual version'
'libXfont:::for individual version'
'libXfontcache:::for individual version'
'libXft:::for individual version'
'libXi:::for individual version'
'libXinerama:::for individual version'
'libXmu:::for individual version'
'libXp:::for individual version'
'libXpm:::for individual version'
'libXprintAppUtil:::for individual version'
'libXprintUtil:::for individual version'
'libXrandr:::for individual version'
'libXrender:::for individual version'
'libXres:::for individual version'
'libXt:::for individual version'
'libXtst:::for individual version'
'libXv:::for individual version'
'libXvMC:::for individual version'
'libXxf86dga:::for individual version'
'libXxf86misc:::for individual version'
'libXxf86vm:::for individual version'
'libdmx:::for individual version'
'libfontenc:::for individual version'
'liblbxutil:::for individual version'
'liboldX:::for individual version'
'libpthread-stubs:::for individual version'
'libxcb:::for individual version'
'libxkbfile:::for individual version'
'libxkbui:::for individual version'
'listres:::for individual version'
'lndir:::for individual version'
'luit:::for individual version'
'makedepend:::for individual version'
'mkcfm:::for individual version'
'mkcomposecache:::for individual version'
'mkfontdir:::for individual version'
'mkfontscale:::for individual version'
'oclock:::for individual version'
'pixman:::for individual version'
'printproto:::for individual version'
'proxymngr:::for individual version'
'randrproto:::for individual version'
'recordproto:::for individual version'
'rendercheck:::for individual version'
'renderproto:::for individual version'
'resourceproto:::for individual version'
'rgb:::for individual version'
'rstart:::for individual version'
'scripts:::for individual version'
'scrnsaverproto:::for individual version'
'sessreg:::for individual version'
'setxkbmap:::for individual version'
'showfont:::for individual version'
'smproxy:::for individual version'
'trapproto:::for individual version'
'twm:::for individual version'
'util-macros:::for individual version'
'videoproto:::for individual version'
'viewres:::for individual version'
'windowswmproto:::for individual version'
'x11perf:::for individual version'
'xauth:::for individual version'
'xbacklight:::for individual version'
'xbiff:::for individual version'
'xbitmaps:::for individual version'
'xcalc:::for individual version'
'xcb-proto:::for individual version'
'xclipboard:::for individual version'
'xclock:::for individual version'
'xcmiscproto:::for individual version'
'xcmsdb:::for individual version'
'xconsole:::for individual version'
'xcursor-themes:::for individual version'
'xcursorgen:::for individual version'
'xdbedizzy:::for individual version'
'xditview:::for individual version'
'xdm:::for individual version'
'xdpyinfo:::for individual version'
'xdriinfo:::for individual version'
'xedit:::for individual version'
'xev:::for individual version'
'xextproto:::for individual version'
'xeyes:::for individual version'
'xf86-input-acecad:::for individual version'
'xf86-input-aiptek:::for individual version'
'xf86-input-calcomp:::for individual version'
'xf86-input-citron:::for individual version'
'xf86-input-digitaledge:::for individual version'
'xf86-input-dmc:::for individual version'
'xf86-input-dynapro:::for individual version'
'xf86-input-elo2300:::for individual version'
'xf86-input-elographics:::for individual version'
'xf86-input-evdev:::for individual version'
'xf86-input-fpit:::for individual version'
'xf86-input-hyperpen:::for individual version'
'xf86-input-jamstudio:::for individual version'
'xf86-input-joystick:::for individual version'
'xf86-input-keyboard:::for individual version'
'xf86-input-magellan:::for individual version'
'xf86-input-magictouch:::for individual version'
'xf86-input-microtouch:::for individual version'
'xf86-input-mouse:::for individual version'
'xf86-input-mutouch:::for individual version'
'xf86-input-palmax:::for individual version'
'xf86-input-penmount:::for individual version'
'xf86-input-spaceorb:::for individual version'
'xf86-input-summa:::for individual version'
'xf86-input-tek4957:::for individual version'
'xf86-input-ur98:::for individual version'
'xf86-input-vmmouse:::for individual version'
'xf86-input-void:::for individual version'
'xf86-video-apm:::for individual version'
'xf86-video-ark:::for individual version'
'xf86-video-ast:::for individual version'
'xf86-video-ati:::for individual version'
'xf86-video-chips:::for individual version'
'xf86-video-cirrus:::for individual version'
'xf86-video-cyrix:::for individual version'
'xf86-video-dummy:::for individual version'
'xf86-video-fbdev:::for individual version'
'xf86-video-glide:::for individual version'
'xf86-video-glint:::for individual version'
'xf86-video-i128:::for individual version'
'xf86-video-i740:::for individual version'
'xf86-video-i810:::for individual version'
'xf86-video-impact:::for individual version'
'xf86-video-imstt:::for individual version'
'xf86-video-intel:::for individual version'
'xf86-video-mga:::for individual version'
'xf86-video-neomagic:::for individual version'
'xf86-video-newport:::for individual version'
'xf86-video-nsc:::for individual version'
'xf86-video-nv:::for individual version'
'xf86-video-rendition:::for individual version'
'xf86-video-s3:::for individual version'
'xf86-video-s3virge:::for individual version'
'xf86-video-savage:::for individual version'
'xf86-video-siliconmotion:::for individual version'
'xf86-video-sis:::for individual version'
'xf86-video-sisusb:::for individual version'
'xf86-video-sunbw2:::for individual version'
'xf86-video-suncg14:::for individual version'
'xf86-video-suncg3:::for individual version'
'xf86-video-suncg6:::for individual version'
'xf86-video-sunffb:::for individual version'
'xf86-video-sunleo:::for individual version'
'xf86-video-suntcx:::for individual version'
'xf86-video-tdfx:::for individual version'
'xf86-video-tga:::for individual version'
'xf86-video-trident:::for individual version'
'xf86-video-tseng:::for individual version'
'xf86-video-v4l:::for individual version'
'xf86-video-vermilion:::for individual version'
'xf86-video-vesa:::for individual version'
'xf86-video-vga:::for individual version'
'xf86-video-via:::for individual version'
'xf86-video-vmware:::for individual version'
'xf86-video-voodoo:::for individual version'
'xf86-video-wsfb:::for individual version'
'xf86bigfontproto:::for individual version'
'xf86dga:::for individual version'
'xf86dgaproto:::for individual version'
'xf86driproto:::for individual version'
'xf86miscproto:::for individual version'
'xf86rushproto:::for individual version'
'xf86vidmodeproto:::for individual version'
'xfd:::for individual version'
'xfindproxy:::for individual version'
'xfontsel:::for individual version'
'xfs:::for individual version'
'xfsinfo:::for individual version'
'xfwp:::for individual version'
'xgamma:::for individual version'
'xgc:::for individual version'
'xhost:::for individual version'
'xineramaproto:::for individual version'
'xinit:::for individual version'
'xkbcomp:::for individual version'
'xkbdata:::for individual version'
'xkbevd:::for individual version'
'xkbprint:::for individual version'
'xkbutils:::for individual version'
'xkill:::for individual version'
'xload:::for individual version'
'xlogo:::for individual version'
'xlsatoms:::for individual version'
'xlsclients:::for individual version'
'xlsfonts:::for individual version'
'xmag:::for individual version'
'xman:::for individual version'
'xmessage:::for individual version'
'xmh:::for individual version'
'xmodmap:::for individual version'
'xmore:::for individual version'
'xorg-cf-files:::for individual version'
'xorg-docs:::for individual version'
'xorg-server:::for individual version'
'xorg-sgml-doctools:::for individual version'
'xphelloworld:::for individual version'
'xplsprinters:::for individual version'
'xpr:::for individual version'
'xprehashprinterlist:::for individual version'
'xprop:::for individual version'
'xproto:::for individual version'
'xproxymanagementprotocol:::for individual version'
'xrandr:::for individual version'
'xrdb:::for individual version'
'xrefresh:::for individual version'
'xrx:::for individual version'
'xset:::for individual version'
'xsetmode:::for individual version'
'xsetpointer:::for individual version'
'xsetroot:::for individual version'
'xsm:::for individual version'
'xstdcmap:::for individual version'
'xtrans:::for individual version'
'xtrap:::for individual version'
'xvidtune:::for individual version'
'xvinfo:::for individual version'
'xwd:::for individual version'
'xwininfo:::for individual version'
'xwud:::for individual version' )
      DESC='xorg-individual enables individual instead of release version for spells.'

## grep way too slow to execute on every indexing.
#  grep   -rl  "inherit xorg\|inherit xf86-video\|inherit xf86-input"  $GRIMOIRE  |
#  xargs  --max-lines=256  grep  -l  "IVERSION=" 


configure(){
 default_configure
 show_att X11R7 | sed "s:^:$GRIMOIRE/:" | xargs --max-lines=64 touch
}

build(){

# nesting the old and unused configure function within build

configure(){

 checklist(){
  find  $GRIMOIRE -maxdepth 1 -type f |
  xargs --max-lines=64 grep -l "inherit xorg\|inherit xf86-video\|inherit xf86-input"  |
  xargs --max-lines=64 grep -l "IVERSION="   |
  grep  -v    "xorg-individual"              |
  basenames |
  while read; do
   echo "$REPLY"
   unset VERSION IVERSION DESC
   . $GRIMOIRE/$REPLY
   if   [ "${VERSION/X11R7.[0-9]-/}" == "$IVERSION" ]
   then echo same
   else echo newer
   fi
   if   [ -f $CONFIG_LOGS/xorg-individual/spells/$REPLY ]
   then echo on
   else echo off
   fi
   DESC="${DESC%%$LF*}"
   echo "${DESC:-undescribed}"
  done
 }

 select_individuals(){
  BACKTITLE="xorg individual versions selection"
      TITLE="Xorg Release or Individual Versions Selection"
       HELP="Between release versions of xorg sometimes
newer source tarballs become available.
If unexpected problems or bugs can be solved by using a newer 
individual tarball rather than an older release tarball
then selecting it here can allow sorcery to update that
installed spell to an individual version.
Individual versions for xorg sources are not tested by Sorcerer Gurus.
If they break you can keep the pieces."
 export IFS="$ENTER_IFS"
 dialog --backtitle "$BACKTITLE" \
         --title     "$TITLE"    \
         --stdout                \
         --separate-output       \
         --item-help             \
         --no-cancel             \
         --checklist  "$HELP"    \
         0 0 0                   \
         $( checklist )
}

 if ! grep -q "INDIVIDUALS=" $SPELL_CONFIG 2>/dev/null &&
     INDIVIDUALS="$( select_individuals )"; then
  rm    -fr $CONFIG_LOGS/xorg-individual/spells
  mkdir -p  $CONFIG_LOGS/xorg-individual/spells
  echo  "$INDIVIDUALS" |
  sed   "s:^:$CONFIG_LOGS/xorg-individual/spells/:" |
  xargs -r  --max-lines=64 touch
  echo  "INDIVIDUALS=\"$INDIVIDUALS\"" > $SPELL_CONFIG
 fi
}


 rm    -rf $CONFIG_LOGS/xorg-individual/spells
 mkdir -p  $CONFIG_LOGS/xorg-individual/spells
 [     -f  $OPT_ON_LOGS/xorg-individual ] &&
 cat       $OPT_ON_LOGS/xorg-individual   |
 sed       "s:^:$CONFIG_LOGS/xorg-individual/spells/:" |
 xargs -r--max-lines=256  touch
 prepare_install && echo 'Profile $SPELL installed.'
}

post_remove(){ rm -rf  $CONFIG_LOGS/xorg-individual/spells; }
