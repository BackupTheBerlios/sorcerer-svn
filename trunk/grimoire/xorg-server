# version 1.8.x and later will support a /etc/X11/xorg.conf.d/

   version stable 1.9.3 1.7.1 1.7.0
   version unstable 1.10.1 1.10.0
    require MesaLib bigreqsproto compositeproto evieext inputproto libXfont libXres libdmx libpciaccess libxkbfile pixman randrproto recordproto renderproto resourceproto scrnsaverproto trapproto videoproto xcmiscproto xf86dgaproto xf86driproto xf86miscproto xineramaproto xinit xkeyboard-config udev

case $MACHTYPE in
 *-gnu)
   require xterm ;;
esac
  optional openssl
      opts --with-fontdir=/usr/share/fonts/X11
#     opts --enable-config-dbus
      opts --enable-config-udev
#     opts --enable-config-hal
      opts --with-pic
  category xorg/app
 attribute X11R7 makej x11 makej
# Do not give this spell attribute library makej
    source $XORG_URL xserver/xorg-server-$VERSION.tar.bz2
      desc 'X11 server'

build(){

 adjust_xorg_conf(){
  if   [[ -f         /etc/X11/xorg.conf ]] &&
       sed 's:#.*::' /etc/X11/xorg.conf |
       LC_ALL=C grep -q   RgbPath
  then sed -i 's:RgbPath:#RgbPath:' /etc/X11/xorg.conf
  fi
 }

 case $HOSTTYPE in
  x86_64) opts --with-dri-driver-path=/usr/lib64/dri; LDFLAGS+=' -ldl' ;;
       *) opts --with-dri-driver-path=/usr/lib/dri ;;
 esac

 default_build
}

post_install(){
 recast(){
  if   spell_installed "$1"
  then echo            "$1" | pipe_queue "$CAST_QUEUE"
  fi
 }

 default_post_install
 augur installed xorg/driver | pipe_queue "$CAST_QUEUE"
 recast NVIDIA-Linux-x86
}
