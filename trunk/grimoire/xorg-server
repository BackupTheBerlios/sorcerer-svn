inherit xf86
   VERSION=( "X11R7.0-1.0.1" )
  MVERSION="6.4.2"
    URL[2]="${URL[1]}"
    URL[1]="$SOURCEFORGE_URL"
case  $VERSION  in
  X11R7.0-1.0.1)
    SOURCE=( "xserver/xorg-server-$VERSION.tar.bz2"
             "mesa3d/MesaLib-$MVERSION.tar.bz2"
             "xorg-server-1.0.1-geteuid.diff" )  
    USE_LINUX="linux-headers-v2.6.15.6"  ;;
  *)
    SOURCE=( "xserver/xorg-server-$VERSION.tar.bz2"
             "mesa3d/MesaLib-$VERSION.tar.bz2" )  ;;
esac
       REQ=( "MesaLib compositeproto damageproto evieext fixesproto fontsproto glproto libdmx libdrm libXaw libXfont libXrender libXres libXxf86misc libXxf86vm liblbxutil libxkbui ncurses randrproto  recordproto renderproto resourceproto rgb scrnsaverproto trapproto videoproto xauth xf86dgaproto xf86driproto xf86vidmodeproto xineramaproto xinit"
             "twm:::for twm, the window manager"
             "xdm:::for graphical login" )
#            ":--mesa-from-cvs::to compile with MesaLib from cvs instead of release tarball" )
# Mesa from cvs is incompatible with xorg-server X11R7.0-1.0.1
   COMPACT="on"
  ESTIMATE="4325"
      DESC="xorg-server provides a x11 server for X11R7"

build()  {
#  if    echo  "$OPTS"  |  grep  -q  "\--mesa-from-cvs"
#  then          OPTS="${OPTS/--mesa-from-cvs//}"
#    cvs -d:pserver:anonymous:@pdx.freedesktop.org:/cvs/mesa login
#    cvs -d:pserver:anonymous:@pdx.freedesktop.org:/cvs/mesa co Mesa
#    OPTS="--with-mesa-source=$PWD/Mesa"
#  else
#  fi
  OPTS="--with-mesa-source=$PWD/Mesa-$MVERSION $OPTS"
  default_build
}
