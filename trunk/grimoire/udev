   VERSION=( "065" "064" "063" "062" "061" "060" "059" "058" "050" "046" "043" "040" "030" "029" "028" "027" "026" "025" "024" )
    IGNORE="061\|066"
# 066 has install problem
# 061 fixes the problem with udevd running,
# however it gives the group number to the owner
# and it sets the group for devices to root
    IGNORE="05[1-4]"
  CATEGORY="utility"
 ATTRIBUTE="core console"
    SOURCE="pub/linux/utils/kernel/hotplug/udev-$VERSION.tar.gz"
       REQ="hotplug"
       URL="$KERNEL_URL"
  HOMEPAGE="http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev.html"
   EXCLUDE="/dev"
  ESTIMATE="66"
      DESC="udev provides an auto-populating /dev.

Add custom rules for udev nodes to the file:
/etc/udev/rules.d/1st.rules

Some rules I use for 1st.rules are:
KERNEL=\"adsp\",  NAME=\"sound/%k\",  SYMLINK=\"dsp\",  GROUP=\"audio\"
KERNEL=\"dsp\",	  NAME=\"sound/%k\",  SYMLINK=\"dsp0\", GROUP=\"audio\"
KERNEL=\"psaux\", NAME=\"misc/%k\",   SYMLINK=\"%k mouse\""

build() {
init_install()  {
  install  -m 0700  $SCRIPT_DIR/init.d/udev        /etc/init.d
  install  -m 0700  extras/start_udev              /etc/init.d
  mkdir    -p                                      /etc/udev/examples
  cp       -a       etc/udev/*                     /etc/udev/examples
  ln       -sf      ../examples/gentoo/udev.rules  /etc/udev/rules.d
  mkdir    -p                                      /etc/udev/scripts
  for  FILE in extras/*.sh
  do  install -m 0755 $FILE                        /etc/udev/scripts
  done
}

linux_sufficient()  {
  KVER="$(  installed_version  $(  get_provider  linux-kernel  )  )"
  
  if    [  "${KVER:0:3}"  ==  "2.4"  ]
  then  "Linux 2.4 is insufficient for using udev as /dev"
        false
  elif                            [  -f  /usr/src/linux/.config  ]  &&
        !  grep  -q  "CONFIG_HOTPLUG=y"  /usr/src/linux/.config
  then  echo  "Linux must have CONFIG_HOTPLUG enabled when it was built."
        false
  fi
}

fix_rules()  {
# sed  -i  '/# disk devices/aKERNEL="hd*",		NAME="%k", GROUP="disk"'  etc/udev/gentoo/udev.rules
  sed  -i  's:part\$3$:part\$3 disk:'  extras/ide-devfs.sh
  echo  "Added disk group rule for /dev/hd"
}

  sed  -i  "s:/local::
            s:^udevdir = .*:udevdir = /dev:
            s:killall:true:"  Makefile
  sed  -i  "s:@udevdir@:/dev:"  etc/udev/udev.conf.in

  linux_sufficient  &&
  fix_rules         &&
  make              &&
  prepare_install   &&
  make    install   &&
     init_install
}

post_install() {
  pkill  -15  "^udevd$"
  /lib/lsb/install_initd /etc/init.d/udev
  if  !  [  -f  /usr/sbin/sorcerer.install  ]
  then   /sbin/udevstart
  fi
  true
}


current()  {
  case  $VERSION  in
    058)  grep  -qx  "Added disk group rule for /dev/hd"  $COMPILE_LOGS/udev  ;;
  esac
}
