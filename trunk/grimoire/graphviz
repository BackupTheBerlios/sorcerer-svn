# Requirement on avahi creates recursive requirement loop

# Appears to always use the internal gd library since it requires
# gd 2.0.34 which was not released.

# 2.28.0 does not compile, however 2.26.3 does.
# already tried the case statement for version 2.26.3
# 2.30.1 2.30.0 failed compilation
# 2.26.3 no longer compiles

with version   stable 2.26.3
with version unstable 2.30.1
with base    gd ghostscript libXaw librsvg lua tk
#with base    Python gd libXaw ruby tk
with also    --enable-static=no
case $VERSION in
 2.26.3)
with also    --enable-php=no ;;
esac
with role    graphic/editor
with trait   library makej multilib-concurrent x11
with trait   broke
with source    stable http://www.graphviz.org/pub/graphviz/ARCHIVE/graphviz-$VERSION.tar.gz
with source  unstable http://www.graphviz.org/pub/graphviz/ARCHIVE/graphviz-$VERSION.tar.gz
with info    last 20130227
with info    home http://www.graphviz.org/
with info    docs http://www.graphviz.org/Documentation.php
with info    mail http://www.graphviz.org/MailingList.php
with info    cite 'set of graph drawing tools and libraries'

build(){
 if   [[ $HOSTTYPE == x86_64 ]] &&
      [[ $CFLAGS   =~ -m32   ]]
 then  OPTS+=' --enable-perl=no'; export LDFLAGS+=' -L/usr/lib'
 fi
 default_build &&
 rm -f $DESTDIR/gv.{pm,so}
}
