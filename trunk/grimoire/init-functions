# LSB-compliant init.d scripts for use with the distribution sorcerer only!
# Copyright Kyle Sallee 2005 through 2011, All rights reserved.

# For init scipt names see:
# http://www.lanana.org/lsbreg/init/init.txt

   version stable 4.1.0-20111009
   require procps setleds
  category administration/boot
 attribute archive_off console solo
      info home  http://refspecs.linux-foundation.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/iniscrptfunc.html
      desc "provides /lib/lsb/{init-functions,{install,remove}_initd}
Specifications at: $HOMEPAGE
Provides LSB backwards compatibile implementation with additional
enhancement for Sorcerer's terse style init-scripts.
Also provides an enhanced implementation not specified in the LSB
for determining daemons' PIDs by using cgroup instead of PID files."

build(){
 mkdir  -pvm 755                            $DESTDIR/{usr/lib,lib/lsb}
 install -vm 644 $SCRIPT_DIR/init-functions $DESTDIR/lib/lsb/
 install -vm 700 $SCRIPT_DIR/pidf           $DESTDIR/lib/lsb/
 install -vm 700 $SCRIPT_DIR/initd          $DESTDIR/lib/lsb/install_initd
 ln      -f $DESTDIR/lib/lsb/install_initd  $DESTDIR/lib/lsb/remove_initd
 ln      -s ../../lib/lsb                   $DESTDIR/usr/lib/lsb
}

post_install(){
 default_post_install
# The folllowing transition began 20110714
 grep -l "parse \"" /etc/init.d/* | show_from | cut -d : -f1 | sort -u |
 pipe_queue $CAST_QUEUE
 leech
}
