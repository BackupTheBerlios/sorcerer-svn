   VERSION=( "0.6.21" "0.6.20" "0.6.19" "0.6.18" "0.6.17" "0.6.16" )
# maybe write init script for avahi-autoipd introduced in 0.6.14
# 0.6.21 may have acquired a requirement on libcap
  CATEGORY="utility"
 ATTRIBUTE="library"
    SOURCE="avahi-$VERSION.tar.gz"
# New location only for source version 0.6.15
#      URL="http://lathiat.net/"
       URL="http://avahi.org/download/"
  HOMEPAGE="http://avahi.org/"
       REQ=( "dbus glib libdaemon libglade"
             "gtk+::--disable-gtk:for gtk+ integration"
             "qt-x11-free::--disable-qt3:for Qt3 mainloop integration"
             "qt-x11-opensource::--disable-qt4:for Qt4Core mainloop integration" )
      OPTS="--with-distro=none --disable-mono --disable-python --disable-static"
  ESTIMATE="1800"
      DESC="avahi is a library and daemon for Multicast DNS Service Discovery.
It may also be called zeroconf.
It allows programs to publish and discover services
running on a local network with no specific configuration.
For example, you can plug into a network and instantly
find printers to print to, files to look at, and people to talk to."

build()  {

# Needed when using dbus 1.0 and higher
case $VERSION in
  0.6.14|0.6.15)  sed  -i '1072,1074d'  avahi-daemon/dbus-protocol.c
                  sed  -i '1070d'       avahi-daemon/dbus-protocol.c   ;;
esac

mkdir    -p -m 0755 /var/empty
groupadd -K GID_MIN=256 -K GID_MAX=512    avahi                     2>/dev/null
useradd  -K UID_MIN=256 -K UID_MAX=512 -g avahi -d /var/empty avahi 2>/dev/null

default_build
}
