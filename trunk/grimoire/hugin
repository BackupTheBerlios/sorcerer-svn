# cc1plus consumes too much RAM when compiling hugin with makej
# ignore 2011.1.0.5057
# 2011.2.0 did not compile, probably has missing requirements

# last successful compile of hugin version 2011.4.0
# was with gcc version 4.6.3

   version   stable 2011.4.0 2011.0.0 2010.4.0 2010.2.0
   version unstable 2012.0.0_beta1 2011.4.0
#case $VERSION in
# 2011.4.0)
#   use_gcc gcc-v4.5 ;;
#esac
   require wxWidgets libpano13 boost tiff jpeg libpng 
   require openexr autopano-sift-C cmake
   require exiv2 perl--Image-ExifTool make enblend-enfuse
   require tclap freeglut
      opts -DCMAKE_INSTALL_PREFIX=/usr
  category graphic/utility
 attribute solo x11
 attribute broke
#attribute makej
    source $SOURCEFORGE_URL hugin/hugin/hugin-${VERSION:0:6}/hugin-$VERSION.tar.bz2
      info good 20120602
      info last 20111217
      info home http://hugin.sourceforge.net/
      info docs http://hugin.sourceforge.net/docs/
      desc 'program for generating panoramic images'

build(){
# BOOST_V="$( installed_version boost )"
# export CPPFLAGS+=" -I /usr/include/boost-${BOOST_V:0:4}"

##this is a hack to help detect boost libs.... dont know how to automatize yet
# cmake . -DBoost_LIB_SUFFIX=gcc43-mt -DBoost_INCLUDE_DIR=/usr/include/boost-${BOOST_V:0:4} &&
 cmake $OPTS . &&
 sed -i "s:$:-lpthread:" src/matchpoint/CMakeFiles/matchpoint.dir/link.txt &&
 make &&
 make install DESTDIR=$DESTDIR
}
