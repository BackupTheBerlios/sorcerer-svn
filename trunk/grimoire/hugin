# cc1plus consumes too much RAM when compiling hugin with makej

   version   stable 2012.0.0_rc1 2012.0.0_beta1 2011.4.0
   version unstable 2012.0.0_rc1 2012.0.0_beta1
   require autopano-sift-C boost cmake enblend-enfuse exiv2 freeglut jpeg
   require libpng lensfun libpano13 make openexr perl--Image-ExifTool
   require tclap tiff wxWidgets
      opts -DCMAKE_INSTALL_PREFIX=/usr
  category graphic/utility
 attribute solo x11
#attribute makej
    source   stable $SOURCEFORGE_URL hugin/hugin/hugin-${VERSION:0:6}/hugin-$VERSION.tar.bz2
    source unstable $SOURCEFORGE_URL hugin/hugin/hugin-${VERSION:0:6}/hugin-$VERSION.tar.bz2
      info last 20120901
      info home http://hugin.sourceforge.net/
      info docs http://hugin.sourceforge.net/docs/
      desc 'program for generating panoramic images'

build(){
 cmake $OPTS . &&
 sed -i "s:$:-lpthread:" src/matchpoint/CMakeFiles/matchpoint.dir/link.txt &&
 make &&
 make install DESTDIR=$DESTDIR
}
