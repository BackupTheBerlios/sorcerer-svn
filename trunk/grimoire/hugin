# cc1plus consumes too much RAM when compiling hugin with makej

   version stable 2011.0.0 2010.4.0 2010.2.0
   version unstable 2011.0.0_beta3
      info last  20110101
   require wxWidgets libpano13 boost tiff jpeg libpng 
   require openexr autopano-sift-C cmake
   require exiv2 perl--Image-ExifTool make enblend-enfuse
      opts -DCMAKE_INSTALL_PREFIX=/usr
  category graphic/utility
 attribute solo x11
#attribute makej
    source $SOURCEFORGE_URL hugin/hugin/hugin-${VERSION:0:6}/hugin-$VERSION.tar.bz2
      info last  20110603
      info home  http://hugin.sourceforge.net/
      info docs  http://hugin.sourceforge.net/docs/
      desc 'program for generating panoramic images'

build(){
# BOOST_V="$( installed_version boost )"
# export CPPFLAGS+=" -I /usr/include/boost-${BOOST_V:0:4}"

##this is a hack to help detect boost libs.... dont know how to automatize yet
# cmake . -DBoost_LIB_SUFFIX=gcc43-mt -DBoost_INCLUDE_DIR=/usr/include/boost-${BOOST_V:0:4} &&
 cmake $OPTS . &&
 sed -i "s:$:-lpthread:" src/matchpoint/CMakeFiles/matchpoint.dir/link.txt &&
 make &&
 make install DESTDIR=$DESTDIR
}
