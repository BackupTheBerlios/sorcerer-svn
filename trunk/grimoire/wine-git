   VERSION=( "20071005" )
  CATEGORY="development/emulator"
 ATTRIBUTE="solo x11"
    SOURCE="wine/wine-git-$VERSION.tar"
  HOMEPAGE="http://www.winehq.com"
REPOSITORY=( "git clone git://source.winehq.org/git/wine.git wine
              cd  wine
              git checkout -f -b mybranch 57a67ebcceb08639736f218f0f545aa41737ad96" )
       REQ=( "MesaLib audiofile bison flex fontforge glib libusb ncurses"
             "alsa-lib::--without-alsa:for output through alsa"
             "cups:::for printing"
             "esound:::for output through enlightenment sound daemon"
             "lcms:::for lcms color management engine"
             "libgphoto2:::for input from digital cameras"
             "nas:::for nas sound audio mixing support"
             "openldap:::for authentication using LDAP"
             "openssl:::for secure socket connectios"
             "sane-backends:::for scanning support" )
# may have additional optional requirements on alsa-lib and glib
# I guess wine is beta/stable and Wine is developmental.

# version 0.9.35 freshmeat announcement that
# "The broken aRts sound driver has been removed for good."
#            "arts:::for audio output through arts"
      OPTS="--enable-opengl"
#             "MesaLib:--enable-opengl:--without-opengl:for OpenGL support"
  EPROVIDE="wine"
 FRESHMEAT="wine"
  ESTIMATE="10000"
      DESC="wine provides M\$ compatible API for running win32 programs."

build()  {
  # The tests require way too much RAM
  sed  -i  "s:\$(TESTSUBDIRS)::"  dlls/Makefile.in
  sed  -i  "/winetest/d"      programs/Makefile.in

  unset  LDFLAGS LTDL_LIBRARY_PATH LD_LIBRARY_PATH LD_RUN_PATH

# ./autogen.sh
  ./configure           \
  --prefix=/usr         \
  --sysconfdir=/etc     \
  --localstatedir=/var  \
  $OPTS                 &&
  make    depend        &&
  make                  &&
  prepare_install       &&
  make    install       \
  LDCONFIG=/bin/true
# FONTSSUBDIRS=fonts
}
