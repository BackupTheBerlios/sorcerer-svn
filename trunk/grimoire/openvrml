# multilib-fail because boost is multilib-fail

    stable 0.18.6 0.18.5
   require MesaLib SDL boost curl gtkglext
  optional doxygen '' '--without-doxygen --disable-api-docs' for documentation generation
  optional firefox '' --disable-mozilla-plugin for mozilla openvrml plugin
  category graphic
 attribute gnome library solo
 attribute multilib-fail
    source $SOURCEFORGE_URL openvrml/openvrml/$VERSION/openvrml-$VERSION.tar.gz
  homepage http://openvrml.sourceforge.net
#            'jdk:--with-jdk=/opt/jdk/include --enable-script-node-java:--disable-script-node-javascript:to enable support for java in script node'
# java support broken?
      opts --disable-script-node-javascript --disable-script-node-java
  estimate 2000
      desc 'library and program for reading and displaying VRML97
openvrml is a C++ class library that allows applications
to read VRML97 .wrl files and view their geometries.
It is also working toward full ISO VRML97 Specification compliance.
While still in development, the codebase is quite stable and featureful.
lookat, a basic Glut VRML viewer is included.'


build(){
 local MOZ_VER MOZ_INC MOZ_LIB JDK_INC JDK_LIB

 MOZ_VER=$( installed_version $( get_provider firefox ) )

 MOZ_INC="-I/usr/include/firefox-$MOZ_VER -I/usr/include/firefox-$MOZ_VER/nspr"

 if   [[ $HOSTTYPE == x86_64 ]]
 then MOZ_LIB="-L/usr/lib64/firefox-$MOZ_VER"
 else MOZ_LIB="-L/usr/lib/firefox-$MOZ_VER"
 fi

 JDK_INC='-I/opt/jdk/include  -I/opt/jdk/include/linux'
 JDK_LIB='-L/opt/jdk/jre/lib/i386/server'

 # BST_INC='-I/usr/include/boost'
 # export BOOST_LIB_SUFFIX="-gcc43-mt"

 export   CFLAGS+=" $JDK_INC   $MOZ_INC  $BST_INC"
 export CXXFLAGS+=" $JDK_INC   $MOZ_INC  $BST_INC"
 export  LDFLAGS+=" $JDK_LIB   $MOZ_LIB"
#export  LDFLAGS+=" $JDK_LIB   $MOZ_LIB  -L/usr/X11R6/lib"

 #            --without-jdk           \
 #            --without-spidermonkey  \

 # sed  -i  's:boost_unit_test_framework:boost_unit_test_framework-gcc-mt:'  tests/Makefile*

 # LC_ALL=C grep -rl boost_thread * |
 # xargs -r --max-lines=64 sed -i "s:boost_thread:boost_thread-gcc43:g"
 #xargs -r --max-lines=64 sed -i "s:boost_thread:boost_thread-gcc43-mt:g"

 # LC_ALL=C grep -rl boost_filesystem-mt * |
 # xargs -r --max-lines=64 sed -i "s:boost_filesystem-mt:boost_filesystem-mt-gcc43:g"

 default_build
}
