   VERSION=( 1.2.23 1.2.22 1.2.21 1.2.20 1.2.19 1.2.18 )
      SAFE=( "1.2.23" "1.2.22" )
   IGNORE="mips\|-makefile\|beta\|rc\|wince\|project\|config\|mingw"
  CATEGORY='graphic'
 ATTRIBUTE='library'
    SOURCE="libpng/libpng-$VERSION.tar.bz2"
       URL="$SOURCEFORGE_URL"
  HOMEPAGE='http://www.libpng.org/pub/png/libpng.html'
       REQ='zlib'
  ESTIMATE='380'
      DESC="libpng is a library that supports the PNG graphics format.
libpng is the PNG library is a collection of routines
used to create and manipulate PNG format graphics files.
The PNG format was designed as a replacement for GIF
and to a lesser extent, TIFF, with many improvements and extensions."


# build_old can not be used to compile libpng 1.2.10
# otherwise it causes a problem with the libpng.a

build_old() {
sed  "s:prefix=/usr/local:prefix=/usr:
      s:ZLIBLIB=../zlib:ZLIBLIB=/usr/lib:
      s:ZLIBINC=../zlib:ZLIBINC=/usr/include:
      s:-O3 -funroll-loops:$CFLAGS:
      s: -shared : -shared -lz -lc -lm :
      s:pngtest pngtest-static::"  \
scripts/makefile.linux  >  Makefile

make             &&
prepare_install  &&
make    install  &&
ln  -fs  libpng/png.h      /usr/include/png.h  &&
ln  -fs  libpng/pngconf.h  /usr/include/pngconf.h
}


current()  {
  case  $VERSION  in
    1.2.10)  !  grep  -qx  "grimoire	2006-151"  $SNAP_LOGS/libpng  ;;
  esac
}
