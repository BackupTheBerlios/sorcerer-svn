# has some annoying not easily disabled rpath support.

# where is the 2.12.0 version comming from?

   version stable 2.0.0 1.9.0 1.9.0rc4
   require SDL_gfx gtk+ libdv libquicktime
# Selecting no to optional requirements breaks compilation of 
# mjpegtools 1.6.1
#   'libdv::--without-dv:for Quasar video codec'
      opts --enable-static=no
##      opts --without-quicktime
  category video
 attribute library makej multilib-concurrent x11
 attribute broke
    source $SOURCEFORGE_URL mjpeg/mjpegtools/$VERSION/mjpegtools-$VERSION.tar.gz
      info omit 20130101
      info last 20110521
      info home http://mjpeg.sourceforge.net
      desc 'video record and playback tools and library
The mjpeg programs are a set of tools that can do
recording of videos and playback, simple cut-and-paste
editing and the MPEG compression of audio and video under Linux.

Recording is supported for the Zoran based cards
like the Buz (Iomega), DC10 (MIRO, Pinnacle),
Matrox Marvel cards and the LML33 (Linux Media Labs).
The recorded videos can be converted to MPEG streams.
The software playback of MPEG streams works
with almost every player and every OS.
You can produce special forms of MPEG streams
like VCD (Video CD) and SVCD for hardware playback.'

build(){
 case $VERSION in
 1.9.0rc3)
         sed -i '1i#include <climits>' mpeg2enc/macroblock.cc 
         sed -i '1i#include <stdlib.h>' mpeg2enc/encodertypes.h
         sed -i '1i#include <climits>' mpeg2enc/picturereader.cc
         sed -i '1i#include <climits>' mplex/inputstrm.cpp
         sed -i '1i#include <cstring>' mplex/multiplexor.cpp
         sed -i '1i#include <cstring>' mplex/padstrm.cpp
         sed -i '1i#include <cstring>' mplex/main.cpp
         ;;
 esac
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then opts --x-libraries=/usr/lib64
 else opts --x-libraries=/usr/lib
 fi
 default_build
}
