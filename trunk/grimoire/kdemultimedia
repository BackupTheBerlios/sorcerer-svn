inherit kde
  CATEGORY="cd audio-mixer"
#   SOURCE="stable/latest/src/kdemultimedia-$VERSION.tar.bz2"
       REQ=( "kdelibs"
             "cdparanoia:--with-cdparanoia:--without-cdparanoia:to burn CDs"
             "lame:--with-lame:--without-lame:to encode mp3s"
             "libvorbis:--with-vorbis:--without-vorbis:for the ogg vorbis audio codec"
             "xine-lib:--with-xine:--without-xine:to use xine for rendering of mpeg-2 and DVDs" 
             "speex:::for a voice codec"
             "taglib:--with-taglib:--without-taglib:for reading and editing metadata of audio files"
             "flac:--with-flac:--without-flac:for the flac lossless audio codec" 
             "arts:--with-arts:--without-arts:for sound support" 
             "audiofile:--with-audiofile:--without-audiofile:for support audiofile" 
             "musicbrainz:--with-musicbrainz:--without-musicbrainz:for support MusicBrainz" 
             "gst-plugins-base:--with-gstreamer:--without-gstreamer:for GStreamer support" 
             "libtheora:--with-theora:--without-theora:for support Ogg Theora" 
             ":--with-kscd-cdda:--without-kscd-cdda:for CDDA support in kscd, select cdparanoia also" )
  ESTIMATE="1876"
      DESC="kdemultimeda contains applications like a CD player and mixer."

build()  {
  case  $VERSION  in
    3.3.2)  sed  -i  "\,#include <linux/cdrom.h>,i#undef   __STRICT_ANSI__\n#include <linux/types.h>" mpeglib/lib/input/cdromAccess_Linux.cpp  ;;
    3.4.*)  case $( arch ) in
             x86_64) 
                 sed  -i  "35d"     mpeglib/lib/input/cdromAccess.cpp
                 sed  -i  "31,33d"  mpeglib/lib/input/cdromAccess.cpp
                 ;;
            esac
            ;;
  esac

  kde_build
}
