# transcode 1.0.5 does not compile with gcc version 4.3.0
   VERSION=( 1.0.6rc1 1.0.5 1.0.4 1.0.3 1.0.2 1.0.1 1.0.0 )
    IGNORE='alpha\|beta\|cvs\|rc'
  CATEGORY='video'
 ATTRIBUTE='x11'
    SOURCE="transcode-$VERSION.tar.bz2"
      VURL='http://fromani.exit1.org/'
       URL='http://fromani.exit1.org/'
#       URL='http://www.jakemsr.com/transcode/
#            http://apt.oldconomy.com/
#            http://www.ligo.caltech.edu/~pehrens/
#            http://www.kraymer.de/mirroring/
#            http://rebels.plukwa.net/linux-video/transcode/
#            http://dl.fkb.wormulon.net/transcode/
#            http://dl.kel.wormulon.net/transcode/'
  HOMEPAGE='http://www.transcoding.org/cgi-bin/transcode/'
#      URL='http://zebra.fh-weingarten.de/~transcode/pre/'
# HOMEPAGE='http://www.theorie.physik.uni-goettingen.de/~ostreich/transcode/'
# a52dec lame and libvorbis support come from ffmpeg now.
#             'a52dec:::for decoding and encoding ATSC A/52 streams'
#             'lame:::for link against local lame library'
#             'libvorbis:::for ogg vorbis support'

# libpostproc? --enable-libpostproc 
       REQ=( 'ffmpeg libmpeg2 libpng tiff'
             'ImageMagick:--enable-imagemagick:--disable-imagemagick:for ImageMagick dependent module'
             'a52dec:--enable-a52:--disable-a52:for decoding and encoding ATSC A/52 streams'
             'avifile:--enable-avifile:--disable-avifile:for reading and writing compressed AVI files'
             'freetype:--enable-freetype2:--disable-freetype2:for nice looking fonts'
             'lame:--enable-lame:--disable-lame:for encoding mpeg3s'
             'libdvdread:--enable-libdvdread:--disable-libdvdread:for DVD navigation support'
             'libogg:--enable-ogg:--disable-ogg:for importing ogg audio files'
             'libvorbis:--enable-vorbis:--disable-vorbis:for importing vorbis audio files'
             'libtheora:--enable-theora:--disable-theora:for importing theora audio'
             'libdv:--enable-libdv:--disable-libdv:for libdv dependent modules'
             'lzo:--enable-lzo:--disable-lzo:for lzo dependent modules'
             'libxml2:--enable-libxml2:--disable-libxml2:for libxml2 dependent modules'
             'SDL:--enable-sdl:--disable-sdl:GUI via SDL'
             'jpeg:--enable-libjpeg:--disable-libjpeg:for jpeg dependent modules' )

# mjpegtools not currently compiling
#            'mjpegtools:--enable-mjpegtools:--disable-mjpegtools:for dependent modules'

# libfame 0.9.1 not usable with transcode 1.0.0 because
# /usr/lib/libfame.so: undefined reference to `_mmx_one'
#            'libfame:--enable-libfame:--disable-libfame:for a fast mpeg encoder'

# libmpeg3 1.5.4 has link errors
#            'libmpeg3:--enable-libmpeg3:--disable-libmpeg3:for libmpeg3 dependent modules'

# transcode 1.0.0 not compatibile with libquicktime 0.9.7
#            'libquicktime:--enable-libquicktime --with-libquicktime-includes=/usr/include/lqt:--disable-libquicktime:for quicktime dependent modules'


#             'nasm:::for nasm dependent modules (bbmpeg)'
#             'XviD:::for using the mpeg 4 video codec'
#             'openquicktime:--with-openqt::for quicktime dependent modules' )
#  'MPlayer:::for post processing filter plugin'
# libtheora is still under initial development.
#  'libtheora:::for use of theora codec'

#  libmpeg3 1.5.1 doesn't compile
#  'libmpeg3:::for libmpeg3 dependent modules'

case $VERSION in
 1.0.5) USE_GCC=gcc-v4.2 ;;
esac

  ESTIMATE='6000'
      DESC='transcode is a tool for translating audio/video input formats.
transcode is a text console video-stream processing tool.
It supports elementary video and audio frame transformations.
Some example modules are included to enable import
of MPEG-1/2, Digital Video, and other formats.
It also includes export modules for writing to AVI files
with DivX, OpenDivX, XviD, Digital Video or other codecs.
Direct DVD transcoding is also supported.
A set of tools is available to extract and decode
the sources into raw video/audio streams for import
and to enable post-processing of AVI files.'

build(){
 case $VERSION in
  1.0.6rc1) grep -rl   ffmpeg/avcodec.h * | xargs -r --max-lines=64 \
            sed  -i 's:ffmpeg/avcodec.h:libavcodec/avcodec.h:'
            sed -i 's:-lMagick:-lMagick++:g' configure ;;
  1.0.5) sed -i 's:-lMagick:-lMagick++:g' configure
#         sed -i '/typedef signed long __s32;/d
#                 /typedef unsigned long __u32;/d' import/nuv/RTjpegN.h 
  ;;
 esac
 default_build
}
