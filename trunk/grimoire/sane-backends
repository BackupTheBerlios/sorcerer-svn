# note saned provides an inetd or xinetd daemon for handling
# remote requests for data/image acquisition, but this spell
# is not yet updated to install an xinetd.d configuration file for it.
# 1.0.22 fails compilation.

# header files from all verson of v4l-utils breaks
# the compilation of all versions of sane-backends
# sane backends will use header files from libv4l that include
# header files from v4l-utils.
# strange recursive requirement between libv4l and v4l-utils

   version stable 1.0.22 1.0.22 1.0.21 1.0.20
   require jpeg tiff
  optional libgphoto2    '' '' for digital camera support
  optional libusb-compat '' '' for usb scanner support
  category graphic/scan
 attribute library makej multilib-dual x11
    source ftp://ftp.sane-project.org/  \
           ftp://ftp2.sane-project.org/ \
           ftp://ftp3.sane-project.org/ \
           pub/sane/sane-backends-$VERSION/sane-backends-$VERSION.tar.gz
      info home http://www.sane-project.org/
 freshmeat sane
 conflicts libv4l v4l-utils
      desc 'libraries for scanning

SANE stands for Scanner Access Now Easy.
This package contains the SANE libraries
(this means backends and network scanning parts)
and the command line frontend scanimage.'

build(){
 ./configure \
  --prefix=/usr \
  --sysconfdir=/etc \
  --localstatedir=/var \
  $OPTS &&
 make  STANDARD= &&
 make  STANDARD= DESTDIR=$DESTDIR install
}

post_install(){
 default_post_install
 echo libv4l    | pipe_queue $CAST_QUEUE
 echo v4l-utils | pipe_queue $CAST_QUEUE
 echo libv4l    | pipe_queue $LEECH_QUEUE
 echo v4l-utils | pipe_queue $LEECH_QUEUE
}
