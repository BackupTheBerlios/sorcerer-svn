    stable 5.5.0
   require atlas
  category utility/math
 attribute new console
    source http://www.cise.ufl.edu/research/sparse/umfpack/UMFPACK-$VERSION.tar.gz
# UFconfig, AMD, etc. versions change!
    source http://www.cise.ufl.edu/research/sparse/UFconfig/UFconfig-3.5.0.tar.gz
    source http://www.cise.ufl.edu/research/sparse/amd/AMD-2.2.1.tar.gz
    source http://www.cise.ufl.edu/research/sparse/ccolamd/CCOLAMD-2.7.2.tar.gz
    source http://www.cise.ufl.edu/research/sparse/camd/CAMD-2.2.1.tar.gz
    source http://www.cise.ufl.edu/research/sparse/colamd/COLAMD-2.7.2.tar.gz
    source http://www.cise.ufl.edu/research/sparse/cholmod/CHOLMOD-1.7.1.tar.gz
  homepage http://www.cise.ufl.edu/research/sparse/umfpack
  estimate 1856
      desc 'UMFPACK is a set of routines for solving unsymmetric sparse linear systems, 
Ax=b, using the Unsymmetric MultiFrontal method. Written in ANSI/ISO C,
with a MATLAB (Version 6.0 and later) interface. Appears as a built-in routine
(for lu, backslash, and forward slash) in MATLAB. Includes a MATLAB interface,
a C-callable interface, and a Fortran-callable interface. Note that "UMFPACK"
is pronounced in two syllables, "Umph Pack". It is not "You Em Ef Pack".'

build(){
 case $VERSION in
   5.5.0) sed -i 's:Lib/libufconfig.a:libufconfig.a:' UFconfig/Makefile ;;
 esac
 case $HOSTTYPE in
    x86_64) CONF=${SCRIPT_DIR}/UFconfig.mk.64  ;;
         *) CONF=${SCRIPT_DIR}/UFconfig.mk.32  ;;
 esac

# Create required directory structure
 mv AMD UFconfig CCOLAMD CAMD COLAMD CHOLMOD ../    &&

 cp ../UFconfig/UFconfig.mk{,.orig}                 &&
 cp "$CONF" ../UFconfig/UFconfig.mk                 &&
 patch -p1 < $SCRIPT_DIR/DemoMakefile.patch         &&
 mkdir -p $DESTDIR/usr/{lib,include}                &&
 prepare_install                       &&
 make all install  "DESTDIR=$DESTDIR"  &&
 cd ../AMD                             &&
 make     install  "DESTDIR=$DESTDIR"  &&
 cd ../UFconfig                        &&
 make all install  "DESTDIR=$DESTDIR"
}
