# bmpx support is broken in faad2 2.5 and 2.0
#            'bmpx:--with-bmp:--without-bmp: for bmpx media player support'
#            ':--with-mp4v2:--without-mp4v2:to compile libmp4v2' )

    stable 2.6.1 2.6 2.5
   require automake libsndfile libtool id3lib
  optional xmms --with-xmms --without-xmms to compile XMMS plugins
  switch      --with-drm  --without-drm  to compile libfaad with DRM support
  category audio/codec audio/library
 attribute console
       url $SOURCEFORGE_URL
    source faac/faad2-$VERSION.tar.gz
  homepage http://www.audiocoding.com/modules/wiki/?id=FAAD2
      opts --with-mp4v2 --enable-static=no
  eprovide libmp4v2
  estimate 600
      desc 'faad2 is the freeware advanced audio decoder 2.'


build(){
 case $VERSION in
  2.6.1) sed -i '\,plugins/xmms,d
                 \,plugins/mpeg4ip,d' configure.in
         sed -i 's:plugins::' Makefile.am ;;
  2.5) patch -p1 < $SCRIPT_DIR/faad2-2.5.patch ;;
  2.0) patch -p1 < $SCRIPT_DIR/faad2-2.0.patch
       sed   -i    '2,9d'  Makefile.am ;;
  1.1) patch -p1 < $SCRIPT_DIR/faad2-1.1.patch ;;
 esac

 autoreconf -vif
 default_build
}
