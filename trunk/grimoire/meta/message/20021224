Sorcerer News for 20021215

Subject:  Undressing Sorcerer?

Does the dispel menu in sorcery leave you feeling bewildered
because you know not enough about the relationships between 
spells and their requirements in order to determine what is 
safe to remove from what would cause breaks?

I discovered that applying the simple logic of undressing 
increases the ease and effectiveness of which software can
be safely removed from a sorcerer box.  Here is how it works.

When you undress do you remove your socks first or your shoes?  
Socks first, right?  No, of course not.  It makes sense to 
remove the shoes first, otherwise you would have to break the 
shoe in order to get to the sock.  Therefore, the order which 
spells are presented for removal should follow the same logic.
Just as a sock should not be considered for removal while 
wearing a shoe, neither should a spell be considered for 
removal while it is required by another installed spell.

When you enter the dispel menu in sorcery the spells presented are 
those which are not being required by any other installed spell.
Select spells for removal and attempt to exit the menu. 
sorcery will re-evaluate to discover if with the previously selected
spells removed will any other installed spells no longer be required.
If new installed spells become available for removal then sorcery
will display a removal menu with those spells.
Thus an SA could continue entering, exiting, and re-entering
the menu thereby selecting entire chains of spells to be removed.

Confused yet?  Well it's just like undressing.
First, you remove a coat and realize a sweater was underneath.
Then, you remove the sweater and realize a vest was underneath.
Next, you remove the vest to realize a shirt was underneath.
Finally, continue the process above until the box is stripped
of all unnecessary spells wasting space.

To further increase the benefit of using this new intuitive 
method for removing spells some profiles, like gnome-profile
and kde-profile are being adjusted so that they can become
installed spells.  As installed spells they will require the
other spells that are components of the the desktop environment.
Thus if you cast gnome-profile or kde-profile then on the spell
removal screen those spells gnome-profile and/or kde-profile 
will be displayed instead of the spells required for a gnome
or kde desktop environment.  Therefore, it would become 
difficult if not impossible to accidentally remove a spell
required by the gnome or kde desktop environments which would
cause a break.  A simple analogy is that gnome-profile and 
kde-profile will become overcoats concealing from the dispel
menu the spells required by a gnome and kde desktop.


In reference to older news...

Pruned sources now go straight to the bit bucket instead of TRASH
The default PRUNE is currently set to 0, which indicates that 
no old sources are to be kept when a source is upgrade to current.
PRUNE is a variable which can be adjusted in 
sorcery -> Option Menu -> Rates

The necropolis cache and archive cache save face and space.
When an installed spell is removed an entry in the necropolis cache 
is made if there is no entry for the spell in the archive cache.
The default space allowed for both caches has been trimmed to a 
total of 768M, with the 512M for archive and 256M for necropolis.
The additional 256M to complete a full gig is used as required 
by the library cache.

You are advised to check that necropolis is an enabled 
feature before you begin trimming sorcerer boxes of cruft.
It will expedite heal's fixing of the box in the event that 
a spell is removed which is an undocumented requirement of 
another installed spell which broke.  Also please report
the undocumented requirements that you discover.

How much space on /var does a sorcerer box require?
In addition to the usage of /var by installed spells

archive + necropolis + library	<=	1 GB
one complete source cache	<=	3 GB
one uncompressed cache		<=	1 GB

My /var currently uses 4.0G.  Therefore, about 
5 GB to 6 GB is required to be on the safe side.
However as the grimoire continually gains spell 
the requirement upon /var will increase.

If /var or /var/cache or even /var/cache/library does
not reside on the root partition then you may want to,
for reasons of a surviving reboot, 
echo  "LIBRARY_CACHE=/lib.old"  >>  /etc/sorcery/local.config
Then, the library cache would be available if needed upon reboot.
For a reasonable assurance of a safe reboot
heal; lilo
before shutting down or rebooting.

Also if you have postfix deployed the major 
upgrade to 2.0.0 might cause email problems.
Please read  /usr/doc/postfix/README_FILES/RELEASE_NOTES
Remember to test updates on developmental 
boxes prior to updating production boxes.

Lastly, while the new gtk+ 2.2.0, glib 2.2.0, atk 1.2.0, and
pango 1.2.0 compile fine the gnome desktop may become unusable 
to as little degree as no disruption at all, to a nominal 
degree of having many gnome programs like gnome-terminal 
segmentation fault when initial run, to the extreme extend of 
gdm not running.  Thus we will be staying with gtk+ 1.2.x 
branch until these bugs in the gnome and gtk+ related sources 
are fixed.
