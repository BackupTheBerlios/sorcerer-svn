# glib and pkgconfig have recursive requirements upon each other

# lto enabled glib breaks gobject-introspection

# glib version 2.32.4 uses Python in all tests subdirectories
# and also uses Python for gio/gdbus-2.0/codegen
# Python seems to be mostly a compile time requirement with glib

# version 2.36.2 installs dangling symbolic links
# that should point to it's ELF libraries but point to nothing.

# 2.36.3 2.36.2 failed to compile
# glib uses gettext's /usr/bin/msgfmt

with info    last 20130610
with version bad      2.36.3 2.36.2
with version   stable 2.36.1 2.36.0
with version unstable 2.37.1
with base    gettext libffi pcre pkgconfig zlib
# Omit Python from the I/R if possible
[ -f "${CURRENT_LOGS:-/aux/log/current}"/deployment-docent ] ||
with base    Python
with also    --with-pcre=system --with-threads=posix
with also    --enable-static --enable-shared
with also    --disable-modular-tests
with role    development
with trait   gnome library lto_off makej multilib-concurrent optimize
with source    stable $GNOME_URL sources/glib/${VERSION:0:4}/glib-$VERSION.tar.xz
with source  unstable $GNOME_URL sources/glib/${VERSION:0:4}/glib-$VERSION.tar.xz
with info    home http://www.gtk.org/
with info    docs http://www.gtk.org/documentation.html
with info    cite 'library of useful C routines for trees, hashes, and lists'

build(){
   CFLAGS+=' -fPIC'
 CXXFLAGS+=' -fPIC'
 default_build
}
