# May be required to compile on x86_64?
#     OPTS+=' --with-pic'

# Still working on this spell
# Requires init scripts
# Requires integration with prelude
# Also this nufw fails compilation.
# Maybe it's requirement on mysql is absolute rather than optional?
# fails compilation even when mysql is installed

# error: libnetfilter_queue/libnetfilter_queue.h: No such file or directory
# nufw 2.2.14 requires a legacy kernel?

    stable 2.2.17 2.2.16 2.2.15 2.2.14 2.2.13 2.2.12 2.2.11 2.2.10
   require glib gnutls gsasl init-functions iptables libtool openssl
  optional Linux-PAM  --with-system-auth --without-system-auth for authentication via PAM
  optional gdbm       ''                 ''                    for user authnetication from gdbm database
  optional libident   ''                 ''                    for identification by ident server response
  optional libprelude --with-prelude-log --without-prelude-log for logging to prelude
  optional mysql      --with-mysql-log   --without-mysql-log   for logging to mysql database
  optional openldap   --with-ldap        --without-ldap        for ldap authnetication and acl check
  optional postgresql --with-pgsql-log   --without-pgsql-log   for logging to pgsql database
  category network security
 attribute server
 attribute incomplete
    source http://www.nufw.org/download/nufw/nufw-$VERSION.tar.bz2
  homepage http://www.nufw.org
      opts --with-nfqueue
  estimate 1600
      desc 'nufw provides an authentication network filtering daemon.
It fully integrates with Netfilter and Iptables
and adds authentication capabilities.

If you run a kernel higher than 2.6.14 (and you should!),
you should set the following options:

CONFIG_NETFILTER_XT_TARGET_NFQUEUE=Y or m
CONFIG_NETFILTER_NETLINK=Y or m
CONFIG_IP_NF_CONNTRACK=m (we advise you do not set this option statically)
CONFIG_IP_NF_CONNTRACK_EVENTS=Y

Setting these options will allow you to use the NFQUEUE target,
and use very simple Netfilter rules.

Read:
http://www.nufw.org/docs/howto20.html

And create your own unique certificates


nufw is the server running on the firewall
which receives the packets coming from kernel and
send them to the authentication server and wait a response.

nuauth is the authentication server
which receives the packets coming from nufw and
the packets coming from user and
send back a decision to nufw.'


build(){
 install_etc(){
  install -D -m 0700 /etc/nufw
  for  file in conf/certs/*.pem conf/*.conf conf/*.nufw
  do   install -m 0600 "$file" /etc/nufw
  done
 }

 default_build &&
 install_etc
}
