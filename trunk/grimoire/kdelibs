inherit kde
  CATEGORY="development"
       REQ=( "arts bzip2 docbook-dtd e2fsprogs lua pcre"
             "aspell:::For spell checking" 
             "avahi:::for zero conf support"
             "cups:--enable-cups:--disable-cups:for intergration with common unix printing system"
             "fam:--enable-libfam:--disable-libfam:for file system change notification"
             "heimdal:::for kerberos support"
             "hspell:::for Hebrew spell checking support"
             "jasper:::for jpeg 2K support"
             "libart_lgpl:::for high performance 2d graphics"    
             "mDNSResponder:::for zero conf support"
             "openexr:--with-openexr:--without-openexr:for HDR image file format support"
             "openssl:::for secure socket layer support"
             "openldap:::for ldap support"
             "tiff:--with-tiff:--without-tiff:for TIFF image support" )
#            "arts:--with-arts:--without-arts:for sound support" )
# has optional for sudo
  ESTIMATE="11100"
 FRESHMEAT="kde"
      DESC="kdelibs contains the base applications that form the core of KDE.
kdelibs contains the base applications that form the core of
the K Desktop Environment like the window manager, the terminal
emulator, the control center, the file manager, and the panel."


case  $VERSION  in
  3.5.7) SAFE=( "3.5.7" ); SOURCE[1]="security_patches/post-3.5.7-kdelibs-kdecore-2.diff"  ;;
  3.5.6) # USE_GCC="gcc-v4.0"
         SOURCE[1]="security_patches/post-3.5.6-kdelibs.diff"
         SOURCE[2]="security_patches/CVE-2007-1564-kdelibs-3.5.6.diff"  ;;
esac


current()  {
  case  $VERSION  in
    3.5.7) grep -qx "patching file kdecore/kurl.cpp" $COMPILE_LOGS/kdelibs ;;
    3.5.6) grep -qx "patching file kioslave/ftp/ftp.cc" $COMPILE_LOGS/kdelibs ;;
  esac
}

build() {
  case  $VERSION  in
    3.5.7) patch -p1 < $SCRIPT_DIR/cups13.patch ;;
  esac

  kde_build
}
