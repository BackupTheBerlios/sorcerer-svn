inherit kde
      SAFE=( "3.5.1" "3.5.0" "3.4.3" )
  CATEGORY="development"
case  $VERSION  in
  3.3.2)
 SOURCE[1]="security_patches/post-3.3.2-kdelibs-htmlframes2.patch"
 SOURCE[2]="security_patches/post-3.3.2-kdelibs-kio.diff"
 SOURCE[3]="security_patches/post-3.3.2-kdelibs-kioslave.patch"
 ;;
  3.4.0)
 SOURCE[1]="security_patches/post-3.4.0-kdelibs-kimgio.diff"
 ;;
  3.4.3)
 SOURCE[1]="security_patches/post-3.4.3-kdelibs-kjs.diff"
 ;;
  3.5.0)
 SOURCE[1]="security_patches/post-3.4.3-kdelibs-kjs.diff"
 ;;
esac
# libxft removed from requirements while spell transitions
#      REQ=( "bzip2 docbook-dtd e2fsprogs lesstif libXft libpng libxml2 libxslt qt-x11-free pcre"
       REQ=( "bzip2 docbook-dtd e2fsprogs lesstif libpng libxml2 libxslt qt-x11-free pcre"
             "cups:--enable-cups:--disable-cups:for intergration with common unix printing system"
             "fam:--enable-libfam:--disable-libfam:for file system change notification"
             "heimdal:::for kerberos support"
             "openssl:::for secure socket layer support"
             "openldap:::for ldap support"
             "libart_lgpl:::for high performance 2d graphics"    
             "aspell:::For spell checking" 
             "tiff:--with-tiff:--without-tiff:for TIFF image support" 
             "arts:--with-arts:--without-arts:for sound support" )
   COMPACT="on"
  ESTIMATE="2723"
 FRESHMEAT="kde"
      DESC="kdelibs contains the base applications that form the core of KDE.
kdelibs contains the base applications that form the core of
the K Desktop Environment like the window manager, the terminal
emulator, the control center, the file manager, and the panel."


build()  {
  case  $VERSION  in
    3.3.2)
    patch  -p0              <  $SOURCE_CACHE/kdelibs/$VERSION/${SOURCE[1]##*/}
    patch  -p0  -d kio/kio  <  $SOURCE_CACHE/kdelibs/$VERSION/${SOURCE[2]##*/}
    patch  -p0              <  $SOURCE_CACHE/kdelibs/$VERSION/${SOURCE[3]##*/}
  ;;
    3.4.0)
    patch  -p0  -d kimgio   <  $SOURCE_CACHE/kdelibs/$VERSION/${SOURCE[1]##*/}
  ;;
    3.4.3)
    patch  -p0              <  $SOURCE_CACHE/kdelibs/$VERSION/${SOURCE[1]##*/}
  ;;
    3.5.0)
    patch  -p0              <  $SOURCE_CACHE/kdelibs/$VERSION/${SOURCE[1]##*/}
  ;;
  esac
  kde_build
}


current()  {
  case  $VERSION  in
    3.3.2) grep -qx "patching file kioslave/ftp/ftp.cc" $COMPILE_LOGS/kdelibs ;;
    3.4.0) grep -qx "patching file xview.cpp"           $COMPILE_LOGS/kdelibs ;;
    3.4.3) grep -qx "patching file kjs/function.cpp"    $COMPILE_LOGS/kdelibs ;;
    3.5.0) grep -qx "patching file kjs/function.cpp"    $COMPILE_LOGS/kdelibs ;;
  esac
}
