  stable 3.2.2 3.2.1 3.1 3.0
    IGNORE=pre
 MUVERSION=( 2.4.27 2.4.26 )
  CATEGORY='kernel'
 ATTRIBUTE='console'
    SOURCE=( "/pub/linux/utils/kernel/module-init-tools/module-init-tools-$VERSION.tar.bz2"
             "/pub/linux/utils/kernel/modutils/v2.4/modutils-$MUVERSION.tar.bz2" )
       URL="$KERNEL_URL"
  HOMEPAGE='ftp://ftp.kernel.org/pub/linux/kernel/people/rusty/modules/FAQ'
       REQ='bison flex init-functions'
case  MVERSION  in
  2.4.27) USE_GCC=gcc-v3.4 ;;
esac
   EXCLUDE="/etc/modprobe.conf
            /etc/modules
            /etc/modules.conf"
  EPROVIDE="linux-module-tools"
  ESTIMATE='183'
      DESC='module-init-tools+modutils provides modules utilities for old and new linux
module-init-tools is used for loading modules with linux 2.6.0 and later kernels
modutils is used for loading modules before linux 2.6.0
This spell provides both module-init-tools and modutils
for boxes that may boot older linux kernels.'

build(){

 conf_install(){
  mkdir  -vp /etc/modules.d
  touch      /etc/modules /etc/modprobe.conf
 }

 sed -i "s:share/man/man:man/man:" Makefile.in

 cd  modutils-$MUVERSION &&
 ./configure             \
 --build=$BUILD          &&
 make                    &&
 cd      ..              &&

 ./configure             \
 --build=$BUILD          \
 --prefix=/              \
 --sysconfdir=/etc       \
 --localstatedir=/var    \
 $OPTS                   &&
 make                    &&
 prepare_install         &&

 cd  modutils-$MUVERSION &&
 make install            &&
 cd   ..                 &&
 make moveold            &&

 make    install         &&
    conf_install
}
