# write some spells for optionals:

#   * KWebKitPart  <https://svn.kde.org/home/kde/trunk/extragear/base/kwebkitpart>
#     KWebKitPart libraries and header files
#     KWebKitPart is necessary to compile KGet support for KWebKitPart.
#   * libgadu (1.8.0 or higher)  <http://toxygen.net/libgadu/>
#     A library providing support for Gadu-Gadu protocol
#     Required for Kopete Gadu-Gadu protocol

# 4.10.5 4.10.4 failed to compile
with trait   broke
with inherit kde-v4
with base    kde-baseapps kde-workspace libktorrent
#with base    kdepimlibs-v4 libktorrent ortp
with elect   LibVNCServer            '' '' to build krfb and VNC support in krdc
with elect   avahi-qt-x11-opensource '' '' for service discovery and krfb, krd, dnssd ioslave
with elect   jpeg                    '' '' for JPEG images in Krdc
with elect   libgadu
with elect   libidn                  '' '' for internationalized DNS in Kopete Jabber plugin
with elect   libmms
#with elect   libmsn
with elect   libotr
with elect   libxslt                 '' '' for for XSLT processing
with elect   linphone
with elect   meanwhile               '' '' for the Kopete Meanwhile protocol
# mediastreamer currently broke
#with elect   mediastreamer
# msilbc no longer compiles and was removed from the grimoire
#with elect   msilbc
with elect   openslp                 '' '' for SLP support in Krfb
with elect   openssl                 '' '' for secure encrypted connections
with elect   qca                     '' '' to build kopete groupwise and jabber protocols
with elect   sqlite                  '' '' for kopete statistics plugin
with elect   telepathy-qt4           '' '' for telepathy tubes support
with elect   v4l-utils
#with elect   xmms                    '' '' for music playing
with role    network/email network/news
with trait   library makej multilib-fail
#trait multilib-concurrent
with info    cite 'chat, networking configuration, filesharing, downloading prorams
Filesharing: network file sharing
kdnssd: Zeroconf
KGet: an advanced download manager
Kopete: Instant Messaging client
KPPP: dialer and front end for pppd
KRDC: a client for Desktop Sharing
Krfb: Desktop Sharing server, allow others to access your desktop via VNC'

if    [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
then  with also    -DMOZPLUGIN_INSTALL_DIR=/usr/lib64/mozilla/plugins
else  with also    -DMOZPLUGIN_INSTALL_DIR=/usr/lib/mozilla/plugins
fi

build(){
 case $VERSION in
  4.10.3) sed -i '/V4L2_CID_VCENTER/d
                  /V4L2_CID_HCENTER/d' \
              kopete/libkopete/avdevice/videodevice.cpp ;;
 esac
 kde_build
}
