#!/bin/bash

### BEGIN INIT INFO
# Provides: exportfs
# Required-Start: rpcbind var_lib_nfs
# Required-Stop:  kill
# Should-Start: $network
# Should-Stop:  rpcbind $network
# Default-Start: 2 3 4 5
# Default-Stop: 0 1 6
# Short-Description: exportfs 
rpc.nfsd implements the user level part of the NFS service.
# Description: rpc.nfsd merely starts the specified number of kernel threads.
### END INIT INFO

. /lib/lsb/init-functions

SERV=/sbin/exportfs
NAME=exportfs
case $@ in
 start) OPTS=-r ;;
  stop) OPTS=-ua ;;
esac

start(){
 [ -f /etc/exports ] &&
 if   log_warning_msg "$NAME -r starting"; $SERV -r
 then log_success_msg "$NAME started"
 else log_failure_msg "$NAME not started"
 fi
}

stop(){
 [ -f /etc/exports ] &&
 if   log_warning_msg "$NAME -ua stopping"; $SERV -ua
 then log_success_msg "$NAME stopped"
 else log_failure_msg "$NAME not stopped"
 fi
}

parse "$@"
