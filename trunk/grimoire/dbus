# According to: http://www.freedesktop.org/wiki/Software/dbus
# The latest release is D-Bus 1.2.1. (2008-04-04)
# This begins a new series of stable releases. 
# Note that 1.1.20 is considered being 1.2.0

# gnome-control-center requires dbus 1.1.20, but still has compile errors.
# dbus version 1.1.20 began requiring expat

# 1.1.20 is not a security release, however for consistency
# I want all boxes to use the new stable branch.
# 1.2.10 does not compile

    stable 1.2.12 1.2.10 1.2.8 1.2.4 1.2.3 1.2.1
   require expat init-functions libselinux
  optional libSM  '' '' for x11 session managment support
  optional libX11 '' '' for x11 support
  category system
 attribute console x11
    source http://dbus.freedesktop.org/releases/dbus/dbus-$VERSION.tar.gz
  homepage http://www.freedesktop.org/Software/dbus
      opts --enable-static=no
  estimate 800
     iwall 'dbus will soon restart'
      desc 'dbus is a message bus system,
a simple way for applications to talk to one another.
It supplies both a system daemon
(for events such as "new hardware device added" or "printer queue changed")
and a per-user-login-session daemon
(for general IPC needs among user applications).
Also, the message bus is built on top of a general one-to-one message
passing framework, which can be used by any two apps to communicate
directly (without going through the message bus daemon).'

build(){
# The follow patch allows hal to restart automatically after update
# without having to restart dbus or SIGHUP d bus.
# When it no longer applies it can probably be removed.
# However, patch does not do what was desired,
# and therefore no longer required.
# patch -p1 < $SCRIPT_DIR/dbus-1.2.4.system.conf.in.patch

mkdir    -pm 755 /var/empty
groupadd -K GID_MIN=256 -K GID_MAX=511    messagebus                          2>/dev/null
useradd  -K UID_MIN=256 -K UID_MAX=511 -g messagebus -d /var/empty messagebus 2>/dev/null
default_build
}
