inherit kde
  SAFE=( "3.4.3" )
  CATEGORY="utility file-manager terminal-emulator"
case  $VERSION  in
  3.3.2)
 SOURCE[1]="security_patches/post-3.3.2-kdebase-htmlframes2.patch"
  ;;
  3.4.0)
 SOURCE[1]="hal_050.patch"
    URL[1]="http://svn.exactcode.de/t2/trunk/package/kde/kdebase"
  ;;
  3.4.2)  SOURCE[1]="security_patches/post-3.4.2-kdebase-kcheckpass.diff"
  ;;
esac
       REQ=( "kdelibs"
             "Linux-PAM:::for pluggable authentication"
             "cdparanoia:::to rip compact disks"
             "cyrus-sasl:::for secure network authentication"
             "lame:::to rip compact disks"
             "libusb:::for logiitech mouse support"
             "java:::for java"
             "openldap:::for lightweight directory access protocol support"
             "samba:::for browsing windows shares" )
 FRESHMEAT="kde"
  ESTIMATE="4838"
      DESC="kdebase contains the base applications that from KDE.
kdebase contains the base applications that 
form the core of the K Desktop Environment like 
the window manager, the terminal emulator, the 
control center, the file manager, and the panel."


build()  {
  case  $VERSION  in
    3.3.2) patch -p0 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} ;;
    3.4.0) patch -p1 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} ;;
    3.4.2) patch -p1 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} kcheckpass/kcheckpass.c  ;;
#           sed   -i  "\,#include <linux/joystick.h>,itypedef __signed__ long long __s64;"  kcontrol/joystick/joydevice.h
#           sed   -i  "\,#include <linux/joystick.h>,i#define BITS_PER_LONG 32"  kcontrol/joystick/joydevice.h  ;;
#    3.4.3) sed   -i  "\,#include <linux/joystick.h>,itypedef __signed__ long long __s64;"  kcontrol/joystick/joydevice.h
#           sed   -i  "\,#include <linux/joystick.h>,i#define BITS_PER_LONG 32"  kcontrol/joystick/joydevice.h  ;;
  esac
  kde_build  &&
  install_pamd
}


current()  {
  case  $VERSION  in
    3.3.2)  grep  -qx  "patching file konqueror/konq_mainwindow.cc"  $COMPILE_LOGS/kdebase  ;;
    3.4.0)  grep  -qx  "patching file kioslave/media/kdedmodule/halbackend.cpp"  $COMPILE_LOGS/kdebase  ;;
    3.4.2)  grep  -qx  "patching file kcheckpass/kcheckpass.c"  $COMPILE_LOGS/kdebase  ;;
  esac
}
