inherit kde
  CATEGORY="utility/file-manager utility/terminal-emulator"
case  $VERSION  in
  3.5.2)  SAFE=( "3.5.2" "3.5.1" "3.5.0" "3.4.3" )  ;;
esac
       REQ=( "kdelibs"
             "Linux-PAM:::for pluggable authentication"
             "OpenEXR:::for HDR image file format support"
             "cdparanoia:::to rip compact disks"
             "cyrus-sasl:::for secure network authentication"
             "lame:::to rip compact disks"
             "libusb:::for logiitech mouse support"
             "jdk:::for java"
             "openldap:::for lightweight directory access protocol support"
             "samba:::for browsing windows shares" )
 FRESHMEAT="kde"
  ESTIMATE="5000"
      DESC="kdebase contains the base applications that from KDE.
kdebase contains the base applications that 
form the core of the K Desktop Environment like 
the window manager, the terminal emulator, the 
control center, the file manager, and the panel."


build()  {
  case  $VERSION  in
    3.3.2) patch -p0 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} ;;
    3.4.0) patch -p1 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} ;;
    3.4.2) patch -p1 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} kcheckpass/kcheckpass.c  ;;
#           sed   -i  "\,#include <linux/joystick.h>,itypedef __signed__ long long __s64;"  kcontrol/joystick/joydevice.h
#           sed   -i  "\,#include <linux/joystick.h>,i#define BITS_PER_LONG 32"  kcontrol/joystick/joydevice.h  ;;
#    3.4.3) sed   -i  "\,#include <linux/joystick.h>,itypedef __signed__ long long __s64;"  kcontrol/joystick/joydevice.h
#           sed   -i  "\,#include <linux/joystick.h>,i#define BITS_PER_LONG 32"  kcontrol/joystick/joydevice.h  ;;
  esac
  kde_build  &&
  install_pamd
}


current()  {
  case  $VERSION  in
    3.3.2)  grep  -qx  "patching file konqueror/konq_mainwindow.cc"  $COMPILE_LOGS/kdebase  ;;
    3.4.0)  grep  -qx  "patching file kioslave/media/kdedmodule/halbackend.cpp"  $COMPILE_LOGS/kdebase  ;;
    3.4.2)  grep  -qx  "patching file kcheckpass/kcheckpass.c"  $COMPILE_LOGS/kdebase  ;;
  esac
}
