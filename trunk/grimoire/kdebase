inherit kde
  CATEGORY="utility/file-manager utility/terminal-emulator"
       REQ=( "hal kdelibs libXScrnSaver libXcomposite libXdamage libfontenc libxkbfile libXxf86misc"
             "Linux-PAM::--with-pam=no:for pluggable authentication"
             "openexr:::for HDR image file format support"
             "cdparanoia:::to rip compact disks"
             "cyrus-sasl:::for secure network authentication"
             "gift:::for image indexing in the kde control center"
             "lame:::to rip compact disks"
             "libusb:--with-libusb:--without-libusb:for logiitech mouse support"
             "libraw1394:--with-libraw1394:--without-libraw1394:to enable visualization of ieee1394/firewire"
             "lm_sensors:::for hardware monitoring and reporting"
             "jdk::--without-java:for java"
             "openldap::--without-ldap:for lightweight directory access protocol support"
             "samba::--without-samba:for browsing windows shares" )
 FRESHMEAT="kde"
  ESTIMATE="17000"
      DESC="kdebase contains the base applications that from KDE.
kdebase contains the base applications that 
form the core of the K Desktop Environment like 
the window manager, the terminal emulator, the 
control center, the file manager, and the panel."


build()  {
  case  $VERSION  in
#           sed   -i  "\,#include <linux/joystick.h>,i#define BITS_PER_LONG 32"  kcontrol/joystick/joydevice.h  ;;
#    3.4.3) sed   -i  "\,#include <linux/joystick.h>,itypedef __signed__ long long __s64;"  kcontrol/joystick/joydevice.h
#           sed   -i  "\,#include <linux/joystick.h>,i#define BITS_PER_LONG 32"  kcontrol/joystick/joydevice.h  ;;
    3.4.2) patch -p1 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} kcheckpass/kcheckpass.c  ;;
#           sed   -i  "\,#include <linux/joystick.h>,itypedef __signed__ long long __s64;"  kcontrol/joystick/joydevice.h
    3.4.0) patch -p1 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} ;;
    3.3.2) patch -p0 < $SOURCE_CACHE/kdebase/$VERSION/${SOURCE[1]##*/} ;;
  esac
  kde_build  &&
  install_pamd
}


current()  {
  case  $VERSION  in
    3.4.2)  grep  -qx  "patching file kcheckpass/kcheckpass.c"  $COMPILE_LOGS/kdebase  ;;
    3.4.0)  grep  -qx  "patching file kioslave/media/kdedmodule/halbackend.cpp"  $COMPILE_LOGS/kdebase  ;;
    3.3.2)  grep  -qx  "patching file konqueror/konq_mainwindow.cc"  $COMPILE_LOGS/kdebase  ;;
  esac
}
