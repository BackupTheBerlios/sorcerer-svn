# glest 3.2.1 is not compatible with wxWidgets 2.8.9
# and appears to require wxWidgets
# No successful compilation therefore spell never fully checked

   version stable 3.2.2 3.2.1
   require SDL autoconf jam libvorbis openal xerces-c
  category game
 attribute x11 new
 attribute broke
    source $SOURCEFORGE_URL glest/glest_source_$VERSION.zip
    source $SOURCEFORGE_URL glest/glest_data_$VERSION.zip
      info home  http://glest.org/en/index.php
      desc 'a free 3D real-time strategy game.
Armies of either the Tech or Magic factions do battle.
The Magic faction has mages and summoned creatures.
The Tech  faction has warriors and mechanical devices.'

build(){
 custom_install(){
  find glest_game         | xargs --max-lines=2048 chown root:root
  find glest_game -type f | xargs --max-lines=2048 chmod 0644
  find glest_game -type d | xargs --max-lines=2048 chmod 0755

  mkdir  -pvm 755                   $DESTDIR/usr/{bin,libexec,share}
  install -vm 755 mk/linux/glest    $DESTDIR/usr/libexec/ &&
  install -vm 755 -d                $DESTDIR/usr/share
  cp      -va glest_game            $DESTDIR/usr/share/
  install -vm 644 glest.ini         $DESTDIR/usr/share/glest_game
  install -vm 755 $SCRIPT_DIR/glest $DESTDIR/usr/bin
 }

 cd mk/linux
 sh ./autogen.sh
 ./configure
 jam &&
 cd ../.. &&
 custom_install
}
