   VERSION=( 3.7 )
    IGNORE="alpha\|beta\|37"
  CATEGORY='graphic'
 ATTRIBUTE='library x11'
    SOURCE="glut-$VERSION.tar.gz"
       URL='http://www.opengl.org/resources/libraries/glut/'
  HOMEPAGE='http://www.opengl.org/'
       REQ='imake'
# requirement list incomplete on glut, use MesaLib if you can
  ESTIMATE='769'
      DESC="glut is an API for small to medium sized OpenGL programs.
The GLUT API is intended for small to medium sized OpenGL Programs.
It's well suited for basic UI:s, and crossplatform applications.
The GLUT library supports the following functionality: multiple
windows for OpenGL rendering, callback driven event processing,
an 'idle' routine and timers, utility routines to generate various
solid and wire frame objects, support for bitmap and stroke fonts,
as well as miscellaneous window management functions."

build() {
   MESA_FIX="s/\$(TOP)\/..\/lib\/libMesa/\/usr\/X11R6\/lib\/lib/"
SYMBOL_LIBS="-L/usr/X11R6/lib64,-L/usr/X11R6/lib,-lX11,-lGL,-lGLU,-lXi,-lXmu"
 SYMBOL_FIX="s:,libglut.so.3:,libglut.so.3,$SYMBOL_LIBS:"
 CFLAGS_FIX="s:-O2 -m486:$CFLAGS:"

cp     Glut.cf  Glut.cf.bak                                   &&
sed    $MESA_FIX < linux/Glut.cf > Glut.cf                    &&
imake  -DUseInstalled -I/usr/X11R6/lib/X11/config -DTOPDIR=.  &&
xmkmf  -a                                                     &&
cp     lib/glut/Makefile lib/glut/Makefile.bak                &&
sed    "$CFLAGS_FIX"  <     linux/Makefile                    |
sed    "$MESA_FIX"                                            |
sed    "$SYMBOL_FIX"  >  lib/glut/Makefile                    &&
cd     lib/glut                                               &&
make                                                          &&
prepare_install                                               &&
ln     -sf libglut.so.3.7  libglut.so.3                       &&
ln     -sf libglut.so.3.7  libglut.so                         &&
cp     -d libglut*        /usr/lib                            &&
cd     ../..                                                  &&
cp     include/GL/glut.h  /usr/include/GL
}
