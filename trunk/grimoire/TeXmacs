# version 1.0.7.16 failed compilation

   version   stable 1.0.7.15
   version unstable 1.0.7.16
   require freetype guile libXext texlive
  optional imlib2 --with-imlib2=yes '' to accelerate rendering of images
case $VERSION in
 1.0.7.16)
   require guile-v1.8 ;;
 1.0.7.15)
   require guile-v1.8 ;;
esac
      opts --disable-qt
  category utility/editor
 attribute makej x11
     source   stable ftp://ftp.texmacs.org/TeXmacs/tmftp/source/TeXmacs-$VERSION-src.tar.gz
     source unstable ftp://ftp.texmacs.org/TeXmacs/tmftp/source/TeXmacs-$VERSION-src.tar.gz
      info last 20120710
      info home http://www.texmacs.org
      info vurl http://www.texmacs.org/tmweb/download/sources.en.html
# Does it have static link with xorg-server?
# Does the --with-imlib2=yes actually use imlib2?
 freshmeat texmacs
      desc 'WYSIWYG scientific TeX editor
The program implements high-quality typesetting using TeX fonts,
but it is also provides a user-friendly interface.
Finally, TeXmacs supports the Guile/Scheme extension language,
which makes it possible to adapt the user interface to
specific needs and even to extend the editor.'

build(){

 case  $VERSION  in
  1.0.7.15)  sed  -i  "s:-Wl,-rpath,:-Wl,-rpath-link,/opt/guile/1.8/lib -Wl,-rpath,/opt/guile/1.8/lib:"  configure
             export  PATH="/opt/guile/1.8/bin:$PATH"  ;;
  1.0.7.14)  sed  -i  "s:-Wl,-rpath,:-Wl,-rpath-link,/opt/guile/1.8/lib -Wl,-rpath,/opt/guile/1.8/lib:"  configure
             export  PATH="/opt/guile/1.8/bin:$PATH"  ;;
 esac

 EO="--enable-optimize=$CXXFLAGS"

 ./configure           \
  --prefix=/usr        \
  --sysconfdir=/etc    \
  --localstatedir=/var \
  "$EO"                \
  $OPTS &&
 make   &&
 make install "DESTDIR=$DESTDIR"
}
