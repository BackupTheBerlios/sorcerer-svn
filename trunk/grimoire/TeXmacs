# Freshmeat announcement for TeXmacs 1.0.7 is:
# This version comes with an experimental Qt port.

   version stable 1.0.7.11 1.0.7.10
#  require freetype guile libXext teTeX
   require freetype guile libXext texlive
  optional imlib2 --with-imlib2=yes '' to accelerate rendering of images
# 1.0.6.1 and 1.0.6.2 have compile error
  category utility/editor
 attribute makej x11
    source ftp://ftp.texmacs.org/pub/TeXmacs/targz/TeXmacs-$VERSION-src.tar.gz
      info last 20110908
      info home  http://www.texmacs.org
      vurl http://www.texmacs.org/tmweb/download/sources.en.html
# Does it have static link with xorg-server?
# Does the --with-imlib2=yes actually use imlib2?
 freshmeat texmacs
      desc 'WYSIWYG scientific TeX editor
The program implements high-quality typesetting using TeX fonts,
but it is also provides a user-friendly interface.
Finally, TeXmacs supports the Guile/Scheme extension language,
which makes it possible to adapt the user interface to
specific needs and even to extend the editor.'

build(){

# The following case statements commented out because
# the installed version of guile was rolled back to 1.6.x
# and guile-v1.8 was placed in /opt/guile/1.8/...

# case  $VERSION  in
#   1.0.6.3)  sed  -i  "s:-Wl,-rpath,:-Wl,-rpath-link,/opt/guile/1.6/lib -Wl,-rpath,/opt/guile/1.6/lib:"  configure
#             export  PATH="/opt/guile/1.6/bin:$PATH"  ;;
#   1.0.6.4)  sed  -i  "s:-Wl,-rpath,:-Wl,-rpath-link,/opt/guile/1.6/lib -Wl,-rpath,/opt/guile/1.6/lib:"  configure
#             export  PATH="/opt/guile/1.6/bin:$PATH"  ;;
# esac

EO="--enable-optimize=$CXXFLAGS"

./configure          \
--prefix=/usr        \
--sysconfdir=/etc    \
--localstatedir=/var \
"$EO"                \
$OPTS &&
make &&
make install "DESTDIR=$DESTDIR"
}
