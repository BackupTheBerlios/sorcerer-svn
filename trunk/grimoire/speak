# 1.46.02-source requires obsolete version of portaudio
# however source can be instructed to use pulseaudio instead

   version stable 1.46.02-source 1.45.05-source 1.45.03-source 1.44.05-source 1.44.03-source
   require pulseaudio
  category audio/speech
 attribute console library makej multilib-dual
    source $SOURCEFORGE_URL espeak/espeak/espeak-${VERSION:0:4}/espeak-$VERSION.zip
      info last 20120116
      info home http://espeak.sourceforge.net/
 freshmeat espeak
      desc 'also called espeak is a software speech synthesizer for English'

build(){
build_old(){
 manual_install(){
  mkdir -p $DESTDIR/usr/{bin,share}
  install -m 755 speak $DESTDIR/usr/bin
  cd ..
  find -type f | xargs --max-lines=64 chmod 644
  find -type d | xargs --max-lines=64 chmod 755
  cp -av espeak-data $DESTDIR/usr/share
 }

 cd src
 make &&
 manual_install
}

 local LIBDIR
 if   [[ $HOSTTYPE == x86_64 ]] && ! [[ $CFLAGS =~ -m32 ]]
 then LIBDIR=/usr/lib64
 else LIBDIR=/usr/lib
 fi

 cd src &&
 make AUDIO=pulseaudio "LIBDIR=$LIBDIR" &&
 make AUDIO=pulseaudio "LIBDIR=$LIBDIR" install DESTDIR=$DESTDIR
}
