# Always check that MesaLib compiles after updating libdrm
# libdrm 2.3.1 compiled, however
# MesaLib 7.0.1 did not compile with libdrm 2.3.1
# MesaLib 7.1 and 7.2 require libdrm 2.3.1
# MesaLib 7.8.1 and libdrm 2.4.20 not compatible according to Evert

# libdrm 2.4.31 breaks compilation lib MesaLib 7.11.2

   version   stable 2.4.33 2.4.32 2.4.31 2.4.30 2.4.28
   version unstable 2.4.33
   require libpciaccess libpthread-stubs pkgconfig
      opts --enable-nouveau-experimental-api --enable-vmwgfx-experimental-api
  category graphic
 attribute library makej multilib-concurrent
    source http://dri.freedesktop.org/libdrm/libdrm-$VERSION.tar.gz
      info last 20120328
      info home http://dri.freedesktop.org/wiki/
      info mail http://dri.freedesktop.org/wiki/MailingLists
      desc 'library for DRM'

build(){
 sed -i 's:tests::' Makefile.in
 default_build
}

current(){
 case $VERSION in
  2.4.27) [ -f /usr/lib64/pkgconfig/libdrm_nouveau.pc ] ||
          [ -f   /usr/lib/pkgconfig/libdrm_nouveau.pc ] ;;
 esac
}
