#            'libselinux:--enable-selinux:--disable-selinux:for SELinux support'
# gnome-python needed for hal-device-manager but it creates a loop due to its
# dependence on gnome-vfs which requires hal
#             'gnome-python:::for hal-device-manager' 

# --disable-policy-kit is OK for now, read 
# http://www.mail-archive.com/desktop-devel-list@gnome.org/msg06861.html


   version stable 0.5.14
   require hal-info dbus-glib pciutils perl--XML-Parser pkgconfig polkit udev util-linux
# for fast_event
   require procps

  optional parted --enable-parted
# Does not seem to be able to properly detect and use libusb or libusb-compat
# optional libusb-compat
      opts --disable-gtk-doc
      opts --with-hwdata=/usr/share/
      opts --with-pid-file=/var/run/haldaemon.pid
      opts --enable-static=no
      opts --with-udev-prefix=/lib
      opts --with-eject=/bin/eject
      opts --enable-console-kit --enable-acpi-ibm --enable-acpi-toshiba --enable-umount-helper
      opts --disable-policy-kit
# --enable-acl-management requires --enable-policy-kit
#     opts --enable-acl-management

#  require hal-info dbus-glib pciutils perl--XML-Parser udev
# libselinux 
# optional gtk-doc        --enable-gtk-doc --disable-gtk-doc for DocBook documentation
  sys_user haldaemon
  category system
 attribute console library
#attribute multilib-fail
    source http://hal.freedesktop.org/releases/hal-$VERSION.tar.gz
      info home  http://www.freedesktop.org/wiki/Software/hal
 freshmeat halayer
      desc 'hardware abstraction layer
HAL (Hardware Abstraction Layer) is a specification
and an implementation of a hardware abstraction layer.
It encompasses a shared library for use in applications, a daemon,
a hotplug tool, command line tools, and a set of stock device info files.'

post_install(){
 default_post_install
 /etc/init.d/dbus-daemon restart
 /etc/init.d/hald restart
}
