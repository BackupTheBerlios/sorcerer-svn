# According to
# http://www.nabble.com/Decibel-0.5.0-doesn't-compile-td15291343.html
# I believe it's currently required to have
# telepathy-qt and tapioca-qt 
# from the tapioca subversion repository in order to build decibel.
   VERSION=( 0.5.0 )
  CATEGORY='network/chat'
#ATTRIBUTE='library x11'
 ATTRIBUTE='library x11 broken'
    SOURCE="decibel-$VERSION.tar.gz"
       URL='http://decibel.kde.org/fileadmin/downloads/decibel/releases/'
  HOMEPAGE='http://decibel.kde.org/'
       REQ='tapioca-qt'
      OPTS='-DCMAKE_INSTALL_PREFIX:PATH=/opt/kde4
            -DCMAKE_INSTALL_RPATH:PATH=/opt/kde4/lib:/opt/kde4/lib64
            -DCMAKE_SKIP_BUILD_RPATH:BOOL=TRUE
            -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=TRUE
            -DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=TRUE
            -DCMAKE_BUILD_TYPE=Release'
# case $HOSTTYPE in
#  x86_64) OPTS+=' -DLIB_DESTINATION=lib64' ;;
# esac
  ESTIMATE='100'
      DESC='decibel is a realtime communications framework.
decibel integrating services like CTI (Computer Telephone Integration), 
VoIP (Voice over IP), text based chat and instant messaging.'

build(){
 export PATH="/usr/bin/qt4:$PATH"
 mkdir build
 cd    build
 cmake $OPTS ..  &&
 make            &&
 prepare_install &&
 make    install
}
