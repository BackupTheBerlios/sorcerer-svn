# According to
# http://www.nabble.com/Decibel-0.5.0-doesn't-compile-td15291343.html
# decibel may require
# telepathy-qt and tapioca-qt 
# from the tapioca subversion repository in order to build decibel.

    stable 0.5.0
   require tapioca-qt
  category network/chat
 attribute library x11
 attribute broke
    source http://decibel.kde.org/fileadmin/downloads/decibel/releases/decibel-$VERSION.tar.gz
  homepage http://decibel.kde.org/
      opts -DCMAKE_INSTALL_PREFIX:PATH=/opt/kde4
      opts -DCMAKE_INSTALL_RPATH:PATH=/opt/kde4/lib:/opt/kde4/lib64
      opts -DCMAKE_SKIP_BUILD_RPATH:BOOL=TRUE
      opts -DCMAKE_BUILD_WITH_INSTALL_RPATH:BOOL=TRUE
      opts -DCMAKE_INSTALL_RPATH_USE_LINK_PATH:BOOL=TRUE
      opts -DCMAKE_BUILD_TYPE=Release
# case $HOSTTYPE in
#  x86_64) OPTS+=' -DLIB_DESTINATION=lib64' ;;
# esac
  estimate 100
      desc 'decibel is a realtime communications framework.
decibel integrating services like CTI (Computer Telephone Integration), 
VoIP (Voice over IP), text based chat and instant messaging.'

build(){
 export PATH="/usr/bin/qt4:$PATH"
 mkdir build
 cd    build
 cmake $OPTS ..  &&
 make            &&
 prepare_install &&
 make    install
}
