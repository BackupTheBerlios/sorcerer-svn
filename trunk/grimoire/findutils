# 4.4.0 gained solo trait so that
# find and xargs can be installed in /bin rather than /usr/bin
# so that /etc/init.d/fstab provided by init-scripts can execute properly
# Why are versions 4.5.x unstable?  Are they actually unstable?

with version   stable 4.4.2
with version unstable 4.5.10
with switch  -static '' to make static linked find
with role    utility
with trait   console lto makej solo
with source    stable $GNU_URL findutils/findutils-$VERSION.tar.gz
with source  unstable $GNU_URL findutils/findutils-$VERSION.tar.gz
with info    good 20120607
with info    last 20090606
with info    home http://www.gnu.org/software/findutils/
with info    docs http://www.gnu.org/software/findutils/manual/find.html
with protect /bin/find
with protect /bin/xargs
with info    cite 'utilities for locating files
find	finds files that match certain criteria performs
	arbitrary operations on them interactively and
	in shell scripts
locate	scans a database for file names that match a pattern
xargs	applies a command to a list of files'

build(){

 make_static(){
  if [ -n "$STATIC" ]; then
   export LDFLAGS+=" $STATIC"
   rm -f find/find
   make "LDFLAGS=$LDFLAGS"
   install -vm 755 find/find  $DESTDIR/usr/bin/
  fi
 }

 if [[ $OPTS =~ -static ]]; then
    OPTS=${OPTS/-static}
        STATIC="-static"
 fi

 sed -i 's:@bindir@:/bin:' locate/updatedb.sh
 default_build &&
 make_static   &&
 mkdir -pvm 755                   $DESTDIR/bin &&
 mv $DESTDIR/usr/bin/{find,xargs} $DESTDIR/bin/
}
