   VERSION=( "1.1" )
    IGNORE="gt"
  CATEGORY="administration/log"
 ATTRIBUTE="server"
    SOURCE="newsyslog-$VERSION.tar.gz"
       URL="ftp://ftp.weird.com/pub/local/
            http://ftp.weird.com/ftp/pub/local/"
  HOMEPAGE="http://www.weird.com/~woods/projects/newsyslog.html"
       REQ="groff gzip"
  ESTIMATE="156"
      DESC="newsyslog rotates and archives log files.
newsyslog is an updated version of a package put
together by Theodore Tso of MIT Project Athena
(which is included in NetBSD, FreeBSD, OpenBSD, etc.).
It manages the rotation and archiving of log files
(primarily those written to by syslogd)."

build() {
install_conf_scripts()  {
  NC="newsyslog.conf"

  if  !  [  -f           /etc/$NC  ];  then
    sed  -i  "s:dialer:ppp:"  $NC
    cp                        $NC  /etc
  fi
}

sed  -i  "s:psman htmlman:psman:"  Makefile.in

WHAT="rc=\$?; rm -f \$tmpin \$tmpout; trap 0; exit \$rc"

# sed  -i  "/^trap /itp() { $WHAT; }
#           s:'$WHAT':tp:"  mksigname.sh

./configure  --build=$BUILD        \
             --prefix=/usr         \
             --sysconfdir=/etc     \
             --localstatedir=/var  \
             --bindir=/usr/sbin    \
             --with-gzip           \
             $OPTS                 &&
make    SHELL=/bin/bash            &&
prepare_install                    &&
make    install                    &&
        install_conf_scripts
}
