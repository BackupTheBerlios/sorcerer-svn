   VERSION=( "2.0.2" "2.0.1" "2.0.0" )
      SAFE=( "2.0.2" )
    IGNORE="^2\.9\.\|^2\.1"
  CATEGORY="time"
 ATTRIBUTE="console"
    SOURCE="fcron-$VERSION.src.tar.gz"
       URL="ftp://ftp.seul.org/pub/fcron
            http://fcron.free.fr"
  HOMEPAGE="http://fcron.free.fr"
  EPROVIDE="cron"
       REQ=( "libelf mail-transport-agent"
             "Linux-PAM:::" )
  ESTIMATE="22"
      DESC="fcron is a superior periodic scheduler.
fcron is a periodical command scheduler which aims at replacing 
vixie cron, so it implements most of its functionality.
It does not assume that your system is 
running either all the time or regularly.
You can, for instance, tell fcron to execute 
tasks every x hours y minutes of system uptime, 
or to do a job only once in a specified interval of time.
You can also set a nice value to a job, run it 
depending on the system load average, and much more."

build() {
 install_init()  {

  cp  $SCRIPT_DIR/fcron.sh        /etc/init.d

  ln     -sf  ../init.d/fcron.sh  /etc/rcS.d/S80fcron
  ln     -sf  ../init.d/fcron.sh  /etc/rc0.d/K20fcron
  ln     -sf  ../init.d/fcron.sh  /etc/rc6.d/K20fcron

  [ -e /etc/fcron.allow ]  ||  cp  files/fcron.allow  /etc
  [ -e /etc/fcron.deny  ]  ||  cp  files/fcron.deny   /etc

 }

 groupadd  fcron             2>/dev/null
 useradd   fcron  -g  fcron  2>/dev/null

 if    spell_installed  Linux-PAM
 then  WITH_PAM="--with-pam=yes"
 else  WITH_PAM="--with-pam=no"
 fi

 EDITOR=`which $EDITOR  2>/dev/null`  ||
 EDITOR=`which nano`

 sed  -i  "s:-O2:$CFLAGS:"                 configure
 sed  -i  "s,next_file:,next_file:\
 ;,"  conf.c

 ./configure --prefix=/usr          \
       --with-answer-all=no   \
       $WITH_PAM              \
       --with-editor=$EDITOR  &&
 make                                &&
 prepare_install                     &&
 make    install                     &&
 install_init
}

post_install() {
 default_post_install
 /etc/init.d/fcron.sh  start
}

pre_remove() {
 default_pre_remove
 /etc/init.d/fcron.sh  stop
}

