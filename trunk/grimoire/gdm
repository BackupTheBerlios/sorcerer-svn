# The content of the PID file might be incorrect.
# running /etc/init.d/gdm stop or /etc/init.d/gdm restart
# might not work properly
# seems to be due to a bugg gdm.

   version stable 3.2.0 3.0.0 2.91.94 2.32.1 2.32.0
   require GConf accountsservice libcanberra libxklavier upower
#  require ConsoleKit upower gnome-panel intltool libcanberra libdmx libgnomeui libgsf librsvg libxklavier gnome-doc-utils xkeyboard-config zenity
# libselinux 
  optional Linux-PAM    ''                        ''                     for pluggable authentication
  optional libXevie     --with-xevie              --without-xevie
  optional openssh      --enable-secureremote=yes ''                     for secure remote connection support
  optional tcp_wrappers --with-tcp-wrappers=yes   --with-tcp-wrappers=no to control allowed remote connections using tcp_wrappers
      opts --enable-console-helper=no --enable-static=no
  sys_user gdm gdm /var/gdm
  category window-manager
 attribute gnome makej
    source $GNOME_URL sources/gdm/${VERSION:0:3}/gdm-$VERSION.tar.xz
  homepage http://www.gnome.org/projects/gdm/
      info last  20111006
# no sorcerer support for consolehelper yet.
#            'libselinux:--with-selinux:--without-selinux:for selinux support'
 freshmeat gnomedisplaymanager
      desc 'Gnome Display Manager is an improved xdm
gdm the Gnome Display Manager is a re-implementation
of the well known xdm program.'
     iwall 'gdm will soon restart'

build(){
 if   spell_installed Linux-PAM; then SCHEME=pam
 elif spell_installed shadow;    then SCHEME=shadow
 else SCHEME=auto
 fi

 AUTH_SCHEME="--enable-authentication-scheme=$SCHEME"

 ./configure          \
 --prefix=/usr        \
 --localstatedir=/var \
 --sysconfdir=/etc    \
 $OPTS        \
 $AUTH_SCHEME &&
 make         &&
 make install DESTDIR=$DESTDIR
}

current(){
 case $VERSION in
  3.0.0) grep -q /etc/pam.d/system-auth /etc/pam.d/gdm ;;
 esac
}
